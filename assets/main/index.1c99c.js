window.__require=function e(t,o,r){function n(a,c){if(!o[a]){if(!t[a]){var l=a.split("/");if(l=l[l.length-1],!t[l]){var s="function"==typeof __require&&__require;if(!c&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var p=o[a]={exports:{}};t[a][0].call(p.exports,function(e){return n(t[a][1][e]||e)},p,p.exports,e,t,o,r)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<r.length;a++)n(r[a]);return n}({AdManager:[function(e,t,o){"use strict";cc._RF.push(t,"044edF/1elHl4rZQR7N7DE1","AdManager"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Plugin/Native/AdmobHelper"),n=e("../ConstantNative"),i=e("../Player/player.model"),a=e("./AnalyticManager"),c=e("./RemoteConfigManager"),l=new(function(){function e(){this.totalTimeCallShowInterstitialAd=0}return Object.defineProperty(e.prototype,"forceAutoLoadBanner",{get:function(){return r.default.forceAutoLoadBanner},set:function(e){r.default.forceAutoLoadBanner=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastTimeShowInterstitialAds",{get:function(){return r.default.lastTimeShowInterstitialAds},enumerable:!1,configurable:!0}),e.prototype.onRecordNewGame=function(){this.showBanner(n.AD_BANNER)},e.prototype.init=function(e){e.requestIDFA=c.default.getRequestIDFA(),r.default.init(e)},e.prototype.setBannerSize=function(e,t){r.default.setBannerSize(e,t)},e.prototype.isBannerLoaded=function(e){return r.default.isBannerLoaded(e)},e.prototype.setBannerPos=function(e,t){r.default.setBannerPos(e,t)},e.prototype.canShowBanner=function(){return!(i.Player.removedAds.value||!i.Player.playedTutorial.value)},e.prototype.showBanner=function(e){this.canShowBanner()&&(l.forceAutoLoadBanner=!0,r.default.showBanner(e))},e.prototype.hideBanner=function(e){r.default.hideBanner(e)},e.prototype.showInterstitial=function(e,t,o){this.isInterstitialAvailable(e)&&r.default.showInterstitial(e,t,o)},e.prototype.isInterstitialAvailable=function(e){return i.Player.removedAds.value||Date.now()-this.lastTimeShowInterstitialAds<n.SHOW_INTERSTITIAL_AD_MILLISECOND_DELAY||i.Player.playedGames.value<n.SHOW_ADS_AFTER_TOTAL_GAME_PLAYED_COUNT||this.totalTimeCallShowInterstitialAd<1?(this.totalTimeCallShowInterstitialAd++,!1):r.default.isInterstitialAvailable(e)},e.prototype.showVideoReward=function(e,t,o){return r.default.showVideoReward(e,t,o)},e.prototype.isRewardedAdAvailable=function(e){return r.default.isRewardedAdAvailable(e)},e.prototype.onBannerLoaded=function(){this.canShowBanner()&&a.default.logEventAds(a.EventAdsType.show_banner)},e.prototype.onBannerClicked=function(){a.default.logEventAds(a.EventAdsType.click_banner)},e.prototype.onInterstitialOpened=function(){a.default.logEventAds(a.EventAdsType.show_interstitial)},e.prototype.onInterstitialClicked=function(){a.default.logEventAds(a.EventAdsType.click_interstitial)},e.prototype.onRewardVideoOpened=function(){a.default.logEventAds(a.EventAdsType.show_rewarded)},e.prototype.onRewardVideoClosed=function(e,t){t&&a.default.logEventAds(a.EventAdsType.completed_video)},e}());o.default=l,cc._RF.pop()},{"../../Plugin/Native/AdmobHelper":"AdmobHelper","../ConstantNative":"ConstantNative","../Player/player.model":"player.model","./AnalyticManager":"AnalyticManager","./RemoteConfigManager":"RemoteConfigManager"}],AdmobHelper:[function(e,t,o){"use strict";cc._RF.push(t,"0c101XfBoxAWYt7fwEQ4zRy","AdmobHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdType=void 0;var r,n,i=e("./Firebase/Analytics/FirebaseAnalytic");(function(e){e.Banner="banner",e.Interstitial="interstitial",e.VideoReward="rewarded"})(r=o.AdType||(o.AdType={})),function(e){e[e.Banner=0]="Banner",e[e.Interstitial=1]="Interstitial",e[e.InterstitialOpened=2]="InterstitialOpened",e[e.InterstitialClosed=3]="InterstitialClosed",e[e.VideoReward=4]="VideoReward",e[e.VideoRewardOpened=5]="VideoRewardOpened",e[e.VideoRewardClosed=6]="VideoRewardClosed"}(n||(n={}));var a="org/cocos2dx/javascript/util/admob/AdmobBridge",c="AdmobBridge",l=new(function(){function e(){this._callbacks={},this._ads={},this._autoLoadBanner=!1,this._previousAudioEngineMusicVolume=0,this._previousAudioEngineSoundVolume=0,this._forceAutoLoadBanner=null,this._lastTimeShowInterstitialAds=0,this.paidEvenHandler=null}return Object.defineProperty(e.prototype,"forceAutoLoadBanner",{get:function(){return this._forceAutoLoadBanner},set:function(e){this._forceAutoLoadBanner=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastTimeShowInterstitialAds",{get:function(){return this._lastTimeShowInterstitialAds},enumerable:!1,configurable:!0}),e.prototype.init=function(e){this._options=e,this._autoLoadBanner=e.autoLoadBanner,this.setVunglePlacements(),this._init()},e.prototype.loadAds=function(){var e=this,t=this._options,o=t.autoInit,n=void 0===o||o,i=t.ads;(void 0===i?[]:i).forEach(function(t){if(e._ads[t.name]=t,n)switch(t.type){case r.Banner:e.initBanner(t.name);break;case r.Interstitial:e.initInterstitial(t.name);break;case r.VideoReward:e.initRewardedAd(t.name);break;default:cc.log("unknow ad type",t.type)}})},e.prototype.getAdId=function(e){var t=this._ads[e];return t?cc.sys.os===cc.sys.OS_IOS?t.ios:cc.sys.os===cc.sys.OS_ANDROID?t.android:"":""},e.prototype.getAdName=function(e){for(var t=0,o=Object.keys(this._ads);t<o.length;t++){var r=o[t];if(this._ads[r].android===e)return r;if(this._ads[r].ios===e)return r}return cc.log("can't found ad id",e),""},e.prototype._init=function(){cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?this._options.requestIDFA?jsb.reflection.callStaticMethod(c,"requestIDFA"):this.loadAds():cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(a,"init","()V"))},e.prototype.setVunglePlacements=function(){this._options.vunglePlacement&&jsb&&cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod(c,"setVunglePlacements:interstitial:video:",this._options.vunglePlacement.banner,this._options.vunglePlacement.interstitial,this._options.vunglePlacement.video)},e.prototype.initBanner=function(e,t){this._callbacks[n.Banner]=t,cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(c,"initBanner:",this.getAdId(e)):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(a,"initBanner","(Ljava/lang/String;)V",this.getAdId(e)))},e.prototype.setBannerSize=function(e,t){cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(c,"setBannerSize:",this.getAdId(e),t):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(a,"setBannerSize","(Ljava/lang/String;I)V",this.getAdId(e),t))},e.prototype.isBannerLoaded=function(e){if(cc.sys.isNative&&jsb){if(cc.sys.os===cc.sys.OS_IOS)return jsb.reflection.callStaticMethod(c,"isBannerLoaded:",this.getAdId(e));if(cc.sys.os===cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(a,"isBannerLoaded","(Ljava/lang/String;)Z",this.getAdId(e))}return!1},e.prototype.setBannerPos=function(e,t){cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(c,"setBannerPos:",this.getAdId(e),t):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(a,"setBannerPos","(Ljava/lang/String;I)V",this.getAdId(e),t))},e.prototype.showBanner=function(e){cc.sys.isNative&&jsb&&(i.default.logEvent("show_banner",null),cc.systemEvent.emit("AD_EVENT_BANNER_SHOW"),cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(c,"showBanner:",this.getAdId(e)):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(a,"showBanner","(Ljava/lang/String;)V",this.getAdId(e)))},e.prototype.hideBanner=function(e){cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(c,"hideBanner:",this.getAdId(e)):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(a,"hideBanner","(Ljava/lang/String;)V",this.getAdId(e)))},e.prototype.initInterstitial=function(e,t){this._callbacks[n.Interstitial]=t,cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(c,"initInterstitial:",this.getAdId(e)):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(a,"initInterstitial","(Ljava/lang/String;)V",this.getAdId(e)))},e.prototype.showInterstitial=function(e,t,o){this._callbacks[n.InterstitialOpened]=t,this._callbacks[n.InterstitialClosed]=o,cc.sys.isNative&&jsb?(i.default.logEvent("show_interstitial",null),cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(c,"showInterstitial:",this.getAdId(e)):cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(a,"showInterstitial","(Ljava/lang/String;)V",this.getAdId(e)):o&&o(e,!0)):o&&o(e,!0)},e.prototype.isInterstitialAvailable=function(e){if(cc.sys.isNative&&jsb){if(cc.sys.os===cc.sys.OS_IOS)return jsb.reflection.callStaticMethod(c,"isInterstitialAvailable:",this.getAdId(e));if(cc.sys.os===cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(a,"isInterstitialAvailable","(Ljava/lang/String;)Z",this.getAdId(e))}return!0},e.prototype.initRewardedAd=function(e,t){this._callbacks[n.VideoReward]=t,cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(c,"initRewardedAd:",this.getAdId(e)):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(a,"initRewardedAd","(Ljava/lang/String;)V",this.getAdId(e)))},e.prototype.showVideoReward=function(e,t,o){this._callbacks[n.VideoRewardOpened]=t,this._callbacks[n.VideoRewardClosed]=o,cc.sys.isNative&&jsb?(i.default.logEvent("show_rewarded",null),cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(c,"showRewardedAd:",this.getAdId(e)):cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(a,"showRewardedAd","(Ljava/lang/String;)V",this.getAdId(e)):o&&o(e,!0)):o&&o(e,!0)},e.prototype.isRewardedAdAvailable=function(e){if(cc.sys.isNative&&jsb){if(cc.sys.os===cc.sys.OS_IOS)return jsb.reflection.callStaticMethod(c,"isRewardedAdAvailable:",this.getAdId(e));if(cc.sys.os===cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(a,"isRewardedAdAvailable","(Ljava/lang/String;)Z",this.getAdId(e))}return!0},e.prototype.nativeRequestIDFA=function(){this.loadAds()},e.prototype.nativeInitCompleted=function(){this.loadAds()},e.prototype.nativeBannerOnLoaded=function(e){var t=this.getAdName(e);_.isNil(this._forceAutoLoadBanner)?this._autoLoadBanner&&this.showBanner(t):this._forceAutoLoadBanner&&this.showBanner(t),this._callbacks[n.Banner]&&this._callbacks[n.Banner](t,!0)},e.prototype.nativeBannerOnLoadFailed=function(e){this._callbacks[n.Banner]&&this._callbacks[n.Banner](this.getAdName(e),!1)},e.prototype.nativeBannerOnClicked=function(){i.default.logEvent("click_banner",null)},e.prototype.nativeInterstitialOnLoaded=function(e){this._callbacks[n.Interstitial]&&this._callbacks[n.Interstitial](this.getAdName(e),!0)},e.prototype.nativeInterstitialOnLoadFailed=function(e){this._callbacks[n.Interstitial]&&this._callbacks[n.Interstitial](this.getAdName(e),!1)},e.prototype.nativeInterstitialOnOpened=function(e){this._previousAudioEngineMusicVolume=cc.audioEngine.getMusicVolume(),this._previousAudioEngineSoundVolume=cc.audioEngine.getEffectsVolume(),cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0),this._lastTimeShowInterstitialAds=Date.now(),this._callbacks[n.InterstitialOpened]&&this._callbacks[n.InterstitialOpened](this.getAdName(e),!0)},e.prototype.nativeInterstitialOnClosed=function(e){cc.audioEngine.setMusicVolume(this._previousAudioEngineMusicVolume),cc.audioEngine.setEffectsVolume(this._previousAudioEngineSoundVolume),this._lastTimeShowInterstitialAds=Date.now(),this._callbacks[n.InterstitialClosed]&&this._callbacks[n.InterstitialClosed](this.getAdName(e),!0)},e.prototype.nativeInterstitialOnClicked=function(){i.default.logEvent("click_interstitial",null)},e.prototype.nativeRewardedAdOnLoaded=function(e){this._callbacks[n.VideoReward]&&this._callbacks[n.VideoReward](this.getAdName(e),!0)},e.prototype.nativeRewardedAdOnLoadFailed=function(e){this._callbacks[n.VideoReward]&&this._callbacks[n.VideoReward](this.getAdName(e),!1)},e.prototype.nativeRewardedAdOnOpened=function(e){this._previousAudioEngineMusicVolume=cc.audioEngine.getMusicVolume(),this._previousAudioEngineSoundVolume=cc.audioEngine.getEffectsVolume(),cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0),this._callbacks[n.VideoRewardOpened]&&this._callbacks[n.VideoRewardOpened](this.getAdName(e),!0)},e.prototype.nativeRewardedAdOnClosed=function(e,t){cc.audioEngine.setMusicVolume(this._previousAudioEngineMusicVolume),cc.audioEngine.setEffectsVolume(this._previousAudioEngineSoundVolume),this._callbacks[n.VideoRewardClosed]&&(this._callbacks[n.VideoRewardClosed](this.getAdName(e),t),t&&i.default.logEvent("completed_video",null))},e.prototype.nativePaidEvent=function(e,t,o,r,n,i){this.paidEvenHandler&&this.paidEvenHandler({id:e,adapter:t,format:o,value:r,currencyCode:n,precision:i})},e}());cc.AdmobManager=l,o.default=l,cc._RF.pop()},{"./Firebase/Analytics/FirebaseAnalytic":"FirebaseAnalytic"}],AnalyticManager:[function(e,t,o){"use strict";cc._RF.push(t,"a107045ElRE6IFCDy/A4sEq","AnalyticManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventAwardsType=o.EventAdsType=void 0;var r,n,i=e("../../Plugin/Native/Firebase/Analytics/FirebaseAnalytic"),a=e("../../Plugin/Native/AppsflyerAnalytic"),c=e("../../Plugin/Native/Firebase/Crashlytic/FirebaseCrashlytic");(function(e){e[e.click_banner=0]="click_banner",e[e.click_interstitial=1]="click_interstitial",e[e.completed_video=2]="completed_video",e[e.show_banner=3]="show_banner",e[e.show_interstitial=4]="show_interstitial",e[e.show_rewarded=5]="show_rewarded"})(r=o.EventAdsType||(o.EventAdsType={})),function(e){e[e.awards_unlocked=0]="awards_unlocked",e[e.awards_equiped=1]="awards_equiped"}(n=o.EventAwardsType||(o.EventAwardsType={}));var l=new(function(){function e(){}return e.prototype.logEvent=function(e,t,o){void 0===o&&(o=!1),i.default.logEvent(e,t),o&&a.default.logEventNameOnly(e)},e.prototype.init=function(){cc.sys.isMobile&&cc.sys.isNative,cc.sys.isNative},e.prototype.logEventException=function(e,t){this.logEvent("exception",{exception:e}),c.default.logCustomCrash(t)},e.prototype.logEventFirstFinishGame=function(e){if(cc.sys.isMobile&&cc.sys.isNative){var t="";3==e?t="finish_3rd_game":5==e?t="finish_5th_games":10==e&&(t="finish_10th_games"),0!=t.length&&this.logEvent(t,null,!0)}},e.prototype.logEventGameOver=function(e,t,o,r,n,i,a){var c={},l="0-60";e<=60||(l=e<=120?"61-120":e<=180?"121-180":e<=240?"181-240":e<=360?"241-360":e<=540?"361-540":"540+"),c.time=e.toString(),c.time_range=l,c.moves=t.toString(),c.score=o.toString(),c.omc=(0).toString(),c.streak=r.toString(),c.combo=n.toString(),c.max_streak=i.toString(),c.max_combo=a.toString(),this.logEvent("GameOver",c)},e.prototype.logEventUX=function(e,t){var o=t?e+"_"+t:e;if(cc.sys.isMobile&&cc.sys.isNative){var r={};r.action=o,this.logEvent("ux_v2",r)}},e.prototype.logEventAds=function(e){var t=r[e];this.logEvent(t,null,!0),console.log("LOG EVENT ADS:",t)},e.prototype.logEventAward=function(e,t){this.logEvent(n[e],{award:t})},e}());o.default=l,cc._RF.pop()},{"../../Plugin/Native/AppsflyerAnalytic":"AppsflyerAnalytic","../../Plugin/Native/Firebase/Analytics/FirebaseAnalytic":"FirebaseAnalytic","../../Plugin/Native/Firebase/Crashlytic/FirebaseCrashlytic":"FirebaseCrashlytic"}],AppsflyerAnalytic:[function(e,t,o){"use strict";cc._RF.push(t,"95156p6oIJBTLvvNybhZzml","AppsflyerAnalytic"),Object.defineProperty(o,"__esModule",{value:!0});var r="org/cocos2dx/javascript/natives/appsflyer/AppsflyerHelper",n=function(){function e(){}return e.logEventNameOnly=function(e){cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppsFlyerBridge","trackEventNameOnly:",e):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(r,"trackEventNameOnly","(Ljava/lang/String;)V",e))},e.logEvent=function(e,t){cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppsFlyerBridge","logEvent:params:",e,t):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(r,"trackEventNameOnly","(Ljava/lang/String;Ljava/lang/String;)V",e,t))},e}();o.default=n,cc._RF.pop()},{}],AwardComp:[function(e,t,o){"use strict";cc._RF.push(t,"40fd43U4ltMfbdbqeWyHe7e","AwardComp");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./AwardCupItem"),c=e("./AwardData"),l=e("./award.model"),s=e("../Popups/Base/models/popupsview.model"),p=e("../Sound/sound.model"),u=e("../Sound/sound.const"),d=e("../Manager4Native/GameServiceManager"),h=cc._decorator,f=h.ccclass,y=h.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.awardItemContainer=null,t.awardCupItemTemplate=null,t.labelInfo=null,t.arrowInfo=null,t.scrollViewLayer=null,t.topPanel=null,t.tutorialHand=null,t.topPanelStandardY=0,t.contentScrollViewLayerStandardY=0,t}return n(t,e),t.prototype.start=function(){this.tutorialHand.node.active=!1,this.topPanelStandardY=this.topPanel.y,this.contentScrollViewLayerStandardY=this.scrollViewLayer.content.y,this.reloadAwardItems()},t.prototype.onLeaderboardClicked=function(){d.default.showLeaderboard()},t.prototype.reloadAwardItems=function(){var e=this;this.awardItemContainer.destroyAllChildren(),c.AwardDatas.forEach(function(t,o){var r=cc.instantiate(e.awardCupItemTemplate.node);r.active=!0,r.parent=e.awardItemContainer;var n=r.getComponent(a.default);n.cupId=o,n.autoBind=!0,n.isShowDecord=!0,o>0&&!n.unlocked&&n.completedPercentage>=100&&l.AwardModelInstance.awardUnlocked.length<=1&&!e.tutorialHand.node.active&&e.scheduleOnce(function(){var t=e.awardItemContainer.convertToWorldSpaceAR(r.position);e.tutorialHand.node.parent.position=e.tutorialHand.node.parent.parent.convertToNodeSpaceAR(t),e.tutorialHand.node.active=!0,e.tutorialHand.play(e.tutorialHand.defaultClip.name)},.01)})},t.prototype.onCupClicked=function(e){var t=this.awardItemContainer.children.findIndex(function(t){return t==e.target});t<0?console.warn("click cup wrong id"):l.AwardModelInstance.getAwardPercentage(t)>=100?(this.tutorialHand.node.active=!1,s.PopupView.chooseAward.value={id:t,unlocked:l.AwardModelInstance.isAwardUnlocked(t)},l.AwardModelInstance.unlockAward(t)):(p.Sound.sound.value=u.SoundNames.INFO_AWARD,this.showPopupInfo(t))},t.prototype.showPopupInfo=function(e){var t=this.awardItemContainer.convertToWorldSpaceAR(this.awardItemContainer.children[e].position),o=this.labelInfo.node.parent;o.active=!0,o.position=o.parent.convertToNodeSpaceAR(t),o.y+=100,o.x>20?o.x=Math.min(90,o.x):o.x<20?o.x=Math.max(-90,o.x):o.x=0,this.arrowInfo.x=this.arrowInfo.parent.convertToNodeSpaceAR(t).x,this.labelInfo.string=c.AwardDatas[e].unlockDescription,this.awardItemContainer.children.forEach(function(t,o){return t.getComponent(a.default).isHighlightSelect=o==e})},t.prototype.hidePopupInfo=function(){this.awardItemContainer.children.forEach(function(e){return e.getComponent(a.default).isHighlightSelect=!1}),this.labelInfo.node.parent.active=!1},t.prototype.onScroll=function(){this.hidePopupInfo()},i([y(cc.Node)],t.prototype,"awardItemContainer",void 0),i([y(a.default)],t.prototype,"awardCupItemTemplate",void 0),i([y(cc.Label)],t.prototype,"labelInfo",void 0),i([y(cc.Node)],t.prototype,"arrowInfo",void 0),i([y(cc.ScrollView)],t.prototype,"scrollViewLayer",void 0),i([y(cc.Node)],t.prototype,"topPanel",void 0),i([y(cc.Animation)],t.prototype,"tutorialHand",void 0),i([f],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../Manager4Native/GameServiceManager":"GameServiceManager","../Popups/Base/models/popupsview.model":"popupsview.model","../Sound/sound.const":"sound.const","../Sound/sound.model":"sound.model","./AwardCupItem":"AwardCupItem","./AwardData":"AwardData","./award.model":"award.model"}],AwardCupItem:[function(e,t,o){"use strict";cc._RF.push(t,"15a18gih1NK36B8z6JYp0yS","AwardCupItem");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../PersistRootNodes/CupFrames"),c=e("../../Plugin/Reactive/lib"),l=e("./award.model"),s=cc._decorator,p=s.ccclass,u=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprCup=null,t.sprDecord=null,t.progressBarComplete=null,t.labelCompletePercent=null,t.choosendGroup=null,t._autoBind=!1,t}return n(t,e),Object.defineProperty(t.prototype,"unlocked",{get:function(){return this._unlocked},set:function(e){this._unlocked=e,this.progressBarComplete.node.active=!e,this.labelCompletePercent.node.active=!e,this.resetColor(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHighlightSelect",{get:function(){return this._isHighlightSelect},set:function(e){this._isHighlightSelect=e,!this._unlocked&&e?(this.sprCup.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.sprCup.node.color=cc.color(70,70,70),this.sprDecord.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.sprDecord.node.color=cc.color(70,70,70)):this.resetColor(this._unlocked)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choosen",{get:function(){return this._choosen},set:function(e){this._choosen=e,this.choosendGroup.active=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedPercentage",{get:function(){return this._completedPercentage},set:function(e){this._completedPercentage=e,this.progressBarComplete.progress=e/100,this.labelCompletePercent.string=Math.floor(e)+"%"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cupId",{get:function(){return this._cupId},set:function(e){this._cupId=e,this.sprCup.spriteFrame=a.default.CupFramesInstance.getSprFrameByCupId(e),this.sprCup.node.y+=a.default.CupFramesInstance.getAdditionYToBottomByCupId(e),this._autoBind&&this.bindWithData()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowDecord",{get:function(){return this._isShowDecord},set:function(e){if(this._isShowDecord=e,e){var t=a.default.CupFramesInstance.getDecorFrameByCupId(this._cupId);t?(this.sprDecord.spriteFrame=t,this.sprDecord.node.active=!0):this.sprDecord.node.active=!1}else this.sprDecord.node.active=!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoBind",{get:function(){return this._autoBind},set:function(e){this._autoBind=e,e&&this.bindWithData()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){c.Reactive.addTarget(this)},t.prototype.onDestroy=function(){c.Reactive.removeTarget(this)},t.prototype.sprCupWorldPos=function(){return this.sprCup.node.parent.convertToWorldSpaceAR(this.sprCup.node.position)},t.prototype.bindWithData=function(){this.unlocked=l.AwardModelInstance.isAwardUnlocked(this.cupId),this.choosen=l.AwardModelInstance.isAwardChoosen(this.cupId),this.completedPercentage=l.AwardModelInstance.getAwardPercentage(this.cupId)},t.prototype.resetColor=function(e){this.sprCup.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.sprCup.node.color=e?cc.Color.WHITE:cc.color(50,20,0),this.sprDecord.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.sprDecord.node.color=e?cc.Color.WHITE:cc.color(50,20,0)},i([u(cc.Sprite)],t.prototype,"sprCup",void 0),i([u(cc.Sprite)],t.prototype,"sprDecord",void 0),i([u(cc.ProgressBar)],t.prototype,"progressBarComplete",void 0),i([u(cc.Label)],t.prototype,"labelCompletePercent",void 0),i([u(cc.Node)],t.prototype,"choosendGroup",void 0),i([c.react({event:l.AwardProps.awardChoosen}),c.react({event:l.AwardProps.awardUnlocked})],t.prototype,"bindWithData",null),i([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../Plugin/Reactive/lib":"lib","../PersistRootNodes/CupFrames":"CupFrames","./award.model":"award.model"}],AwardData:[function(e,t,o){"use strict";cc._RF.push(t,"2ac3bFLvN5HA6lc/DRayWtV","AwardData"),Object.defineProperty(o,"__esModule",{value:!0}),o.AwardDatas=void 0,o.AwardDatas=[{name:"Bronze Medal",unlockDescription:"Welcome to Square 99: Wood block",requireHighestScore:0,requireAccumulateScore:0,requireAccumulateStreaks:[0,0,0,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]},{name:"Silver Medal",unlockDescription:"Accumulated 15000 pts",requireHighestScore:0,requireAccumulateScore:15e3,requireAccumulateStreaks:[0,0,0,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]},{name:"Golden Medal",unlockDescription:"Accumulated 50000 pts",requireHighestScore:0,requireAccumulateScore:5e4,requireAccumulateStreaks:[0,0,0,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]},{name:"Bronze Cup",unlockDescription:"Reach your highest score over 1999 pts",requireHighestScore:1999,requireAccumulateScore:0,requireAccumulateStreaks:[0,0,0,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]},{name:"Silver Cup",unlockDescription:"Reach your highest score over 3999 pts",requireHighestScore:3999,requireAccumulateScore:0,requireAccumulateStreaks:[0,0,0,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]},{name:"Golden Cup",unlockDescription:"Reach your highest score over 5999 pts",requireHighestScore:5999,requireAccumulateScore:0,requireAccumulateStreaks:[0,0,0,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]},{name:"Silver Crown",unlockDescription:"Streak x2 200 times",requireHighestScore:0,requireAccumulateScore:0,requireAccumulateStreaks:[200,0,0,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]},{name:"Golden Crown",unlockDescription:"Streak x4 100 times",requireHighestScore:0,requireAccumulateScore:0,requireAccumulateStreaks:[0,0,100,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]},{name:"Ruby Crown",unlockDescription:"Streak x4 200 times",requireHighestScore:0,requireAccumulateScore:0,requireAccumulateStreaks:[0,0,200,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]},{name:"Super OvalGold",unlockDescription:"- Accumulated 25000 pts in the whole day\n- Streak x3 50 times in the whole day",requireHighestScore:0,requireAccumulateScore:0,requireAccumulateStreaks:[0,0,0,0,0],requireTodayScore:25e3,requireTodayStreak:[0,50,0,0,0]},{name:"Deluxe Crown",unlockDescription:"- Accumulated 500,000 pts all time\n- Streak x4 250 times all time",requireHighestScore:0,requireAccumulateScore:5e5,requireAccumulateStreaks:[0,0,250,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]},{name:"Royal Crown",unlockDescription:"- Accumulated 1,500,000 pts all time\n- Reach your highScore over 6,999 pts\n- Streak x4 250 times all time",requireHighestScore:6999,requireAccumulateScore:15e5,requireAccumulateStreaks:[0,0,250,0,0],requireTodayScore:0,requireTodayStreak:[0,0,0,0,0]}],cc._RF.pop()},{}],BasePopup:[function(e,t,o){"use strict";cc._RF.push(t,"61dfa2OKjBNmobqSGKG9hQb","BasePopup");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../../Plugin/Reactive/lib"),c=cc._decorator,l=c.ccclass,s=c.property,p=.2,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.event="",t.blockInput=null,t.container=null,t.shadow=null,t.hideOnTouch=!0,t.showAnmiationDuration=p,t.hideAnmiationDuration=p,t.onShowEvents=[],t.onHideEvents=[],t.onBeforeHideEvents=[],t.touchStartEvents=[],t.touchEndEvents=[],t.isShowed=!1,t.layerSwallowTouch=null,t}return n(t,e),t.prototype.onLoad=function(){this.blockInput||(this.blockInput=this.getComponent(cc.BlockInputEvents),this.blockInput.enabled=!1),this.container||(this.container=this.node.getChildByName("container")),this.shadow||(this.shadow=this.node.getChildByName("shadow")),this.createLayerSwallowTouch(),this.startPos=this.container.position,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),a.Reactive.addEvent(this.event,this,this.show,function(e){return e}),a.Reactive.addEvent(this.event,this,this.hide,function(e){return!e})},t.prototype.start=function(){this.node.opacity=0,this.node.setPosition(2*-cc.winSize.height)},t.prototype.onDestroy=function(){a.Reactive.removeTarget(this)},t.prototype.show=function(){this.isShowed||(this.onShowEvents.forEach(function(e){return e.emit(null)}),this.isShowed=!0,this.node.setPosition(cc.Vec2.ZERO),this.node.opacity=255,this.container.position=this.startPos.add(cc.v3(0,-40)),this.container.opacity=0,cc.tween(this.container).to(this.showAnmiationDuration,{position:this.startPos,opacity:255}).start(),this.shadow&&(this.shadow.opacity=0,cc.tween(this.shadow).to(this.showAnmiationDuration,{opacity:200}).start()),this.layerSwallowTouch.active=!1)},t.prototype.hide=function(){var e=this;this.isShowed&&(this.onBeforeHideEvents.forEach(function(e){return e.emit(null)}),this.container.stopAllActions(),cc.tween(this.container).to(this.hideAnmiationDuration,{position:this.startPos.add(cc.v3(0,-40)),opacity:0}).call(function(){e.node.opacity=0,e.node.setPosition(cc.v2(0,2*-cc.winSize.height)),e.isShowed=!1,e.onHideEvents.forEach(function(e){return e.emit(null)})}).start(),this.shadow&&cc.tween(this.shadow).to(this.hideAnmiationDuration,{opacity:0}).start(),this.layerSwallowTouch.active=!0)},t.prototype.onTouchStart=function(){this.touchStartEvents.forEach(function(e){return e.emit(null)})},t.prototype.onTouchEnd=function(){this.hideOnTouch&&this.hide(),this.touchEndEvents.forEach(function(e){return e.emit(null)})},t.prototype.createLayerSwallowTouch=function(){if(!this.layerSwallowTouch){this.layerSwallowTouch=new cc.Node,this.layerSwallowTouch.parent=this.node,this.layerSwallowTouch.setPosition(cc.Vec2.ZERO);var e=this.layerSwallowTouch.addComponent(cc.Widget);e.isAlignTop=!0,e.isAlignBottom=!0,e.isAlignLeft=!0,e.isAlignRight=!0,e.top=0,e.bottom=0,e.right=0,e.left=0,this.layerSwallowTouch.addComponent(cc.Button),this.layerSwallowTouch.active=!1}},i([s(cc.String)],t.prototype,"event",void 0),i([s(cc.BlockInputEvents)],t.prototype,"blockInput",void 0),i([s(cc.Node)],t.prototype,"container",void 0),i([s(cc.Node)],t.prototype,"shadow",void 0),i([s(cc.Boolean)],t.prototype,"hideOnTouch",void 0),i([s(cc.Float)],t.prototype,"showAnmiationDuration",void 0),i([s(cc.Float)],t.prototype,"hideAnmiationDuration",void 0),i([s(cc.Component.EventHandler)],t.prototype,"onShowEvents",void 0),i([s(cc.Component.EventHandler)],t.prototype,"onHideEvents",void 0),i([s(cc.Component.EventHandler)],t.prototype,"onBeforeHideEvents",void 0),i([s(cc.Component.EventHandler)],t.prototype,"touchStartEvents",void 0),i([s(cc.Component.EventHandler)],t.prototype,"touchEndEvents",void 0),i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../../Plugin/Reactive/lib":"lib"}],BlockCustom:[function(e,t,o){"use strict";cc._RF.push(t,"0eb5fRk8o1P15rovO8dRvBR","BlockCustom");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../../Plugin/KDPlugin/MatrixGame/Block"),c=cc._decorator,l=c.ccclass,s=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectedBg=null,t.labelIndex=null,t.onClick=null,t}return n(t,e),t.prototype.update=function(){this.labelIndex.string=(this.node.getSiblingIndex()+1).toString()},t.prototype.showSelectedBg=function(){this.selectedBg.active=!0},t.prototype.hideSelectedBg=function(){this.selectedBg.active=!1},t.prototype.showLabelIndex=function(){this.labelIndex.node.active=!0},t.prototype.onClickBlock=function(){this.onClick&&this.onClick(this)},i([s(cc.Node)],t.prototype,"selectedBg",void 0),i([s(cc.Label)],t.prototype,"labelIndex",void 0),i([l],t)}(a.default);o.default=p,cc._RF.pop()},{"../../../../Plugin/KDPlugin/MatrixGame/Block":"Block"}],BlockGamePlus:[function(e,t,o){"use strict";cc._RF.push(t,"338bfA+BkhBhrKv59a7M4nY","BlockGamePlus");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Script/CoreGameplayEx/BlockGame"),c=cc._decorator,l=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),i([l],t)}(a.default));o.default=s,cc._RF.pop()},{"../../Script/CoreGameplayEx/BlockGame":"BlockGame"}],BlockGame:[function(e,t,o){"use strict";cc._RF.push(t,"0a6f3QREwlL57H0ZjfDwPpK","BlockGame");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ConstantGameplay"),c=e("./CellGame"),l=e("../../Plugin/KDPlugin/MatrixGame/Block"),s=e("../../Plugin/KDPlugin/MatrixGame/TableMatrix"),p=e("../../Plugin/KDPlugin/Core/Helper"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handMoveWithBlockSprFrames=[],t.sprHand=null,t.opacityCanNotPlaceBlock=80,t.TAG_ACTION_BLOCK_RENDERER_MOVE=357654,t._justAllowChangeMatrixAtAddPos=cc.Vec2.ZERO,t._customePos=cc.Vec2.ZERO,t._lockRotate=!1,t}return n(t,e),Object.defineProperty(t.prototype,"justAllowChangeMatrixAtAddPos",{get:function(){return this._justAllowChangeMatrixAtAddPos},set:function(e){this._justAllowChangeMatrixAtAddPos=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customePos",{get:function(){return this._customePos},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lockRotate",{get:function(){return this._lockRotate},set:function(e){this._lockRotate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handIdWhenMoveBlock",{get:function(){return this._handIdWhenMoveBlock},set:function(e){this._handIdWhenMoveBlock=e,this.sprHand&&(this.sprHand.node.active=!1)},enumerable:!1,configurable:!0}),t.prototype.setupCellComAtRowCol=function(t,o,r,n){e.prototype.setupCellComAtRowCol.call(this,t,o,r,n);var i=t.node;i.scale=i.parent==this.blockRenderer?a.ConfigGameplay.SCALE_CELL_SPRITE_OF_BLOCK_AT_BOT:1,t.cellTileType=i.parent==this.blockRenderer?c.CellTileType.Footer:c.CellTileType.Main},t.prototype.update=function(){this.sprHand&&this.sprHand.node.active&&this.blockRenderer&&(this.sprHand.node.position=this.blockRenderer.position,this.sprHand.node.y-=this._validCellsSize.height/2-50)},t.createTableMatrixBlock=function(e,t,o){void 0===e&&(e=a.BlockDefaulType.None_BlockType),void 0===t&&(t=-1),void 0===o&&(o=null);var r=o||p.KDCore.randomInt(0,a.ConfigGameplay.TOTAL_CELL_COLOR-1)+1,n=p.KDCore.randomInt(a.BlockDefaulType.One_BlockType,a.BlockDefaulType.End_BlockType-1),i=[];switch(n=e!=a.BlockDefaulType.None_BlockType?e:n){case a.BlockDefaulType.One_BlockType:var c=[1];i.push(c);break;case a.BlockDefaulType.Two_BlockType:c=[1,1],i.push(c);break;case a.BlockDefaulType.Three_BlockType:c=[1,1,1],i.push(c);break;case a.BlockDefaulType.Four_BlockType:c=[1,1,1,1],i.push(c);break;case a.BlockDefaulType.Five_BlockType:c=[1,1,1,1,1],i.push(c);break;case a.BlockDefaulType.L_BlockType:var l=[1,0];c=[1,1],i.push(c),i.push(l);break;case a.BlockDefaulType.L_Big_Right_BlockType:l=[1,0,0],c=[1,1,1],i.push(c),i.push(l);break;case a.BlockDefaulType.L_Big_Left_BlockType:l=[0,0,1],c=[1,1,1],i.push(c),i.push(l);break;case a.BlockDefaulType.L_SupperBig_BlockType:var u=[1,0,0];l=[1,0,0],c=[1,1,1],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.O_BlockType:l=[1,1],c=[1,1],i.push(c),i.push(l);break;case a.BlockDefaulType.O_Big_BlockType:u=[1,1,1],l=[1,1,1],c=[1,1,1],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.Z_Right_BlockType:l=[0,1,1],c=[1,1,0],i.push(c),i.push(l);break;case a.BlockDefaulType.Z_Left_BlockType:l=[1,1,0],c=[0,1,1],i.push(c),i.push(l);break;case a.BlockDefaulType.Plus_BlockType:u=[0,1,0],l=[1,1,1],c=[0,1,0],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.C_BlockType:l=[1,1,1],c=[1,0,1],i.push(c),i.push(l);break;case a.BlockDefaulType.T_BlockType:l=[1,1,1],c=[0,1,0],i.push(c),i.push(l);break;case a.BlockDefaulType.T_Big_BlockType:u=[1,1,1],l=[0,1,0],c=[0,1,0],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.Slash_Two_BlockType:l=[0,1],c=[1,0],i.push(c),i.push(l);break;case a.BlockDefaulType.Slash_Three_BlockType:u=[0,0,1],l=[0,1,0],c=[1,0,0],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.Slash_Four_BlockType:u=[0,0,1,0],l=[0,1,0,0],c=[1,0,0,0],i.push(c),i.push(l),i.push(u),i.push([0,0,0,1]);break;case a.BlockDefaulType.Rectangle_BlockType:l=[1,1,1],c=[1,1,1],i.push(c),i.push(l);break;case a.BlockDefaulType.Rectangle_L_BlockType:u=[1,0,0],l=[1,1,1],c=[1,1,1],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.C_L_BlockType:u=[1,0,0],l=[1,0,1],c=[1,1,1],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.O_And_One_BlockType:l=[1,1,0],c=[1,1,1],i.push(c),i.push(l);break;case a.BlockDefaulType.Triangle_BlockType:u=[1,0,0],l=[1,1,0],c=[1,1,1],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.Slash_Two_LeftRight_BlockType:u=[1,0],l=[0,1],c=[1,0],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.Gun_BlockType:u=[0,1,0],l=[1,1,0],c=[1,1,1],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.M_Inclined_BlockType:u=[0,1,1],l=[1,1,0],c=[1,0,0],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.WithOne_Two_BlockType:u=[0,1],l=[1,0],c=[1,0],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.WithOneRight_L_BlockType:l=[1,0,1],c=[0,1,1],i.push(c),i.push(l);break;case a.BlockDefaulType.WithOne_LBigRight_BlockType:u=[0,1,0],l=[1,1,1],c=[0,0,1],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.WithOneLeft_L_BlockType:u=[1,0,0],l=[0,1,1],c=[0,1,0],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.WithOne_Plus_BlockType:u=[0,1,0],l=[1,1,1],c=[1,1,0],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.LBigRight_And_SlashTwo_BlockType:u=[0,0,1],l=[1,1,0],c=[1,1,1],i.push(c),i.push(l),i.push(u);break;case a.BlockDefaulType.WithOne_C_BlockType:u=[0,1,0],l=[1,1,1],c=[1,0,1],i.push(c),i.push(l),i.push(u);break;default:return null}for(var d=s.default.createDefaultTableMatrix(a.default.MAX_ROWS,a.default.MAX_COLS),h=0;h<i.length;h++)for(var f=0;f<i[0].length;f++)i[h][f]&&d.setValueAt(h,f,r);return s.default.rotateMatrix90(d,i[0].length,i.length,t<0?p.KDCore.randomInt(0,3):t,r)},t.prototype.checkCanChangeMatrixWithAddPos=function(t,o){return!!(this._justAllowChangeMatrixAtAddPos.equals(cc.Vec2.ZERO)||this._justAllowChangeMatrixAtAddPos.y==t&&this._justAllowChangeMatrixAtAddPos.x==o)&&e.prototype.checkCanChangeMatrixWithAddPos.call(this,t,o)},t.prototype.rotate90=function(e){if(!this._lockRotate){var t=this.rightAvailable-this.leftAvailable+1,o=this.topAvailable-this.botAvailable+1;this.setTableMatrix(s.default.rotateMatrix90(this.tableMatrix,t,o,1,this.getFirstValidCellIdFromBotLeft())),this.setCustomePos(this._customePos),e&&cc.tween(this.blockRenderer).set({angle:90}).to(.2,{angle:0}).start()}},t.prototype.setCustomePos=function(e){this._customePos=e,this.blockRenderer.setPosition(e)},t.prototype.setCustomeWorldPos=function(e){var t=this.blockRenderer.parent.convertToNodeSpaceAR(e);this.setCustomePos(t)},t.prototype.runActionMoveBackBlock=function(e){this.runAnmMoveRendererToPos(l.eBlockRendererType.BlockRenderer,this._customePos,.15,e);var t=a.ConfigGameplay.SCALE_BLOCK_IN_BOT;this.runAnmScaleRendererToValue(l.eBlockRendererType.BlockRenderer,t)},t.prototype.stopActionMoveBackBlock=function(){this.stopAnmMoveRendererToPos(l.eBlockRendererType.BlockRenderer)},t.prototype.runActionMoveSwapBlock=function(e,t){var o=this.blockRenderer.parent.convertToNodeSpaceAR(e);this.runAnmMoveRendererToPos(l.eBlockRendererType.BlockRenderer,o,.15,t);var r=a.ConfigGameplay.SCALE_BLOCK_IN_BOT;this.runAnmScaleRendererToValue(l.eBlockRendererType.BlockRenderer,r)},t.prototype.stopActionMoveSwapBlock=function(){this.stopAnmMoveRendererToPos(l.eBlockRendererType.BlockRenderer)},t.prototype.runActionMoveBlockQueue=function(e,t,o){var r=this.blockRenderer,n=a.ConfigGameplay.SCALE_BLOCK_IN_BOT;r.setPosition(r.parent.convertToNodeSpaceAR(t));var i=cc.tween(r).set({scale:e?n:0}).to(1,{scale:n,position:cc.v3(this._customePos,0)},{easing:"expoOut"});i.start(),p.KDCore.setTagTweenAction(i,this.TAG_ACTION_BLOCK_RENDERER_MOVE),cc.tween(r).delay(1).call(o).start()},t.prototype.stopActionMoveBlockQueue=function(){this.blockRenderer.stopActionByTag(this.TAG_ACTION_BLOCK_RENDERER_MOVE)},t.prototype.setEnableCannotPlaceBlockEff=function(e){for(var t=this.botAvailable;t<=this.topAvailable;t++)for(var o=this.leftAvailable;o<=this.rightAvailable;o++)this.getCellComAtRowCol(t,o,l.eBlockRendererType.BlockRenderer)&&(this.blockRenderer.opacity=e?this.opacityCanNotPlaceBlock:255)},t.prototype.showEffCanClaim=function(e,t){for(var o=0,r=e;o<r.length;o++){var n=r[o],i=this.getCellComAtRowCol(n.y-t.y,n.x-t.x,l.eBlockRendererType.BlockRenderer);i&&(i.cellTileType=c.CellTileType.FooterHighlight)}},t.prototype.removeEffCanClaim=function(){for(var e=0,t=this.blockRenderer.children;e<t.length;e++){var o=t[e];if(o){var r=o.getComponent(c.default);r&&(r.cellTileType=c.CellTileType.Footer)}}},t.prototype.showEffTouchBlock=function(){this.sprHand&&this._handIdWhenMoveBlock>=0&&this._handIdWhenMoveBlock<this.handMoveWithBlockSprFrames.length&&(this.sprHand.spriteFrame=this.handMoveWithBlockSprFrames[this._handIdWhenMoveBlock],this.sprHand.node.active=!0);for(var e=this._botAvailable;e<=this._topAvailable;e++)for(var t=this._leftAvailable;t<=this._rightAvailable;t++){var o=this.getCellComAtRowCol(e,t,l.eBlockRendererType.BlockRenderer);o&&(o.cellTileType=c.CellTileType.FooterHighlight)}},t.prototype.hideEffTouchBlock=function(){this.sprHand&&(this.sprHand.node.active=!1);for(var e=0,t=this.blockRenderer.children;e<t.length;e++){var o=t[e];if(o){var r=o.getComponent(c.default);r&&(r.cellTileType=c.CellTileType.Footer)}}},t.prototype.getScoreOfBlock=function(){for(var e=0,t=this.botAvailable;t<=this.topAvailable;t++)for(var o=this.leftAvailable;o<=this.rightAvailable;o++)this.tableMatrix.at(t,o)&&e++;return e},i([h([cc.SpriteFrame])],t.prototype,"handMoveWithBlockSprFrames",void 0),i([h(cc.Sprite)],t.prototype,"sprHand",void 0),i([h(cc.Float)],t.prototype,"opacityCanNotPlaceBlock",void 0),i([d],t)}(l.default);o.default=f,cc._RF.pop()},{"../../Plugin/KDPlugin/Core/Helper":"Helper","../../Plugin/KDPlugin/MatrixGame/Block":"Block","../../Plugin/KDPlugin/MatrixGame/TableMatrix":"TableMatrix","./CellGame":"CellGame","./ConstantGameplay":"ConstantGameplay"}],BlockPlus:[function(e,t,o){"use strict";cc._RF.push(t,"26992k8wUFJDrerA2IdCA3M","BlockPlus");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Script/Gameplay/GameplayControllerBase"),c=cc._decorator,l=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},i([l],t)}(a.default));o.default=s,cc._RF.pop()},{"../../Script/Gameplay/GameplayControllerBase":"GameplayControllerBase"}],Block:[function(e,t,o){"use strict";cc._RF.push(t,"49c87+3pTZMmLR1i8y7ll7l","Block");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.eBlockRendererType=void 0;var a,c=e("./GridCom"),l=e("./TableMatrix"),s=e("./GridConfig"),p=e("./DragCom"),u=e("./Cell"),d=cc._decorator,h=d.ccclass,f=d.property;(function(e){e[e.BlockRenderer=0]="BlockRenderer",e[e.HintRenderer=1]="HintRenderer",e[e.ShadowRenderer=2]="ShadowRenderer"})(a=o.eBlockRendererType||(o.eBlockRendererType={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TAG_ACTION_RENDERER_MOVE_TO=546474,t.TAG_ACTION_RENDERER_SCALE_TO=854934,t.blockRenderer=null,t.hintRenderer=null,t.shadowRenderer=null,t._blockId=0,t._blurValueTurnOn=150,t._blurValueTurnOff=255,t}return n(t,e),Object.defineProperty(t.prototype,"blockId",{get:function(){return this._blockId},set:function(e){this._blockId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mainCells",{get:function(){return this.blockRenderer?this.blockRenderer.children.map(function(e){return e.getComponent(u.default)}):null},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.shadowRenderer&&(this.shadowRenderer.active=!1),this.hintRenderer&&(this.hintRenderer.active=!1)},t.prototype.setTableMatrix=function(t,o){e.prototype.setTableMatrix.call(this,t),o||this.reloadCellsComOfAllRenderer(!0)},t.prototype.reset=function(){this.blockRenderer.opacity=255,this.stopAllActionOfRenderer(a.BlockRenderer)},t.prototype.getRendererByType=function(e){switch(e){case a.BlockRenderer:return this.blockRenderer;case a.HintRenderer:return this.hintRenderer;case a.ShadowRenderer:return this.shadowRenderer;default:return null}},t.prototype.getCellComAtRowCol=function(e,t,o){var r=this.getRendererByType(o);if(!r)return null;var n=r.getChildByName(this.getNodeIndex(e,t).toString());return n?n.getComponent(u.default):null},t.prototype.getFirstValidCellIdFromBotLeft=function(){for(var e=this.botAvailable;e<=this.topAvailable;e++)for(var t=this.leftAvailable;t<=this.rightAvailable;t++)if(this.tableMatrix&&this.tableMatrix.isInBox(e,t)){var o=this.tableMatrix.at(e,t);if(o)return o}return 0},t.prototype.showRenderer=function(e){var t=this.getRendererByType(e);t&&(t.active=!0)},t.prototype.hideRenderer=function(e){var t=this.getRendererByType(e);t&&(t.active=!1)},t.prototype.checkCanChangeMatrixWithAddPos=function(e,t){for(var o=this.botAvailable;o<=this.topAvailable;o++)for(var r=this.leftAvailable;r<=this.rightAvailable;r++)if(this.tableMatrix.at(o,r)){var n=Math.floor(e),i=Math.floor(t);switch(this.config.gameType){case s.eGridGameType.Square:break;case s.eGridGameType.Hexa:i%2!=0&&(r+i)%2==0&&n++;break;case s.eGridGameType.Triangle:if(Math.abs(r%2-o%2)!=Math.abs((r+i)%2-(o+n)%2))return!1}if(!this.tableMatrix.isInBox(o+n,r+i))return!1}return!0},t.prototype.changeMatrixWithAddPos=function(e,t){if(!this.checkCanChangeMatrixWithAddPos(e,t))return!1;for(var o=l.default.createDefaultTableMatrix(this.maxRow,this.maxCol),r=this.botAvailable;r<=this.topAvailable;r++)for(var n=this.leftAvailable;n<=this.rightAvailable;n++){var i=this.tableMatrix.at(r,n);if(i){var a=Math.floor(e),c=Math.floor(t);switch(this.config.gameType){case s.eGridGameType.Square:break;case s.eGridGameType.Hexa:c%2!=0&&(n+c)%2==0&&a++;break;case s.eGridGameType.Triangle:}o.setValueAt(r+a,n+c,i)}}return this.setTableMatrix(o),!0},t.prototype.resetPosOfRenderer=function(e){this.setAddPosForRenderer(e,0,0)},t.prototype.setAddPosForRenderer=function(e,t,o){var r=this.getRendererByType(e);r&&r.setPosition(this.centerPosValidCells.add(cc.v2(o*this.config.cellSize.width,t*this.config.cellSize.height)))},t.prototype.setTouchSize=function(e){this.blockRenderer.setContentSize(e)},t.prototype.setupTouch=function(e,t,o,r,n,i){if(this.blockRenderer){var a=this.blockRenderer.getComponent(p.default);a||(a=this.blockRenderer.addComponent(p.default)),a.checkAvailableTouch=e,a.onTouchStartCB=t,a.onTouchMoveCB=o,a.onTouchEndCB=r,a.onTouchCancelCB=n,a.onGetDeltaValidPosForObject=i}},t.prototype.setEnableTouchBlock=function(e){if(this.blockRenderer){var t=this.blockRenderer.getComponent(p.default);t&&t.setEnableTouch(e)}},t.prototype.cancelIfDragging=function(){if(this.blockRenderer){var e=this.blockRenderer.getComponent(p.default);e&&e.cancelDragging()}},t.prototype.stopAllActionOfRenderer=function(e){var t=this.getRendererByType(e);t&&t.stopAllActions()},t.prototype.runAnmMoveByRenderer=function(e,t,o,r){void 0===o&&(o=.15),void 0===r&&(r=null);var n=this.getRendererByType(e);if(n){n.stopActionByTag(this.TAG_ACTION_RENDERER_MOVE_TO);var i=cc.sequence(cc.moveBy(o,t),cc.callFunc(r));i.setTag(this.TAG_ACTION_RENDERER_MOVE_TO),n.runAction(i)}},t.prototype.runAnmMoveRendererToPos=function(e,t,o,r){void 0===o&&(o=.15),void 0===r&&(r=null);var n=this.getRendererByType(e);if(n){n.stopActionByTag(this.TAG_ACTION_RENDERER_MOVE_TO);var i=cc.sequence(cc.moveTo(o,t),cc.callFunc(r));i.setTag(this.TAG_ACTION_RENDERER_MOVE_TO),n.runAction(i)}},t.prototype.stopAnmMoveRendererToPos=function(e){var t=this.getRendererByType(e);t&&t.stopActionByTag(this.TAG_ACTION_RENDERER_MOVE_TO)},t.prototype.runAnmScaleRendererToValue=function(e,t,o,r){void 0===o&&(o=.15),void 0===r&&(r=null);var n=this.getRendererByType(e);if(n){n.stopActionByTag(this.TAG_ACTION_RENDERER_SCALE_TO);var i=cc.sequence(cc.scaleTo(o,t),cc.callFunc(r));i.setTag(this.TAG_ACTION_RENDERER_SCALE_TO),n.runAction(i)}},t.prototype.stopAnmScaleRendererToValue=function(e){var t=this.getRendererByType(e);t&&t.stopActionByTag(this.TAG_ACTION_RENDERER_SCALE_TO)},t.prototype.blurBlockRenderer=function(e,t){var o=e?this._blurValueTurnOn:this._blurValueTurnOff,r=this.getRendererByType(t);r&&(r.opacity=o)},t.prototype.reloadCellsComOfAllRenderer=function(e){this.blockRenderer&&this.reloadCellsComForOnlyRendererCell(this.blockRenderer),e&&(this.hintRenderer&&this.reloadCellsComForOnlyRendererCell(this.hintRenderer),this.shadowRenderer&&this.reloadCellsComForOnlyRendererCell(this.shadowRenderer))},i([f(cc.Node)],t.prototype,"blockRenderer",void 0),i([f(cc.Node)],t.prototype,"hintRenderer",void 0),i([f(cc.Node)],t.prototype,"shadowRenderer",void 0),i([h],t)}(c.default);o.default=y,cc._RF.pop()},{"./Cell":"Cell","./DragCom":"DragCom","./GridCom":"GridCom","./GridConfig":"GridConfig","./TableMatrix":"TableMatrix"}],BoardCustom:[function(e,t,o){"use strict";cc._RF.push(t,"7bf46uI2LtDiaR8cFQY9Xpc","BoardCustom");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=e("../../../../Plugin/KDPlugin/Core/Helper"),l=e("../../../../Plugin/KDPlugin/MatrixGame/Board"),s=e("../../../../Plugin/KDPlugin/MatrixGame/GridConfig"),p=e("../../../../Script/CoreGameplayEx/BoardGame"),u=e("../../../../Script/CoreGameplayEx/CellGame"),d=e("../../../../Script/CoreGameplayEx/ConstantGameplay"),h=e("../../../../Script/CoreGameplayEx/TableConfig"),f=cc._decorator,y=f.ccclass,v=f.property;(function(e){e[e.Removing=0]="Removing",e[e.Creating=1]="Creating"})(a||(a={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tableConfig=null,t.backgroundContainer=null,t.sprFrameTileBoard=null,t._currentTouchState=a.Creating,t.isCreatingStar=!1,t}return n(t,e),t.prototype.onLoad=function(){this.tableConfig.applyConfig(),this.config=new s.default,this.config.cellSize=d.ConfigGameplay.getCellSize(),this.config.gameType=s.eGridGameType.Square},t.prototype.start=function(){this.tableMatrix||this.setTableMatrix(p.default.createTableMatrixDefaultForBoard(d.default.BOARD_ROW_TOP,d.default.BOARD_ROW_BOT,d.default.BOARD_COL_LEFT,d.default.BOARD_COL_RIGHT)),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBeganBoard,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoveBoard,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEndBoard,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelBoard,this)},t.prototype.setTableMatrix=function(t){e.prototype.setTableMatrix.call(this,t),this.node.setContentSize(cc.size(this.maxCol*this.config.cellSize.width,this.maxRow*this.config.cellSize.height))},t.prototype.setStarList=function(e){var t=this;e.forEach(function(e){var o=t.getCellComAtRowCol(e.y,e.x);o&&o.getComponent(u.default).showMaskStar()})},t.prototype.getStarList=function(){for(var e=[],t=this.botAvailable;t<=this.topAvailable;t++)for(var o=this.leftAvailable;o<=this.rightAvailable;o++){var r=this.getCellComAtRowCol(t,o);r&&r.getComponent(u.default).haveStar&&e.push(cc.v2(o,t))}return e},t.prototype.drawBoard=function(){this.backgroundContainer.destroyAllChildren();for(var e=this.botAvailable;e<=this.topAvailable;e++)for(var t=this.leftAvailable;t<=this.rightAvailable;t++)if(this.tableMatrix.at(e,t)>0){var o=this.sprFrameTileBoard;c.KDCore.SpriteHelper.createSprite(o,cc.size(this.config.cellSize.width-2,this.config.cellSize.height-2),this.backgroundContainer).node.position=cc.v3(this.posFromRowAndCol(e,t))}},t.prototype.onTouchBeganBoard=function(e){this._currentTouchState=this.processTouch(e,null)},t.prototype.onTouchMoveBoard=function(e){this.processTouch(e,this._currentTouchState)},t.prototype.processTouch=function(e,t){var o=this.rowAndColFromPos(this.node.convertToNodeSpaceAR(e.getTouches()[0].getLocation()));if(this.tableMatrix.isInBox(o.y,o.x)&&!(this.tableMatrix.at(o.y,o.x)<this._boardValueCanPlaceCell)){var r=o.y,n=o.x;return null!=t?t==a.Creating&&this.tableMatrix.at(o.y,o.x)<=this._boardValueCanPlaceCell?(this.createOrChangeCellAtRowCol(2,r,n),this.isCreatingStar&&this.getCellComAtRowCol(r,n).showMaskStar()):t==a.Removing&&this.tableMatrix.at(o.y,o.x)>this._boardValueCanPlaceCell&&this.removeCellAtRowCol(r,n,null):this.tableMatrix.at(o.y,o.x)<=this._boardValueCanPlaceCell?(this.createOrChangeCellAtRowCol(2,r,n),this.isCreatingStar&&this.getCellComAtRowCol(r,n).showMaskStar(),t=a.Creating):(this.removeCellAtRowCol(r,n,null),t=a.Removing),t}},t.prototype.onTouchEndBoard=function(){},t.prototype.onTouchCancelBoard=function(){},t.prototype.onUpdateToggleStar=function(e){this.isCreatingStar=e.isChecked},i([v(h.TableConfig)],t.prototype,"tableConfig",void 0),i([v(cc.Node)],t.prototype,"backgroundContainer",void 0),i([v(cc.SpriteFrame)],t.prototype,"sprFrameTileBoard",void 0),i([y],t)}(l.default);o.default=_,cc._RF.pop()},{"../../../../Plugin/KDPlugin/Core/Helper":"Helper","../../../../Plugin/KDPlugin/MatrixGame/Board":"Board","../../../../Plugin/KDPlugin/MatrixGame/GridConfig":"GridConfig","../../../../Script/CoreGameplayEx/BoardGame":"BoardGame","../../../../Script/CoreGameplayEx/CellGame":"CellGame","../../../../Script/CoreGameplayEx/ConstantGameplay":"ConstantGameplay","../../../../Script/CoreGameplayEx/TableConfig":"TableConfig"}],BoardGamePlus:[function(e,t,o){"use strict";cc._RF.push(t,"519b0952VZH7YnWP15m3+3t","BoardGamePlus");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Script/CoreGameplayEx/BoardGame"),c=e("../../Plugin/KDPlugin/Core/Helper"),l=cc._decorator,s=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.runEffectGreyBoardCells=function(){return new Promise(function(e){e()})},t.prototype.drawBoard=function(){e.prototype.drawBoard.call(this);var t=c.KDCore.ScreenHelper.autoFindAndGetScreenScaleRatio(!1);this.boardBgContainer.scale=t,this.boardBgContainer.y=136*t},t.prototype.createRemoveCellAction=function(){return cc.spawn(cc.sequence(cc.scaleTo(.15,1.3),cc.scaleTo(.2,0)),cc.rotateBy(.65,270))},i([s],t)}(a.default));o.default=p,cc._RF.pop()},{"../../Plugin/KDPlugin/Core/Helper":"Helper","../../Script/CoreGameplayEx/BoardGame":"BoardGame"}],BoardGame:[function(e,t,o){"use strict";cc._RF.push(t,"46328bBHk5C7Zq9p9dDsXy8","BoardGame");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=e("./ConstantGameplay"),l=e("./CellGame"),s=e("../../Plugin/KDPlugin/MatrixGame/Board"),p=e("../../Plugin/KDPlugin/MatrixGame/TableMatrix"),u=e("../../Plugin/KDPlugin/Core/Helper"),d=cc._decorator,h=d.ccclass,f=d.property;(function(e){e[e.Removing=0]="Removing",e[e.Creating=1]="Creating"})(a||(a={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprFrameTileBright=null,t.sprFrameTileDark=null,t.boardBgTileContainer=null,t.boardBgContainer=null,t.boardTouch=null,t._currentTouchState=a.Creating,t}return n(t,e),Object.defineProperty(t.prototype,"bgContainer",{get:function(){return this.boardBgTileContainer},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.boardTouch&&(this.boardTouch.on(cc.Node.EventType.TOUCH_START,this.onTouchBeganBoard,this),this.boardTouch.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoveBoard,this),this.boardTouch.on(cc.Node.EventType.TOUCH_END,this.onTouchEndBoard,this),this.boardTouch.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelBoard,this))},t.createTableMatrixDefaultForBoard=function(e,t,o,r){for(var n=p.default.createDefaultTableMatrix(c.default.MAX_ROWS,c.default.MAX_COLS),i=t;i<=e;i++)for(var a=o;a<=r;a++)n.setValueAt(i,a,1);return n},t.prototype.runAnmShowBoardBackground=function(){if(this.boardBgTileContainer){var e=this.boardBgTileContainer.children;if(!(e.length<50))for(var t=0,o=0,r=e;o<r.length;o++){var n=r[o].getComponent(cc.Sprite),i=.03*(t/this.maxCol+(t%this.maxCol-this.leftAvailable));n.node.opacity=0,n.node.runAction(cc.sequence(cc.delayTime(i),cc.fadeIn(.15))),t++}}},t.prototype.runEffectGreyBoardCells=function(e){var t=this;return new Promise(function(o){for(var r=[],n=t.botAvailable;n<=t.topAvailable;n++)for(var i=t.leftAvailable;i<=t.rightAvailable;i++){var a=t.getCellComAtRowCol(n,i);a&&r.push(a)}var c=e/r.length;(r=_.shuffle(r)).forEach(function(e,o){cc.tween(t.node).delay(o*c).call(function(){return e.grayRenderer()}).start()}),t.scheduleOnce(function(){o()},e)})},t.prototype.claimCells=function(e,t,o){if(e.length<=0)t&&t();else for(var r=0,n=0,i=e;n<i.length;n++){var a=i[n],c=Math.abs(o.y-a.y),l=Math.abs(o.x-a.x),s=.015*Math.sqrt(c*c+l*l);this.removeCellAtRowCol(a.y,a.x,r==e.length-1?t:null,!1,s),r++}},t.prototype.showEffCanClaim=function(e,t){for(var o=[],r=0,n=e;r<n.length;r++){var i=n[r],a=this.getCellComAtRowCol(i.y,i.x);a?(a.cellTileType=l.CellTileType.MainHighlight,a.changeRendererOnlyByCellId(t)):o.push(i)}return o},t.prototype.removeEffCanClaim=function(){for(var e=0,t=this.cellsContainer.children;e<t.length;e++){var o=t[e];if(o){var r=o.getComponent(l.default);r&&(r.cellTileType=l.CellTileType.Main)}}},t.prototype.setupCellComAtRowCol=function(t,o,r,n){t&&(t.tileBoardPos=cc.v2(r-this.leftAvailable,o-this.botAvailable)),e.prototype.setupCellComAtRowCol.call(this,t,o,r,n)},t.prototype.reloadVariablesForBoard=function(){},t.prototype.drawBoard=function(){if(this.boardBgTileContainer){this.boardBgTileContainer.destroyAllChildren();for(var e=this.botAvailable;e<=this.topAvailable;e++)for(var t=this.leftAvailable;t<=this.rightAvailable;t++)if(this.tableMatrix.at(e,t)>0){var o=this.sprFrameTileBright,r=Math.floor((e-this.botAvailable)/c.default.SQUARE_CELL_LENGTH),n=Math.floor((t-this.leftAvailable)/c.default.SQUARE_CELL_LENGTH);(n%2==0&&r%2!=0||n%2!=0&&r%2==0)&&(o=this.sprFrameTileDark),u.KDCore.SpriteHelper.createSprite(o,this.config.cellSize,this.boardBgTileContainer).node.position=cc.v3(this.posFromRowAndCol(e,t))}var i=u.KDCore.ScreenHelper.autoFindAndGetScreenScaleRatio(!1);this.boardBgContainer.scale=i,this.boardBgContainer.y=107.7*i}},t.prototype.createRemoveCellAction=function(e){return e.tintBlackSprTile(.4),cc.spawn(cc.rotateBy(.4,110),cc.scaleTo(.4,.2),cc.fadeOut(.38))},t.prototype.onTouchBeganBoard=function(e){return!cc.sys.isNative&&(this._currentTouchState=this.processTouch(e,null),!0)},t.prototype.onTouchMoveBoard=function(e){if(cc.sys.isNative)return!1;this.processTouch(e,this._currentTouchState)},t.prototype.processTouch=function(e,t){var o=this.rowAndColFromPos(this.node.convertToNodeSpaceAR(e.getTouches()[0].getLocation()));if(this.tableMatrix.isInBox(o.y,o.x)&&!(this.tableMatrix.at(o.y,o.x)<this._boardValueCanPlaceCell)){var r=o.y,n=o.x;return null!=t?t==a.Creating&&this.tableMatrix.at(o.y,o.x)<=this._boardValueCanPlaceCell?this.createOrChangeCellAtRowCol(2,r,n):t==a.Removing&&this.tableMatrix.at(o.y,o.x)>this._boardValueCanPlaceCell&&this.removeCellAtRowCol(r,n,null):this.tableMatrix.at(o.y,o.x)<=this._boardValueCanPlaceCell?(this.createOrChangeCellAtRowCol(2,r,n),t=a.Creating):(this.removeCellAtRowCol(r,n,null),t=a.Removing),t}},t.prototype.onTouchEndBoard=function(){},t.prototype.onTouchCancelBoard=function(){},i([f(cc.SpriteFrame)],t.prototype,"sprFrameTileBright",void 0),i([f(cc.SpriteFrame)],t.prototype,"sprFrameTileDark",void 0),i([f(cc.Node)],t.prototype,"boardBgTileContainer",void 0),i([f(cc.Node)],t.prototype,"boardBgContainer",void 0),i([f(cc.Node)],t.prototype,"boardTouch",void 0),i([h],t)}(s.default);o.default=y,cc._RF.pop()},{"../../Plugin/KDPlugin/Core/Helper":"Helper","../../Plugin/KDPlugin/MatrixGame/Board":"Board","../../Plugin/KDPlugin/MatrixGame/TableMatrix":"TableMatrix","./CellGame":"CellGame","./ConstantGameplay":"ConstantGameplay"}],Board:[function(e,t,o){"use strict";cc._RF.push(t,"623c4i6UntABKkacIjnz5uP","Board");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GridCom"),c=e("./Cell"),l=e("./Block"),s=cc._decorator,p=s.ccclass,u=s.property,d=1,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cellsContainer=null,t._boardValueCanPlaceCell=d,t}return n(t,e),Object.defineProperty(t.prototype,"boardValueCanPlaceCell",{get:function(){return this._boardValueCanPlaceCell},set:function(e){this._boardValueCanPlaceCell=e},enumerable:!1,configurable:!0}),t.prototype.drawBoard=function(){},t.prototype.getRealCellIdAtRowCol=function(e,t){return this.tableMatrix.isInBox(e,t)?this.tableMatrix.at(e,t)-this.boardValueCanPlaceCell:0},t.prototype.setTableMatrix=function(t){e.prototype.setTableMatrix.call(this,t),this.drawBoard(),this.reloadCellsComForOnlyRendererCell(this.cellsContainer)},t.prototype.getCellComAtRowCol=function(e,t){var o=this.cellsContainer.getChildByName(this.getNodeIndex(e,t).toString());return o?o.getComponent(c.default):null},t.prototype.createOrChangeCellAtRowCol=function(e,t,o,r){void 0===r&&(r=!1),this.tableMatrix.setValueAt(t,o,e+this.boardValueCanPlaceCell);var n=this.getCellComAtRowCol(t,o);return(n=null==n?this.popCellToCellQueue(this.cellsContainer):n).reset(),this.setupCellComAtRowCol(n,t,o,e),r&&this.reloadVariablesForBoard(),n},t.prototype.removeCellAtRowCol=function(e,t,o,r,n){var i=this;void 0===r&&(r=!1),void 0===n&&(n=0),this.tableMatrix.setValueAt(e,t,this.boardValueCanPlaceCell);var a=this.getCellComAtRowCol(e,t);if(a){var c=a.node;c.setSiblingIndex(c.parent.childrenCount),c.name="(-1)";var l=this.createRemoveCellAction(a,e,t);c.runAction(cc.sequence(cc.delayTime(n),l,cc.callFunc(function(){i.pushCellFromCellQueue(a),o&&o()})))}r&&this.reloadVariablesForBoard()},t.prototype.existCellAt=function(e,t){return null!=this.getCellComAtRowCol(e,t)},t.prototype.totalRowExistCell=function(){for(var e=0,t=this.botAvailable;t<=this.topAvailable;t++)this.isRowExistCell(t)&&e++;return e},t.prototype.totalColExistCell=function(){for(var e=0,t=this.leftAvailable;t<=this.rightAvailable;t++)this.isColExistCell(t)&&e++;return e},t.prototype.isRowExistCell=function(e){for(var t=!1,o=this.leftAvailable;o<=this.rightAvailable;o++)if(this.tableMatrix.at(e,o)>this._boardValueCanPlaceCell){t=!0;break}return t},t.prototype.isColExistCell=function(e){for(var t=!1,o=this.botAvailable;o<=this.topAvailable;o++)if(this.tableMatrix.at(o,e)>this._boardValueCanPlaceCell){t=!0;break}return t},t.prototype.clearCells=function(){for(var e=this.botAvailable;e<=this.topAvailable;e++)for(var t=this.leftAvailable;t<=this.rightAvailable;t++)this.tableMatrix.at(e,t)>=this._boardValueCanPlaceCell&&this.tableMatrix.setValueAt(e,t,this._boardValueCanPlaceCell);this.reloadCellsComForOnlyRendererCell(this.cellsContainer)},t.prototype.copyBlockCellsToBoard=function(e,t){for(var o=e.botAvailable;o<=e.topAvailable;o++)for(var r=e.leftAvailable;r<=e.rightAvailable;r++){var n=e.tableMatrix.at(o,r);if(n>0){this.createOrChangeCellAtRowCol(n,o+t.y,r+t.x);var i=e.getCellComAtRowCol(o,r,l.eBlockRendererType.BlockRenderer).getCurrentTileSprFrame();i&&this.getCellComAtRowCol(o+t.y,r+t.x).changeSpriteCustom(i)}}},t.prototype.createRemoveCellAction=function(){return cc.spawn(cc.sequence(cc.scaleTo(.15,1.3),cc.scaleTo(.2,0)),cc.rotateBy(.65,270))},t.prototype.reloadVariablesForBoard=function(){this.reloadVariablesWhenMatrixChange()},i([u(cc.Node)],t.prototype,"cellsContainer",void 0),i([p],t)}(a.default);o.default=h,cc._RF.pop()},{"./Block":"Block","./Cell":"Cell","./GridCom":"GridCom"}],ButtonGroup:[function(e,t,o){"use strict";cc._RF.push(t,"06dc7/qNQ5F6IkfwzX2f9c/","ButtonGroup");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttons=[],t.highLight=[],t.onChangeTab=[],t.activeIndex=-1,t}return n(t,e),t.prototype.onLoad=function(){var e=this;this.buttons.forEach(function(t,o){var r=new cc.Component.EventHandler;r.component="ButtonGroup",r.target=e.node,r.handler="onButtonClick",r.customEventData=o.toString(),t.clickEvents.push(r)}),this.onButtonClick(null,0)},t.prototype.onButtonClick=function(e,t){if(this.enabled&&(t=Number(t),this.activeIndex!==t&&(this.activeIndex=t,this.buttons[t]))){for(var o in this.highLight)this.highLight[o].opacity=o==t?255:0;this.onChangeTab.forEach(function(e){return e.emit([t])})}},i([l([cc.Button])],t.prototype,"buttons",void 0),i([l([cc.Node])],t.prototype,"highLight",void 0),i([l([cc.Component.EventHandler])],t.prototype,"onChangeTab",void 0),i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],CellGamePlus:[function(e,t,o){"use strict";cc._RF.push(t,"637604UdIFP8JHV5KP0kmOy","CellGamePlus");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Script/CoreGameplayEx/CellGame"),c=e("../../Script/CoreGameplayEx/ConstantGameplay"),l=cc._decorator,s=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.reset=function(){e.prototype.reset.call(this);var t=this.tileClearVertical.getComponentInChildren(sp.Skeleton);t.clearTracks(),t.setAnimation(0,"idle_item_1",!0);var o=this.tileClearHorizontal.getComponentInChildren(sp.Skeleton);o.clearTracks(),o.setAnimation(0,"idle_item_2",!0);var r=this.tileClearSquareAround.getComponentInChildren(sp.Skeleton);r.clearTracks(),r.setAnimation(0,"bomb_idle",!0)},t.prototype.runActionShockWave=function(e,t){var o=cc.Vec3.distance(cc.Vec3.ZERO,e);cc.tween(this.node.children[0]).delay(t).by(.03*o/5,{position:e},{easing:"sineIn"}).delay(.05).to(.03*o/5,{position:cc.Vec3.ZERO},{easing:"sineOut"}).start()},t.prototype.runActionExploreVertical=function(){this.cellId==c.default.CELL_ID_CLEAR_VERTICAL&&this.tileClearVertical.getComponentInChildren(sp.Skeleton).setAnimation(0,"blast_item_1",!1)},t.prototype.runActionExploreHorizontal=function(){this.cellId==c.default.CELL_ID_CLEAR_HORIZONTAL&&this.tileClearHorizontal.getComponentInChildren(sp.Skeleton).setAnimation(0,"blast_item_2",!1)},t.prototype.runActionExploreSquare=function(){this.cellId==c.default.CELL_ID_CLEAR_BOM&&this.tileClearSquareAround.getComponentInChildren(sp.Skeleton).setAnimation(0,"bomb_explode",!1)},i([s],t)}(a.default));o.default=p,cc._RF.pop()},{"../../Script/CoreGameplayEx/CellGame":"CellGame","../../Script/CoreGameplayEx/ConstantGameplay":"ConstantGameplay"}],CellGame:[function(e,t,o){"use strict";cc._RF.push(t,"d1f78ttywNDh6BoZt3JrUMW","CellGame");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CellSupportType=o.CellTileType=void 0;var a,c,l=e("./ConstantGameplay"),s=e("../../Plugin/KDPlugin/MatrixGame/Cell"),p=e("./CellMaskStar"),u=cc._decorator,d=u.ccclass,h=u.property;(function(e){e[e.Main=0]="Main",e[e.MainHighlight=1]="MainHighlight",e[e.Footer=2]="Footer",e[e.FooterHighlight=3]="FooterHighlight"})(a=o.CellTileType||(o.CellTileType={})),function(e){e[e.MutiColor=0]="MutiColor",e[e.Atlas=1]="Atlas"}(c=o.CellSupportType||(o.CellSupportType={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supportType=c.MutiColor,t.maskStar=null,t.tileClearVertical=null,t.tileClearHorizontal=null,t.tileClearSquareAround=null,t.sprFrameCellsAtlas=null,t.sprFramesNormal=[],t.sprFramesHighlight=[],t.sprFramesBlockFooterNormal=[],t.sprFramesBlockFooterHighlight=[],t.sprCover=null,t.materialsNormal=[],t.materialsHighlight=[],t.materialsFooterNormal=[],t.materialsFooterHighlight=[],t._tileBoardPos=cc.Vec2.ZERO,t._cellSize=cc.Size.ZERO,t._cellTileType=a.Main,t}return n(t,e),Object.defineProperty(t.prototype,"tileBoardPos",{get:function(){return this._tileBoardPos},set:function(e){this._tileBoardPos=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cellTileType",{get:function(){return this._cellTileType},set:function(e){this._cellTileType=e,this.reloadRendererWithCurrentCellId()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"haveStar",{get:function(){return this.maskStar.node.active},enumerable:!1,configurable:!0}),t.prototype.getSpriteFrameByCellId=function(e){switch(this._cellSize.equals(cc.Size.ZERO)&&(this._cellSize=l.ConfigGameplay.getCellSize()),this.supportType){case c.Atlas:var t=l.default.BOARD_ROW_TOP-l.default.BOARD_ROW_BOT+1;return new cc.SpriteFrame(this.sprFrameCellsAtlas.getTexture(),new cc.Rect(4+this._cellSize.width*this.tileBoardPos.x,4+this._cellSize.height*(t-this.tileBoardPos.y-1),this._cellSize.width,this._cellSize.height));case c.MutiColor:switch(this._cellTileType){case a.Main:return this.sprFramesNormal[Math.min(e-1,this.sprFramesNormal.length-1)];case a.MainHighlight:return this.sprFramesHighlight[Math.min(e-1,this.sprFramesHighlight.length-1)];case a.Footer:return this.sprFramesBlockFooterNormal[Math.min(e-1,this.sprFramesBlockFooterNormal.length-1)];case a.FooterHighlight:return this.sprFramesBlockFooterHighlight[Math.min(e-1,this.sprFramesBlockFooterHighlight.length-1)];default:return null}default:return null}return null},t.prototype.getMaterialByCellId=function(e){this._cellSize.equals(cc.Size.ZERO)&&(this._cellSize=l.ConfigGameplay.getCellSize());var t=null;switch(this.supportType){case c.MutiColor:switch(this._cellTileType){case a.Main:t=this.materialsFooterNormal[Math.min(e-1,this.materialsFooterNormal.length-1)];break;case a.MainHighlight:t=this.materialsHighlight[Math.min(e-1,this.materialsHighlight.length-1)];break;case a.Footer:t=this.materialsFooterNormal[Math.min(e-1,this.materialsFooterNormal.length-1)];break;case a.FooterHighlight:t=this.materialsFooterHighlight[Math.min(e-1,this.materialsFooterHighlight.length-1)];break;default:return null}break;case c.Atlas:default:return null}return t},t.prototype.reset=function(){e.prototype.reset.call(this),this.sprTile&&(this.sprTile.node.color=cc.Color.WHITE),this.hideMaskStar()},t.prototype.showMaskStar=function(){this.maskStar.node.active=!0},t.prototype.hideMaskStar=function(){this.maskStar.node.active=!1},t.prototype.tintBlackSprTile=function(e){this.sprTile&&cc.tween(this.sprTile.node).to(e,{color:cc.Color.BLACK}).start()},t.prototype.changeSpriteCustom=function(t){e.prototype.changeSpriteCustom.call(this,t),this.sprCover&&(this.sprCover.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.sprCover.node.setContentSize(this.sprTile.node.getContentSize()))},t.prototype.changeRendererOnlyByCellId=function(t){var o=this,r=function(){o.hideAllPosibleRenderer(),o.modelTile&&o.node.is3DNode&&(o.modelTile.node.active=!0),o.sprTile&&!o.node.is3DNode&&(o.sprTile.node.active=!0),e.prototype.changeRendererOnlyByCellId.call(o,t)};if(this._cellTileType!=a.MainHighlight)switch(t){case l.default.CELL_ID_CLEAR_BOM:this.hideAllPosibleRenderer(),this.tileClearSquareAround.active=!0;break;case l.default.CELL_ID_CLEAR_HORIZONTAL:this.hideAllPosibleRenderer(),this.tileClearHorizontal.active=!0;break;case l.default.CELL_ID_CLEAR_VERTICAL:this.hideAllPosibleRenderer(),this.tileClearVertical.active=!0;break;default:r()}else r()},t.prototype.hideAllPosibleRenderer=function(){this.modelTile&&(this.modelTile.node.active=!1),this.sprTile&&(this.sprTile.node.active=!1),this.tileClearVertical&&(this.tileClearVertical.active=!1),this.tileClearHorizontal&&(this.tileClearHorizontal.active=!1),this.tileClearSquareAround&&(this.tileClearSquareAround.active=!1)},i([h({type:cc.Enum(c)})],t.prototype,"supportType",void 0),i([h(p.default)],t.prototype,"maskStar",void 0),i([h(cc.Node)],t.prototype,"tileClearVertical",void 0),i([h(cc.Node)],t.prototype,"tileClearHorizontal",void 0),i([h(cc.Node)],t.prototype,"tileClearSquareAround",void 0),i([h({type:cc.SpriteFrame,tooltip:"In case use an atlas to express the board, cell have many peice to express that board",visible:function(){return this.supportType==c.Atlas&&!this.node.is3DNode}})],t.prototype,"sprFrameCellsAtlas",void 0),i([h({type:[cc.SpriteFrame],visible:function(){return this.supportType==c.MutiColor&&!this.node.is3DNode}})],t.prototype,"sprFramesNormal",void 0),i([h({type:[cc.SpriteFrame],visible:function(){return this.supportType==c.MutiColor&&!this.node.is3DNode}})],t.prototype,"sprFramesHighlight",void 0),i([h({type:[cc.SpriteFrame],visible:function(){return this.supportType==c.MutiColor&&!this.node.is3DNode}})],t.prototype,"sprFramesBlockFooterNormal",void 0),i([h({type:[cc.SpriteFrame],visible:function(){return this.supportType==c.MutiColor&&!this.node.is3DNode}})],t.prototype,"sprFramesBlockFooterHighlight",void 0),i([h({type:cc.Sprite,visible:function(){return!this.node.is3DNode}})],t.prototype,"sprCover",void 0),i([h({type:[cc.Material],visible:function(){return this.supportType==c.MutiColor&&this.node.is3DNode}})],t.prototype,"materialsNormal",void 0),i([h({type:[cc.Material],visible:function(){return this.supportType==c.MutiColor&&this.node.is3DNode}})],t.prototype,"materialsHighlight",void 0),i([h({type:[cc.Material],visible:function(){return this.supportType==c.MutiColor&&this.node.is3DNode}})],t.prototype,"materialsFooterNormal",void 0),i([h({type:[cc.Material],visible:function(){return this.supportType==c.MutiColor&&this.node.is3DNode}})],t.prototype,"materialsFooterHighlight",void 0),i([d],t)}(s.default);o.default=f,cc._RF.pop()},{"../../Plugin/KDPlugin/MatrixGame/Cell":"Cell","./CellMaskStar":"CellMaskStar","./ConstantGameplay":"ConstantGameplay"}],CellMaskStar:[function(e,t,o){"use strict";cc._RF.push(t,"a45b15DE4VCG7wEViLitIU5","CellMaskStar");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),i([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],Cell:[function(e,t,o){"use strict";cc._RF.push(t,"477a0f9OSpCJoHGk/GMWaR4","Cell");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprTile=null,t.modelTile=null,t._cellId=0,t._isRendererTileNotCurrentCellId=!1,t}return n(t,e),Object.defineProperty(t.prototype,"cellId",{get:function(){return this._cellId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSprTileNotCurrentCellId",{get:function(){return this._isRendererTileNotCurrentCellId},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.node.stopAllActions(),this.node.scale=1,this.node.opacity=255,this.node.angle=0,this.unGrayRenderer(),this.sprTile&&(this.sprTile.node.active=!this.node.is3DNode),this.modelTile&&(this.modelTile.node.active=this.node.is3DNode)},t.prototype.changeSpriteCustom=function(e){var t=this.getSpriteFrameByCellId(this._cellId);this._isRendererTileNotCurrentCellId=!!t&&t==e,this.sprTile.spriteFrame!=e&&(this.sprTile.spriteFrame=e)},t.prototype.changeModel3DCustom=function(e){var t=this,o=this.getMaterialByCellId(this._cellId);this._isRendererTileNotCurrentCellId=!!o&&o.name==e.name,(this.modelTile.getMaterials().length<=0||!this.modelTile.getMaterial(0)||this.modelTile.getMaterial(0).name!=e.name)&&(this.modelTile._isOnLoadCalled?this.modelTile.setMaterial(0,e):this.scheduleOnce(function(){t.modelTile.node.active&&t.modelTile.setMaterial(0,e)},.01))},t.prototype.changeRendererOnlyByCellId=function(e){if(this.node.is3DNode){var t=this.getMaterialByCellId(e);this.changeModel3DCustom(t)}else this.changeSpriteCustom(this.getSpriteFrameByCellId(e))},t.prototype.changeRendererAndCellIdByCellId=function(e){this._cellId=e,this.changeRendererOnlyByCellId(e)},t.prototype.reloadRendererWithCurrentCellId=function(){this.changeRendererAndCellIdByCellId(this.cellId)},t.prototype.getCurrentTileSprFrame=function(){return this.sprTile?this.sprTile.spriteFrame:null},t.prototype.grayRenderer=function(){if(this.sprTile&&this.sprTile.node.active){var e=cc.Material.getBuiltinMaterial("2d-gray-sprite");this.sprTile.setMaterial(0,e)}},t.prototype.unGrayRenderer=function(){if(this.sprTile&&this.sprTile.node.active){var e=cc.Material.getBuiltinMaterial("2d-sprite");this.sprTile.setMaterial(0,e)}},t.prototype.getSpriteFrameByCellId=function(){return null},t.prototype.getMaterialByCellId=function(){return null},i([l({type:cc.Sprite,visible:function(){return!this.node.is3DNode}})],t.prototype,"sprTile",void 0),i([l({type:cc.MeshRenderer,visible:function(){return this.node.is3DNode}})],t.prototype,"modelTile",void 0),i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],Chart:[function(e,t,o){"use strict";cc._RF.push(t,"238c3uOhLVGyJIVohbJiveA","Chart");var r,n,i,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ChartDataLength=o.ChartType=void 0;var l,s=cc._decorator,p=s.ccclass,u=s.property;(function(e){e[e.Week=0]="Week",e[e.Month=1]="Month",e[e.Year=2]="Year"})(l=o.ChartType||(o.ChartType={})),o.ChartDataLength=((n={})[l.Week]=7,n[l.Month]=30,n[l.Year]=12,n);var d=((i={})[l.Week]={space:120,spaceBig:120,length:7,barWidth:25,labelFunc:"labelWeekChart"},i[l.Month]={space:24,spaceBig:24,length:30,barWidth:12,labelFunc:"labelMonthChart"},i[l.Year]={space:55,spaceBig:55,length:12,barWidth:25,labelFunc:"labelYearChart"},i),h=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.barPrefab=null,t.bigSize=!0,t}return a(t,e),t.prototype.onLoad=function(){for(var e=0;e<30;e++){var t=this.getBar(e);t.parent=this.node,t.opacity=0}},t.prototype.setup=function(e,t){var o=this;this.currentChart=e,this.inActiveBars();var r=_.maxBy(t,"quantity"),n=d[e],i=this.bigSize?n.spaceBig:n.space;t.forEach(function(e,a){var c=o.getDateFromString(e.date),l=o.getBar(a);l.opacity=255,l.width=n.barWidth,l.setPosition(cc.v2(i*(a-(n.length-1)/2))),l.parent=o.node;var s=l.getComponent(cc.ProgressBar);cc.director.getActionManager().removeActionByTag(-1,s),s.progress=0,s.totalLength=o.bigSize?400:150,e.quantity>0?cc.tween(s).to(.25,{progress:e.quantity/r.quantity}).start():l.height=5;var p=l.getComponentInChildren(cc.Label);p.node.setAnchorPoint(cc.v2(.5,.5)),p.string=o[n.labelFunc](p,c,a,t.length)})},t.prototype.getDateFromString=function(e){var t=e.split("-"),o=t[0],r=t[1],n=t[2];return new Date(Number(n),Number(r),Number(o))},t.prototype.labelWeekChart=function(e,t,o,r){return o>0&&o<r-1?t.getDate().toString():h[t.getMonth()]+" "+t.getDate()},t.prototype.labelMonthChart=function(e,t,o){return 0===o||(o+1)%10==0?(0===o&&e.node.setAnchorPoint(cc.v2(0,.5)),(o+1)/10==3&&e.node.setAnchorPoint(cc.v2(1,.5)),h[t.getMonth()]+" "+t.getDate()):""},t.prototype.labelYearChart=function(e,t,o){return 0===o||(o+1)%3==0?t.getFullYear()+" "+h[t.getMonth()]:""},t.prototype.changeSize=function(e,t){var o=d[this.currentChart],r=t?o.spaceBig:o.space;this.bigSize=t,this.node.children.forEach(function(n,i){var a=n.getComponent(cc.ProgressBar);a.progress>0&&cc.tween(a).to(e,{totalLength:t?450:150}).start(),cc.tween(n).to(e,{position:cc.v3(r*(i-(o.length-1)/2))}).start()})},t.prototype.inActiveBars=function(){this.node.children.forEach(function(e){return e.opacity=0})},t.prototype.getBar=function(e){return e<this.node.childrenCount?this.node.children[e]:cc.instantiate(this.barPrefab)},c([u(cc.Prefab)],t.prototype,"barPrefab",void 0),c([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{}],ChooseAward:[function(e,t,o){"use strict";cc._RF.push(t,"8818aKAOARI2YXBG1y4++28","ChooseAward");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Base/models/popupsview.model"),c=e("../PersistRootNodes/CupFrames"),l=e("../Award/AwardData"),s=e("../Award/award.model"),p=e("../Manager4Native/AnalyticManager"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.newRewardNode=null,t.cupName=null,t.cupInfo=null,t.sprCup=null,t.animationShow=null,t}return n(t,e),t.prototype.onShow=function(){var e=a.PopupView.chooseAward.value;this.sprCup.spriteFrame=c.default.CupFramesInstance.getSprFrameByCupId(e.id),this.newRewardNode.active=!e.unlocked,this.cupName.string=l.AwardDatas[e.id].name,this.cupInfo.string=l.AwardDatas[e.id].unlockDescription,this.animationShow.play(this.animationShow.defaultClip.name)},t.prototype.onChooseClicked=function(){p.default.logEventUX("PopupChooseAward","Choose_"+a.PopupView.chooseAward.value.id),s.AwardModelInstance.chooseAward(a.PopupView.chooseAward.value.id)},i([h(cc.Node)],t.prototype,"newRewardNode",void 0),i([h(cc.Label)],t.prototype,"cupName",void 0),i([h(cc.Label)],t.prototype,"cupInfo",void 0),i([h(cc.Sprite)],t.prototype,"sprCup",void 0),i([h(cc.Animation)],t.prototype,"animationShow",void 0),i([d],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../Award/AwardData":"AwardData","../Award/award.model":"award.model","../Manager4Native/AnalyticManager":"AnalyticManager","../PersistRootNodes/CupFrames":"CupFrames","./Base/models/popupsview.model":"popupsview.model"}],"Class.decorator":[function(e,t){"use strict";cc._RF.push(t,"02166ia/NNFBob1I1PfWwIE","Class.decorator"),cc._RF.pop()},{}],ConstantGameplay:[function(e,t,o){"use strict";cc._RF.push(t,"79422aC3QRN+6AWoReFlaSy","ConstantGameplay"),Object.defineProperty(o,"__esModule",{value:!0}),o.ConfigGameplay=o.BlockDefaulType=void 0;var r=e("../../Plugin/KDPlugin/Core/Helper"),n=cc._decorator;n.ccclass,n.property,function(e){e[e.None_BlockType=0]="None_BlockType",e[e.Custom_BlockType=1]="Custom_BlockType",e[e.One_BlockType=2]="One_BlockType",e[e.Two_BlockType=3]="Two_BlockType",e[e.Three_BlockType=4]="Three_BlockType",e[e.Four_BlockType=5]="Four_BlockType",e[e.Five_BlockType=6]="Five_BlockType",e[e.L_BlockType=7]="L_BlockType",e[e.L_Big_Right_BlockType=8]="L_Big_Right_BlockType",e[e.L_Big_Left_BlockType=9]="L_Big_Left_BlockType",e[e.L_SupperBig_BlockType=10]="L_SupperBig_BlockType",e[e.O_BlockType=11]="O_BlockType",e[e.O_Big_BlockType=12]="O_Big_BlockType",e[e.Z_Right_BlockType=13]="Z_Right_BlockType",e[e.Z_Left_BlockType=14]="Z_Left_BlockType",e[e.Plus_BlockType=15]="Plus_BlockType",e[e.C_BlockType=16]="C_BlockType",e[e.T_BlockType=17]="T_BlockType",e[e.T_Big_BlockType=18]="T_Big_BlockType",e[e.Slash_Two_BlockType=19]="Slash_Two_BlockType",e[e.Slash_Three_BlockType=20]="Slash_Three_BlockType",e[e.Slash_Four_BlockType=21]="Slash_Four_BlockType",e[e.Rectangle_BlockType=22]="Rectangle_BlockType",e[e.Rectangle_L_BlockType=23]="Rectangle_L_BlockType",e[e.C_L_BlockType=24]="C_L_BlockType",e[e.O_And_One_BlockType=25]="O_And_One_BlockType",e[e.Triangle_BlockType=26]="Triangle_BlockType",e[e.Slash_Two_LeftRight_BlockType=27]="Slash_Two_LeftRight_BlockType",e[e.Gun_BlockType=28]="Gun_BlockType",e[e.M_Inclined_BlockType=29]="M_Inclined_BlockType",e[e.WithOne_Two_BlockType=30]="WithOne_Two_BlockType",e[e.WithOneRight_L_BlockType=31]="WithOneRight_L_BlockType",e[e.WithOne_LBigRight_BlockType=32]="WithOne_LBigRight_BlockType",e[e.WithOneLeft_L_BlockType=33]="WithOneLeft_L_BlockType",e[e.WithOne_Plus_BlockType=34]="WithOne_Plus_BlockType",e[e.LBigRight_And_SlashTwo_BlockType=35]="LBigRight_And_SlashTwo_BlockType",e[e.WithOne_C_BlockType=36]="WithOne_C_BlockType",e[e.End_BlockType=37]="End_BlockType"}(o.BlockDefaulType||(o.BlockDefaulType={}));var i={MAX_ROWS:16,MAX_COLS:10,BOARD_ROW_BOT:5,BOARD_ROW_TOP:14,BOARD_COL_LEFT:0,BOARD_COL_RIGHT:9,DETAL_DISTANCE_TO_ACCEPT_MOVE:0,SQUARE_CELL_LENGTH:3,MIN_Y_MOVE_BLOCK:-450,BIT_USING_SAVE_TABLE_MATRIX:8,TOTAL_BIT_PER_NUM:function(){return cc.sys.isNative?64:32},SCORE_CLAIM_PER_LINE:18,SCORE_PER_STRIKE:9,SQUARE_SCORE_PER_SQUARE:10,SQUARES_SCORE_DECREASE_IF_NOT_CLAIM:1,SQUARE_SCORE_NEEDED_PER_MULTIFLY:30,TOUCH_SIZE:cc.size(400,500),CELL_ID_CLEAR_VERTICAL:100,CELL_ID_CLEAR_HORIZONTAL:101,CELL_ID_CLEAR_BOM:102,CELL_ID_ADDED_MASK:100};o.ConfigGameplay={_CELL_SIZE:cc.size(76,76),SCALE_BLOCK_IN_BOT:.5,SCALE_BLOCK_NORMAL:1,SCALE_CELL_SPRITE_OF_BLOCK_WHEN_TOUCH:.9,SCALE_CELL_SPRITE_OF_BLOCK_AT_BOT:1,TOTAL_CELL_COLOR:8,DISTANCE_Y_TOUCH_BLOCK:150,reset:function(){o.ConfigGameplay._CELL_SIZE=cc.size(76,76),o.ConfigGameplay.SCALE_BLOCK_IN_BOT=.5,o.ConfigGameplay.SCALE_BLOCK_NORMAL=1,o.ConfigGameplay.SCALE_CELL_SPRITE_OF_BLOCK_WHEN_TOUCH=.9,o.ConfigGameplay.SCALE_CELL_SPRITE_OF_BLOCK_AT_BOT=1,o.ConfigGameplay.TOTAL_CELL_COLOR=1,o.ConfigGameplay.DISTANCE_Y_TOUCH_BLOCK=150},getCellSize:function(){var e=r.KDCore.ScreenHelper.autoFindAndGetScreenScaleRatio(!1);return cc.size(o.ConfigGameplay._CELL_SIZE.width*e,o.ConfigGameplay._CELL_SIZE.height*e)}},o.default=i,cc._RF.pop()},{"../../Plugin/KDPlugin/Core/Helper":"Helper"}],ConstantGame:[function(e,t,o){"use strict";cc._RF.push(t,"d89fdY8ZjZLT4+K5ASK+BYj","ConstantGame"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={TOTAL_STAR_TO_GET_GIFT:12,RATIO_APEAR_STAR_PER_CELL:200,EVENT:{COLLECT_STAR:"collect_star"}},cc._RF.pop()},{}],ConstantNative:[function(e,t,o){"use strict";cc._RF.push(t,"38bf8vDwnlFvJhbFXf8zZOO","ConstantNative"),Object.defineProperty(o,"__esModule",{value:!0}),o.IAPItems=o.IOS_SHARED_SECRECT=o.IAPProductIds=o.SHARE_URL=o.SHARE_BODY=o.SHARE_TITLE=o.SHOW_INTERSTITIAL_AD_MILLISECOND_DELAY=o.SHOW_ADS_AFTER_TOTAL_GAME_PLAYED_COUNT=o.AdInit=o.AD_VIDEO_REWARD=o.AD_INTERSTITIAL=o.AD_BANNER=o.LEADERBOARD_ID=o.GOOGLE_APP_ID=o.APPLE_APP_ID=o.PROJECT_NAME=void 0;var r=e("../Plugin/Native/AdmobHelper"),n=e("../Plugin/Native/IAP/IIAPItem");o.PROJECT_NAME="Square 99 Extreme",o.APPLE_APP_ID="1558966741",o.GOOGLE_APP_ID="game.sudoku.wood.woody.puzzle.block.cube.fill.squares.free.fun.offline",o.LEADERBOARD_ID={android:"CgkI78Kqns8OEAIQAA",ios:"game.block.square.wood.merge.autochess.woody.tile.match.extreme.topscore"},o.AD_BANNER="banner",o.AD_INTERSTITIAL="inter",o.AD_VIDEO_REWARD="video",o.AdInit={autoLoadBanner:!1,ads:[{name:o.AD_BANNER,type:r.AdType.Banner,android:"ca-app-pub-3449191702441635/3360518757",ios:"ca-app-pub-3449191702441635/9022900125"},{name:o.AD_INTERSTITIAL,type:r.AdType.Interstitial,android:"ca-app-pub-3449191702441635/8421273746",ios:"ca-app-pub-3449191702441635/2457491776"}]},o.SHOW_ADS_AFTER_TOTAL_GAME_PLAYED_COUNT=3,o.SHOW_INTERSTITIAL_AD_MILLISECOND_DELAY=6e4,o.SHARE_TITLE="Square 99 - Nines! Wood Extreme",o.SHARE_BODY="Let's play Square 99 - Nines! Wood Extreme",o.SHARE_URL="https://ninewoodextreme.page.link/share",o.IAPProductIds={RemoveAds:"game.sudoku.wood.woody.puzzle.block.cube.fill.squares.free.fun.offline.removeads",Coin1:"game.sudoku.wood.woody.puzzle.block.cube.fill.squares.free.fun.offline.coin1",Premium1:"game.sudoku.wood.woody.puzzle.block.cube.fill.squares.free.fun.offline.premium1",Premium2:"game.sudoku.wood.woody.puzzle.block.cube.fill.squares.free.fun.offline.premium2"},o.IOS_SHARED_SECRECT="db03b23f9a90430a94493571ce590c59",o.IAPItems=[{type:n.IAPPackageType.NonCons,packageId:o.IAPProductIds.RemoveAds,benefit:null},{type:n.IAPPackageType.Cons,packageId:o.IAPProductIds.Coin1,benefit:null},{type:n.IAPPackageType.Subs,packageId:o.IAPProductIds.Premium1,benefit:null},{type:n.IAPPackageType.Subs,packageId:o.IAPProductIds.Premium2,benefit:null}],cc._RF.pop()},{"../Plugin/Native/AdmobHelper":"AdmobHelper","../Plugin/Native/IAP/IIAPItem":"IIAPItem"}],CupFrames:[function(e,t,o){"use strict";cc._RF.push(t,"0fd1fx3uj9BTbz2JCYl+dYa","CupFrames");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cupFrames=[],t.decorFrames=[],t.additionYToBottom=[],t}var o;return n(t,e),o=t,t.prototype.onLoad=function(){o.CupFramesInstance=this,cc.game.addPersistRootNode(this.node)},t.prototype.getSprFrameByCupId=function(e){if(!e)return this.cupFrames[0];var t=this.cupFrames.length-1>=e?e:this.cupFrames.length-1;return this.cupFrames[t]},t.prototype.getDecorFrameByCupId=function(e){return e<0||e>=this.decorFrames.length?null:this.decorFrames[e]},t.prototype.getAdditionYToBottomByCupId=function(e){return e<0||e>=this.additionYToBottom.length?0:this.additionYToBottom[e]||0},t.CupFramesInstance=null,i([l([cc.SpriteFrame])],t.prototype,"cupFrames",void 0),i([l([cc.SpriteFrame])],t.prototype,"decorFrames",void 0),i([l([cc.Float])],t.prototype,"additionYToBottom",void 0),o=i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],CustomAssembler:[function(e,t,o){"use strict";cc._RF.push(t,"35e94T3EtNCZYZVgz0lEMQQ","CustomAssembler");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.verticesCount=4,t.indicesCount=6,t.floatsPerVert=5,t.uvOffset=2,t.colorOffset=4,t._renderData=null,t._local=null,t}return n(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t),this._renderData=new cc.RenderData,this._renderData.init(this),this.initLocal(),this.initData()},Object.defineProperty(t.prototype,"verticesFloats",{get:function(){return this.verticesCount*this.floatsPerVert},enumerable:!1,configurable:!0}),t.prototype.initData=function(){this._renderData.createQuadData(0,this.verticesFloats,this.indicesCount)},t.prototype.initLocal=function(){this._local=[],this._local.length=4},t.prototype.updateColor=function(e,t){var o=this._renderData.uintVDatas[0];if(o){t=null!=t?t:e.node.color._val;for(var r=this.floatsPerVert,n=this.colorOffset,i=o.length;n<i;n+=r)o[n]=t}},t.prototype.getBuffer=function(){return cc.renderer._handle._meshBuffer},t.prototype.updateWorldVerts=function(e){this.updateWorldVertsWebGL(e)},t.prototype.updateWorldVertsWebGL=function(e){var t=this._local,o=this._renderData.vDatas[0],r=e.node._worldMatrix.m,n=r[0],i=r[1],a=r[4],c=r[5],l=r[12],s=r[13],p=t[0],u=t[2],d=t[1],h=t[3],f=1===n&&0===i&&0===a&&1===c,y=0,v=this.floatsPerVert;if(f)o[y]=p+l,o[y+1]=d+s,o[y+=v]=u+l,o[y+1]=d+s,o[y+=v]=p+l,o[y+1]=h+s,o[y+=v]=u+l,o[y+1]=h+s;else{var _=n*p,g=n*u,b=i*p,m=i*u,C=a*d,S=a*h,P=c*d,T=c*h;o[y]=_+C+l,o[y+1]=b+P+s,o[y+=v]=g+C+l,o[y+1]=m+P+s,o[y+=v]=_+S+l,o[y+1]=b+T+s,o[y+=v]=g+S+l,o[y+1]=m+T+s}},t.prototype.updateWorldVertsNative=function(){var e=this._local,t=this._renderData.vDatas[0],o=this.floatsPerVert,r=e[0],n=e[2],i=e[1],a=e[3],c=0;t[c]=r,t[c+1]=i,t[c+=o]=n,t[c+1]=i,t[c+=o]=r,t[c+1]=a,t[c+=o]=n,t[c+1]=a},t.prototype.fillBuffers=function(e,t){t.worldMatDirty&&this.updateWorldVerts(e);var o=this._renderData,r=o.vDatas[0],n=o.iDatas[0],i=this.getBuffer(),a=i.request(this.verticesCount,this.indicesCount),c=a.byteOffset>>2,l=i._vData;r.length+c>l.length?l.set(r.subarray(0,l.length-c),c):l.set(r,c);for(var s=i._iData,p=a.indiceOffset,u=a.vertexOffset,d=0,h=n.length;d<h;d++)s[p++]=u+n[d]},t.prototype.packToDynamicAtlas=function(e,t){if(!t._original&&cc.dynamicAtlasManager&&t._texture.packable){var o=cc.dynamicAtlasManager.insertSpriteFrame(t);o&&t._setDynamicAtlasFrame(o)}var r=e._materials[0];r&&r.getProperty("texture")!==t._texture&&(e._vertsDirty=!0,e._updateMaterial())},t.prototype.updateUVs=function(){for(var e=[0,0,1,0,0,1,1,1],t=this.uvOffset,o=this.floatsPerVert,r=this._renderData.vDatas[0],n=0;n<4;n++){var i=2*n,a=o*n+t;r[a]=e[i],r[a+1]=e[i+1]}},t.prototype.updateVerts=function(e){var t,o,r,n,i=e.node,a=i.width,c=i.height,l=i.anchorX*a,s=i.anchorY*c;t=-l,o=-s,r=a-l,n=c-s;var p=this._local;p[0]=t,p[1]=o,p[2]=r,p[3]=n,this.updateWorldVerts(e)},t.prototype.updateRenderData=function(e){e._vertsDirty&&(this.updateUVs(e),this.updateVerts(e),e._vertsDirty=!1)},t}(cc.Assembler);o.default=i,cc._RF.pop()},{}],CustomRenderComponent:[function(e,t,o){"use strict";cc._RF.push(t,"41413LIppJAgbOA6afZB1Wz","CustomRenderComponent");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=(a.property,e("./CustomAssembler")),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),this._activateMaterial()},t.prototype._resetAssembler=function(){this.setVertsDirty(!0),this._assembler=new l.default,this._assembler.init(this)},t.prototype._activateMaterial=function(){var e=this.getMaterial(0);e?(e=cc.MaterialVariant.create(e,this),this.setMaterial(0,e),this.markForRender(!0)):this.disableRender()},i([c],t)}(cc.RenderComponent);o.default=s,cc._RF.pop()},{"./CustomAssembler":"CustomAssembler"}],DragCom:[function(e,t,o){"use strict";cc._RF.push(t,"aa3de5dgFZAFYUx02X282de","DragCom");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=cc._decorator,l=c.ccclass,s=c.property;(function(e){e[e.Drag_Vertical=0]="Drag_Vertical",e[e.Drag_Horizontal=1]="Drag_Horizontal",e[e.Drag_Boths=2]="Drag_Boths"})(a||(a={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isDragging=!1,t.currentTouch=null,t._direction=a.Drag_Boths,t.checkAvailableTouch=void 0,t.onTouchStartCB=void 0,t.onTouchMoveCB=void 0,t.onTouchEndCB=void 0,t.onTouchCancelCB=void 0,t.onGetDeltaValidPosForObject=void 0,t.defaultContentSize=cc.Size.ZERO,t}var o;return n(t,e),o=t,Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.defaultContentSize=cc.size(this.node.getContentSize()),this.registerListeners()},t.prototype.stopDrag=function(){this._isDragging=!1,this.ontouchcancel(void 0)},t.prototype.registerListeners=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.ontouchstart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.ontouchmove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.ontouchend,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.ontouchend,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.setEnableTouch=function(e){this.defaultContentSize=cc.size(this.node.getContentSize()),this.enabled=e},t.prototype.cancelDragging=function(){this.ontouchcancel(void 0)},t.prototype.convertTouchPosToLocal=function(e){return void 0!==this.node.parent?this.node.parent.convertToNodeSpaceAR(e):this.node.convertToNodeSpaceAR(e)},t.prototype.ontouchstart=function(e){if(!this.enabled)return!1;if(this._isDragging)return!1;this._isDragging=!1,this.currentTouch=null;var t=cc.v2(this.convertTouchPosToLocal(e.touch.getStartLocation()));return(void 0===this.checkAvailableTouch||this.checkAvailableTouch(this.node,t))&&(void 0!==this.onTouchCancelCB&&this.onTouchStartCB(this.node,t),this.currentTouch=e.touch,this._isDragging=!0),this._isDragging},t.prototype.ontouchmove=function(e){if(this.enabled&&this._isDragging&&e.touch==this.currentTouch){var t=e.touch.getDelta();switch(this.direction){case a.Drag_Vertical:t.x=0;break;case a.Drag_Horizontal:t.y=0;break;case a.Drag_Boths:}var o=cc.v2(this.node.position.add(cc.v3(t)));if(this.onGetDeltaValidPosForObject){var r=this.onGetDeltaValidPosForObject(this.node,o);o.addSelf(r)}if(this.node.position=cc.v3(o),void 0!==this.onTouchMoveCB){var n=this.convertTouchPosToLocal(e.touch.getLocation());this.onTouchMoveCB(this.node,o,n)}}},t.prototype.ontouchend=function(e){this.enabled&&this._isDragging&&e.touch==this.currentTouch&&(this.node.stopActionByTag(o.TAG_ACTION_MOVE),this._isDragging=!1,this.currentTouch=null,this.convertTouchPosToLocal(e.touch.getLocation()),this.node.position=this.node.position.add(cc.v3(e.getDelta())),void 0!==this.onTouchEndCB&&this.onTouchEndCB(this.node,cc.v2(this.node.position)))},t.prototype.ontouchcancel=function(e){this.enabled&&this._isDragging&&(this.node.stopActionByTag(o.TAG_ACTION_MOVE),this._isDragging=!1,this.currentTouch=null,void 0!==this.onTouchCancelCB)&&(cc.Vec2.ZERO,void 0!==e&&this.convertTouchPosToLocal(e.touch.getLocation()),this.onTouchCancelCB(this.node,cc.v2(this.node.position)))},t.TAG_ACTION_MOVE=11111,i([s(cc.Size)],t.prototype,"defaultContentSize",void 0),o=i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],EffectNewHighestScore:[function(e,t,o){"use strict";cc._RF.push(t,"b80c00rr6ZHvo9F1RIYnJG0","EffectNewHighestScore");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT_EFFECT_NEW_HIGHEST_SCORE=void 0;var a=e("../Sound/sound.model"),c=e("../Sound/sound.const"),l=cc._decorator,s=l.ccclass,p=l.property;o.EVENT_EFFECT_NEW_HIGHEST_SCORE="event_effect_new_highest_score";var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelNewHighestScore=null,t.lastTween=null,t}return n(t,e),t.prototype.onLoad=function(){this.node.active=!1,cc.systemEvent.on(o.EVENT_EFFECT_NEW_HIGHEST_SCORE,this.show.bind(this),this)},t.prototype.onDestroy=function(){cc.systemEvent.off(o.EVENT_EFFECT_NEW_HIGHEST_SCORE,this.show.bind(this),this)},t.prototype.show=function(){var e=this;a.Sound.sound.value=c.SoundNames.NEW_HIGHEST_SCORE,this.node.active=!0,this.node.opacity=255,this.lastTween&&this.lastTween.stop(),this.lastTween=cc.tween(this.labelNewHighestScore).set({y:100,scale:1,opacity:255}).sequence(cc.tween().to(.4,{scale:1.2}),cc.tween().to(.7,{y:200})).delay(.5).to(.5,{opacity:0}).call(function(){e.node.opacity=0,e.node.active=!1}).start()},i([p(cc.Node)],t.prototype,"labelNewHighestScore",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Sound/sound.const":"sound.const","../Sound/sound.model":"sound.model"}],FirebaseAnalytic:[function(e,t,o){"use strict";cc._RF.push(t,"910ecRJF0RDR45U88FS7A8P","FirebaseAnalytic"),Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(){}return e.logEvent=function(e,t){if(cc.sys.isNative&&jsb){var o="";t&&(o=JSON.stringify(t)),cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("FirebaseAnalytic","logEvent:params:",e,o):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/natives/firebase/analytic/FirebaseAnalytic","logEvent","(Ljava/lang/String;Ljava/lang/String;)V",e,o)}},e}();o.default=r,cc._RF.pop()},{}],FirebaseAuthentication:[function(e,t,o){"use strict";cc._RF.push(t,"03ce4riILxN/Z3n8k3LVp93","FirebaseAuthentication"),Object.defineProperty(o,"__esModule",{value:!0});var r=new(function(){function e(){this._listeners=[]}return e.prototype.addLisntener=function(e){this._listeners.push(e)},e.prototype.removeListner=function(e){this._listeners.findIndex(function(t){return t==e})>=0&&this._listeners.splice(this._listeners.findIndex(function(t){return t==e}),1)},e.prototype.signInGoogle=function(){"undefined"!=typeof jsb&&(cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/natives/firebase/authentication/GoogleAuthentication","signIn","()V"):(cc.sys.os,cc.sys.OS_IOS))},e.prototype.signInFacebook=function(){"undefined"!=typeof jsb&&(cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/natives/firebase/authentication/FacebookAuthentication","signIn","()V"):(cc.sys.os,cc.sys.OS_IOS))},e.prototype.nativeGoolgeSignedIn=function(e,t){console.log("nativeGoolgeSignedIn, ",e,t),this._listeners.forEach(function(o){return o.onGoogleSignedIn(e,t)})},e.prototype.nativeFacebookSignedIn=function(e,t){console.log("nativeFacebookSignedIn, ",e,t),this._listeners.forEach(function(o){return o.onFacebookSignedIn(e,t)})},e}());cc.FirebaseAuthentication=r,o.default=r,cc._RF.pop()},{}],FirebaseCrashlytic:[function(e,t,o){"use strict";cc._RF.push(t,"788800+TbRAsLZhj9VvXoo5","FirebaseCrashlytic"),Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(){}return e.logCustomCrash=function(e){cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("FirebaseCrashlytic","logCustomCrash:crashStr:",e):(cc.sys.os,cc.sys.OS_ANDROID))},e}();o.default=r,cc._RF.pop()},{}],FirebaseRemoteConfig:[function(e,t,o){"use strict";cc._RF.push(t,"a3d20k+tTlPIKla81ekHsbC","FirebaseRemoteConfig"),Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(){}return e.init=function(){cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("FirebaseRemoteConfig","init"):(cc.sys.os,cc.sys.OS_ANDROID))},e.getConfigByKey=function(e){if(cc.sys.isNative&&jsb){if(cc.sys.os===cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("FirebaseRemoteConfig","getValueFromConfig:",e);if(cc.sys.os===cc.sys.OS_ANDROID)return""}return""},e}();o.default=r,cc._RF.pop()},{}],FixedQueue:[function(e,t,o){"use strict";cc._RF.push(t,"289d6vDizhAVpqtKxL+mBPR","FixedQueue");var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,n++)r[n]=i[a];return r};Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t){this._values=null,this._fixedSize=0,this._values=t||[],this._fixedSize=e,this.trimTail()}return Object.defineProperty(e.prototype,"values",{get:function(){return Object.seal(r(this._values))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fixedSize",{get:function(){return this._fixedSize},enumerable:!1,configurable:!0}),e.prototype.trimHead=function(){this._values.length<=this._fixedSize||this._values.splice(0,this._values.length-this._fixedSize)},e.prototype.trimTail=function(){this._values.length<=this._fixedSize||this._values.splice(this._fixedSize,this._values.length-this._fixedSize)},e.prototype.push=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this._values).push.apply(e,t),this.trimHead()},e.prototype.unshift=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this._values).unshift.apply(e,t),this.trimTail()},e}();o.default=n,cc._RF.pop()},{}],GameEditor:[function(e,t,o){"use strict";cc._RF.push(t,"afcd7n/FulMpaxdjCuxy/Ie","GameEditor");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Plugin/KDPlugin/MatrixGame/TableMatrix"),c=e("../../Script/CoreGameplayEx/BlockGame"),l=e("../../Script/CoreGameplayEx/TableGame"),s=e("./ManagerSetupScripts"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tableGame=null,t.streak=0,t}return n(t,e),t.prototype.onLoad=function(){this.tableGame=this.node.getComponentInChildren(l.default)},t.prototype.start=function(){var e=this;this.scheduleOnce(function(){e.loadGame()},.5)},t.prototype.loadGame=function(){var e=s.default.blocksQueueMatrix.map(function(e){return new a.default(e.matrixCopy)});e.length||(e=[c.default.createTableMatrixBlock(),c.default.createTableMatrixBlock(),c.default.createTableMatrixBlock()]);for(var t=new a.default(s.default.boardMatrix.matrixCopy),o=[],r=e.length>=3?3:e.length,n=0;n<r;n++)o.push(e.shift());this.tableGame.handIdWhenMoveBlock=s.default.handIdSelected,this.tableGame.replayGameWithCustomBoardBlock(t,o,s.default.starsList,!1),this.tableGame.pushNextBlocksMatrix(e)},i([u],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../Plugin/KDPlugin/MatrixGame/TableMatrix":"TableMatrix","../../Script/CoreGameplayEx/BlockGame":"BlockGame","../../Script/CoreGameplayEx/TableGame":"TableGame","./ManagerSetupScripts":"ManagerSetupScripts"}],GameLoading:[function(e,t,o){"use strict";cc._RF.push(t,"15e80FRQ1xM2pyRuMMIYHBn","GameLoading");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=e("../SceneManager/scene.model"),l=e("../Player/player.model"),s=e("../Manager4Native/NativeInitManager"),p=e("../Manager4Native/AdManager"),u=e("../ConstantNative"),d=e("../Merge2dxData/Merge2dxData"),h=e("../Award/award.model"),f=cc._decorator,y=f.ccclass,v=f.property;(function(e){e[e.Editor=0]="Editor",e[e.Production=1]="Production"})(a||(a={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameType=a.Production,t}return n(t,e),t.prototype.onLoad=function(){d.Merge2dxData.checkAndMergeDataFrom2dxEngine(),s.default.init()},t.prototype.start=function(){var e="";switch(this.gameType){case a.Editor:e="custom-board-block";break;case a.Production:e=l.Player.playedTutorial.value?"block-plus":"tutorial"}cc.director.preloadScene(e,function(){},function(t){t||(c.Scene.scene.value=e)}),h.AwardModelInstance.init(),p.default.showBanner(u.AD_BANNER)},i([v({type:cc.Enum(a)})],t.prototype,"gameType",void 0),i([y],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../Award/award.model":"award.model","../ConstantNative":"ConstantNative","../Manager4Native/AdManager":"AdManager","../Manager4Native/NativeInitManager":"NativeInitManager","../Merge2dxData/Merge2dxData":"Merge2dxData","../Player/player.model":"player.model","../SceneManager/scene.model":"scene.model"}],GameServiceManager:[function(e,t,o){"use strict";cc._RF.push(t,"90a77iGZ9ZJV5nKfZBuaeAy","GameServiceManager"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Plugin/Native/GameServices"),n=e("../ConstantNative"),i=cc._decorator,a=(i.ccclass,i.property,new(function(){function e(){}return e.prototype.signIn=function(){r.default.signIn()},e.prototype.showLeaderboard=function(){r.default.showLeaderboard(n.LEADERBOARD_ID)},e.prototype.submitScore=function(e){r.default.submitScore(n.LEADERBOARD_ID,e)},e}()));o.default=a,cc._RF.pop()},{"../../Plugin/Native/GameServices":"GameServices","../ConstantNative":"ConstantNative"}],GameServices:[function(e,t,o){"use strict";cc._RF.push(t,"b0eafRRr8JJsZGpDKCCDkx+","GameServices"),Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(){}return e.signIn=function(){if(cc.sys.isNative&&jsb){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GameCenter","login");cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/natives/gms/Auth","signIn","()V")}},e.showLeaderboard=function(e){if(cc.sys.isNative&&jsb){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GameCenter","showLeaderboard:",e.ios);cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/natives/gms/Leaderboard","showLeaderboard","(Ljava/lang/String;)V",e.android)}},e.submitScore=function(e,t){if(cc.sys.isNative&&jsb){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GameCenter","submitScore:score:",e.ios,t);cc.sys.os==cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/natives/gms/Leaderboard","showLeaderboard","(Ljava/lang/String;I)V",e.android,t)}},e}();o.default=r,cc._RF.pop()},{}],GameUIControllerEditor:[function(e,t,o){"use strict";cc._RF.push(t,"244d5RqBWhClb1rpEwMcj7R","GameUIControllerEditor");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Plugin/KDPlugin/Core/Helper"),c=e("../../Script/CoreGameplayEx/BoardGame"),l=e("../../Script/CoreGameplayEx/TableGame"),s=e("./ManagerSetupScripts"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tableGame=null,t}return n(t,e),t.prototype.start=function(){if(this.tableGame=this.node.parent.getComponentInChildren(l.default),s.default.bgCustomeBase64){var e=this.getBgSprNode().getComponent(cc.Sprite),t=a.KDCore.SpriteHelper.createSprite(e.spriteFrame,e.spriteFrame.getOriginalSize(),e.node.parent);t.node.name="BgCustome",t.node.setSiblingIndex(e.node.getSiblingIndex()),t.node.setContentSize(e.node.getContentSize()),t.node.scale=.96*e.node.scale,t.node.active=!1,a.KDCore.SpriteHelper.loadBase64ImageToSpr(t.getComponent(cc.Sprite),s.default.bgCustomeBase64)}s.default.bgCurBlockBase64&&a.KDCore.SpriteHelper.loadBase64ImageToSpr(this.getSpriteCurrentBlock(),s.default.bgCurBlockBase64),s.default.bgHoldBlockBase64&&a.KDCore.SpriteHelper.loadBase64ImageToSpr(this.getSpriteHoldBlock(),s.default.bgHoldBlockBase64),s.default.bgNextBlockBase64&&a.KDCore.SpriteHelper.loadBase64ImageToSpr(this.getSpriteNextBlock(),s.default.bgNextBlockBase64)},t.prototype.onBackClicked=function(){cc.director.loadScene("custom-board-block")},t.prototype.getBgSprNode=function(){return this.tableGame.node.getComponentInChildren(c.default).node.getChildByName("SprBg").getChildByName("SprBg")},t.prototype.getBgCustomeNode=function(){return this.tableGame.node.getComponentInChildren(c.default).node.getChildByName("SprBg").getChildByName("BgCustome")},t.prototype.getSpriteNextBlock=function(){return this.tableGame.node.getChildByName("BlockPositions").getChildByName("Queue1Block").getChildByName("Queue1Block").getComponent(cc.Sprite)},t.prototype.getSpriteCurrentBlock=function(){return this.tableGame.node.getChildByName("BlockPositions").getChildByName("CurrentBlock").getComponent(cc.Sprite)},t.prototype.getSpriteHoldBlock=function(){return this.tableGame.node.getChildByName("BlockPositions").getChildByName("HoldBlock").getComponent(cc.Sprite)},t.prototype.onSwitchBoardBg=function(){var e=this.getBgCustomeNode(),t=this.getBgSprNode();e?t.active?(e.active=!0,t.active=!1):e.active?e.active=!1:t.active=!0:t.active=!t.active},t.prototype.onSwitchBg=function(){this.node.opacity=0==this.node.opacity?255:0},i([u],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../Plugin/KDPlugin/Core/Helper":"Helper","../../Script/CoreGameplayEx/BoardGame":"BoardGame","../../Script/CoreGameplayEx/TableGame":"TableGame","./ManagerSetupScripts":"ManagerSetupScripts"}],GameUIController:[function(e,t,o){"use strict";cc._RF.push(t,"85a54hWIFFHZ7bKun0Aw2Yy","GameUIController");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./../ConstantNative"),c=e("./../SceneManager/scene.const"),l=e("./../SceneManager/scene.model"),s=e("../../Plugin/Reactive/lib"),p=e("./table.model"),u=e("../../Plugin/KDPlugin/Core/Helper"),d=e("./GameplayControllerBase"),h=e("../Player/player.model"),f=e("../Manager4Native/AdManager"),y=cc._decorator,v=y.ccclass,_=y.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelScore=null,t.labelBestScore=null,t}return n(t,e),t.prototype.onLoad=function(){s.Reactive.addTarget(this),this.onRightHandUpdated(null,h.Player.holdRighHand.value),cc.systemEvent.on(d.EVENT_REPLAY_NEW_GAME,this.onReplayNewGame.bind(this),this)},t.prototype.start=function(){this.reloadScores()},t.prototype.onDestroy=function(){s.Reactive.removeTarget(this),cc.systemEvent.off(d.EVENT_REPLAY_NEW_GAME,this.onReplayNewGame.bind(this),this)},t.prototype.onReplayNewGame=function(){this.reloadScores()},t.prototype.reloadScores=function(){this.labelBestScore.string=h.Player.highScore.value.toString(),this.labelScore.string=p.default.score.value.toString()},t.prototype.onRightHandUpdated=function(){},t.prototype.onScoreUpdated=function(e,t){u.KDCore.AnimationHelper.runActionFloatAddValueForLabel(this.labelScore,t-parseInt(this.labelScore.string.replace(/,/gi,"")),.4,!0,"{0}",!0)},t.prototype.onBackClicked=function(){var e=function(){l.Scene.scene.value=c.SceneNames.MENU};f.default.isInterstitialAvailable(a.AD_INTERSTITIAL)?f.default.showInterstitial(a.AD_INTERSTITIAL,function(){},function(){e()}):e()},i([_(cc.Label)],t.prototype,"labelScore",void 0),i([_(cc.Label)],t.prototype,"labelBestScore",void 0),i([s.react({event:h.PlayerProps.holdRighHand})],t.prototype,"onRightHandUpdated",null),i([s.react({event:p.TableModelProp.score,condition:function(e){return e>0}})],t.prototype,"onScoreUpdated",null),i([v],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../Plugin/KDPlugin/Core/Helper":"Helper","../../Plugin/Reactive/lib":"lib","../Manager4Native/AdManager":"AdManager","../Player/player.model":"player.model","./../ConstantNative":"ConstantNative","./../SceneManager/scene.const":"scene.const","./../SceneManager/scene.model":"scene.model","./GameplayControllerBase":"GameplayControllerBase","./table.model":"table.model"}],GameplayControllerBase:[function(e,t,o){"use strict";cc._RF.push(t,"d645cib3ddPVb3XgBiyL0uA","GameplayControllerBase");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT_COLLECTED_STAR=o.EVENT_SELECTED_ITEM_REWARD=o.EVENT_REPLAY_NEW_GAME=void 0;var a=e("../CoreGameplayEx/TableGame"),c=e("../CoreGameplayEx/ConstantGameplay"),l=e("./table.model"),s=e("../Popups/Base/models/popupsview.model"),p=e("../Player/player.model"),u=e("../Sound/sound.model"),d=e("../../Plugin/Reactive/lib"),h=e("../Notification/noti.model"),f=e("../Effects/EffectNewHighestScore"),y=e("../Award/award.model"),v=e("../Statistic/statistic.model"),g=e("../Sound/sound.const"),b=e("../Manager4Native/GameServiceManager"),m=e("../Manager4Native/AnalyticManager"),C=e("../Manager4Native/AdManager"),S=e("../ConstantNative"),P=e("../CoreGameplayEx/TableConfig"),T=e("../Tutorial/TutorialInGameController"),R=e("./ConstantGame"),O=e("./HandPoint"),A=cc._decorator,B=A.ccclass,k=A.property;o.EVENT_REPLAY_NEW_GAME="EVENT_REPLAY_NEW_GAME",o.EVENT_SELECTED_ITEM_REWARD="EVENT_SELECTED_ITEM_REWARD",o.EVENT_COLLECTED_STAR="EVENT_COLLECTED_STAR";var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tableConfig=null,t.tableGame=null,t.notEnoughSpaceGroup=null,t.anmNoSpaceLeft=null,t.tutorialInGame=null,t.handPoint=null,t.streak=0,t.maxStreakPrevTurn=0,t.maxComboPrevTurn=0,t.callbackAfterShowNewHighestScore=null,t.isShowingNewHighestScore=!1,t}return n(t,e),t.prototype.onLoad=function(){this.tableGame=this.node.getComponentInChildren(a.default),this.tableGame.listener=this,this.tableConfig.applyConfig(),cc.systemEvent.on(o.EVENT_REPLAY_NEW_GAME,this.onReplayNewGame.bind(this),this),cc.systemEvent.on(o.EVENT_SELECTED_ITEM_REWARD,this.onSelectGiftReward.bind(this),this),d.Reactive.addTarget(this)},t.prototype.start=function(){this.tableGame.enableEffectMovingBlock=p.Player.effects.value,""!=l.default.boardStr.value?this.tableGame.replayGameFromSave(l.default.boardStr.value,l.default.blocksStr.value):this.onReplayNewGame(),this.schedule(function(){l.default.playingDuration.value+=1},1,cc.macro.REPEAT_FOREVER,1),C.default.showBanner(S.AD_BANNER)},t.prototype.onDestroy=function(){cc.systemEvent.off(o.EVENT_REPLAY_NEW_GAME,this.onReplayNewGame.bind(this),this),cc.systemEvent.off(o.EVENT_SELECTED_ITEM_REWARD,this.onSelectGiftReward.bind(this),this),d.Reactive.removeTarget(this)},t.prototype.holdRighHandUpdated=function(){},t.prototype.onEffectsSettingUpdated=function(e,t){this.tableGame.enableEffectMovingBlock=t},t.prototype.onPlaySound=function(e){e&&(u.Sound.sound.value=e.name)},t.prototype.onTouchBlockBegin=function(e){this.tutorialInGame&&this.tutorialInGame.isValid?this.tutorialInGame.onTouchBlockBegin(e):e||(u.Sound.sound.value=g.SoundNames.TOUCH_BLOCK_NOT_ENOUGHT_SPACE,this.notEnoughSpaceGroup.stopAllActions(),this.notEnoughSpaceGroup.active=!0,cc.tween(this.notEnoughSpaceGroup).set({opacity:0}).to(.2,{opacity:255}).start()),this.handPoint&&this.handPoint.onTouchBlockBegin()},t.prototype.onTouchBlockEnd=function(){var e=this;1==this.notEnoughSpaceGroup.active&&(this.notEnoughSpaceGroup.stopAllActions(),cc.tween(this.notEnoughSpaceGroup).to(.2,{opacity:0}).call(function(){return e.notEnoughSpaceGroup.active=!1}).start()),this.tutorialInGame&&this.tutorialInGame.isValid&&this.tutorialInGame.onTouchBlockEnd(),this.handPoint&&this.handPoint.onTouchBlockEnd()},t.prototype.onClickedBlock=function(e){this.tutorialInGame&&this.tutorialInGame.isValid&&this.tutorialInGame.onClickedBlock(),this.handPoint&&this.handPoint.onClickedBlock(e)},t.prototype.onMovedBlock=function(e){this.tutorialInGame&&this.tutorialInGame.isValid&&this.tutorialInGame.onMovedBlock(e),this.handPoint&&this.handPoint.onMovedBlock()},t.prototype.onSwapedBlock=function(){this.tutorialInGame&&this.tutorialInGame.isValid&&this.tutorialInGame.onSwapedBlock(),this.handPoint&&this.handPoint.onSwapedBlock()},t.prototype.onPlacedBlockToBoard=function(e,t,o,r,n){var i=this,a=e+t+o,s=a*c.default.SCORE_CLAIM_PER_LINE;a>=3&&(s=c.default.SCORE_CLAIM_PER_LINE*Math.pow(a,2)/2);var d=0,h=this.streak;a>0?(this.streak++,d=Math.max(0,(this.streak-1)*c.default.SCORE_PER_STRIKE)):this.streak=0;var _=r+s+d;n(_,this.streak),this.maxStreakPrevTurn=Math.max(this.maxStreakPrevTurn,this.streak),this.maxComboPrevTurn=Math.max(this.maxComboPrevTurn,a),l.default.score.value+_>p.Player.highScore.value&&l.default.score.value<p.Player.highScore.value&&(u.Sound.sound.value=g.SoundNames.NEW_HIGHEST_SCORE,cc.systemEvent.emit(f.EVENT_EFFECT_NEW_HIGHEST_SCORE),this.isShowingNewHighestScore=!0,this.scheduleOnce(function(){i.callbackAfterShowNewHighestScore&&(i.callbackAfterShowNewHighestScore(),i.callbackAfterShowNewHighestScore=null),i.isShowingNewHighestScore=!1},3.5)),l.default.score.value+=_,this.streak>=2&&y.AwardModelInstance.addStreak(this.streak),y.AwardModelInstance.addScore(_),v.Statistic.addRecord(_),l.default.moves.value+=1,a>=2&&(l.default.totalCombo.value+=a),0==this.streak&&h>=2&&(l.default.totalStreak.value+=h),l.default.maxCombo.value=Math.max(l.default.maxCombo.value,a),l.default.maxStreak.value=Math.max(l.default.maxStreak.value,this.streak),this.tutorialInGame&&this.tutorialInGame.isValid&&this.tutorialInGame.onPlacedBlockToBoard(e,t,o,r,n)},t.prototype.onCollectStar=function(e){l.default.tempTotalStarCollected.value++,l.default.totalStarCollected.value++,cc.systemEvent.emit(o.EVENT_COLLECTED_STAR,e)},t.prototype.getBlockTypesForNewTurn=function(){var e=[c.BlockDefaulType.One_BlockType,c.BlockDefaulType.Two_BlockType,c.BlockDefaulType.Three_BlockType,c.BlockDefaulType.Four_BlockType,c.BlockDefaulType.Five_BlockType,c.BlockDefaulType.L_BlockType,c.BlockDefaulType.L_SupperBig_BlockType,c.BlockDefaulType.O_BlockType,c.BlockDefaulType.O_Big_BlockType],t=[e[_.random(0,e.length-1)],e[_.random(0,e.length-1)],e[_.random(0,e.length-1)]];return this.maxStreakPrevTurn=0,this.maxComboPrevTurn=0,t},t.prototype.getGenerateMaskStarList=function(){for(var e=c.default.BOARD_ROW_TOP-c.default.BOARD_ROW_BOT+1,t=c.default.BOARD_COL_RIGHT-c.default.BOARD_COL_LEFT+1,o=[],r=0;r<e;r++)for(var n=0;n<t;n++)1==_.random(1,R.default.RATIO_APEAR_STAR_PER_CELL)&&o.push({x:n,y:r});return o},t.prototype.onSaveTable=function(e,t){l.default.boardStr.value=e,l.default.blocksStr.value=t},t.prototype.onClear=function(){},t.prototype.onOutOfMove=function(){var e=p.Player.highScore.value,t=l.default.score.value;b.default.submitScore(t>e?t:e),p.Player.highScore.value=e<t?t:e,p.Player.increasePlayedGames(),C.default.showBanner(S.AD_BANNER),m.default.logEventFirstFinishGame(p.Player.playedGames.value),m.default.logEventGameOver(l.default.playingDuration.value,l.default.moves.value,l.default.score.value,l.default.totalStreak.value,l.default.totalCombo.value,l.default.maxStreak.value,l.default.maxCombo.value),l.default.resetForNewGame(),this.runAnmOutOfMoveThenShowPopups(t,e)},t.prototype.runAnmOutOfMoveThenShowPopups=function(e,t){var o=this;this.anmNoSpaceLeft.play(this.anmNoSpaceLeft.defaultClip.name),this.anmNoSpaceLeft.once(cc.Animation.EventType.FINISHED,function(){u.Sound.sound.value=g.SoundNames.GAME_OVER,o.tableGame.runEffectGreyBoard().then(function(){var o=function(){s.PopupView.lose.value={newScore:e,oldBestScore:t}};C.default.isInterstitialAvailable(S.AD_INTERSTITIAL)?C.default.showInterstitial(S.AD_INTERSTITIAL,null,o):o()})})},t.prototype.onReplayNewGame=function(){!0===d.repository.callFunc(h.NotificationProps.funcCanShow)&&d.repository.callFunc(h.NotificationProps.funcShow),this.streak=0,this.maxComboPrevTurn=0,this.maxStreakPrevTurn=0,l.default.resetForNewGame(),this.tableGame.runEffectReplayGame(),this.tableGame.replayNewGame(!1),this.handPoint&&this.handPoint.stopHandPoint()},t.prototype.onSelectGiftReward=function(e){this.tableGame.changeCurrentBlockToSpecialBlock(e),this.handPoint&&this.handPoint.stopHandPoint(),l.default.tempTotalStarCollected.value=0,l.default.totalStarCollected.value=0},i([k(P.TableConfig)],t.prototype,"tableConfig",void 0),i([k(a.default)],t.prototype,"tableGame",void 0),i([k(cc.Node)],t.prototype,"notEnoughSpaceGroup",void 0),i([k(cc.Animation)],t.prototype,"anmNoSpaceLeft",void 0),i([k(T.default)],t.prototype,"tutorialInGame",void 0),i([k(O.default)],t.prototype,"handPoint",void 0),i([d.react({event:p.PlayerProps.holdRighHand})],t.prototype,"holdRighHandUpdated",null),i([d.react({event:p.PlayerProps.effects})],t.prototype,"onEffectsSettingUpdated",null),i([B],t)}(cc.Component);o.default=w,cc._RF.pop()},{"../../Plugin/Reactive/lib":"lib","../Award/award.model":"award.model","../ConstantNative":"ConstantNative","../CoreGameplayEx/ConstantGameplay":"ConstantGameplay","../CoreGameplayEx/TableConfig":"TableConfig","../CoreGameplayEx/TableGame":"TableGame","../Effects/EffectNewHighestScore":"EffectNewHighestScore","../Manager4Native/AdManager":"AdManager","../Manager4Native/AnalyticManager":"AnalyticManager","../Manager4Native/GameServiceManager":"GameServiceManager","../Notification/noti.model":"noti.model","../Player/player.model":"player.model","../Popups/Base/models/popupsview.model":"popupsview.model","../Sound/sound.const":"sound.const","../Sound/sound.model":"sound.model","../Statistic/statistic.model":"statistic.model","../Tutorial/TutorialInGameController":"TutorialInGameController","./ConstantGame":"ConstantGame","./HandPoint":"HandPoint","./table.model":"table.model"}],GiftReward:[function(e,t,o){"use strict";cc._RF.push(t,"1a0d4ZRvW9OfZCCQrecuIte","GiftReward");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../CoreGameplayEx/ConstantGameplay"),c=e("../Gameplay/GameplayControllerBase"),l=cc._decorator,s=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bomNode=null,t.verticalNode=null,t.horizontalNode=null,t.btnGet=null,t}return n(t,e),t.prototype.onShow=function(){this.resetHighlightSelect(),this.btnGet.interactable=!1},t.prototype.onItemClick=function(e){this.resetHighlightSelect(),e.target.getChildByName("Select").active=!0,e.target.getChildByName("Unselect").active=!1,this.btnGet.interactable=!0},t.prototype.resetHighlightSelect=function(){[this.bomNode,this.verticalNode,this.horizontalNode].forEach(function(e){e&&(e.getChildByName("Select").active=!1,e.getChildByName("Unselect").active=!0)})},t.prototype.onGetItemClicked=function(){var e=this;[this.bomNode,this.verticalNode,this.horizontalNode].forEach(function(t){if(t&&t.getChildByName("Select").active)switch(t){case e.bomNode:cc.systemEvent.emit(c.EVENT_SELECTED_ITEM_REWARD,a.default.CELL_ID_CLEAR_BOM);break;case e.verticalNode:cc.systemEvent.emit(c.EVENT_SELECTED_ITEM_REWARD,a.default.CELL_ID_CLEAR_VERTICAL);break;case e.horizontalNode:cc.systemEvent.emit(c.EVENT_SELECTED_ITEM_REWARD,a.default.CELL_ID_CLEAR_HORIZONTAL)}})},t.prototype.onTouchStart=function(){this.node.opacity=0},t.prototype.onTouchEnd=function(){this.node.opacity=255},i([p(cc.Node)],t.prototype,"bomNode",void 0),i([p(cc.Node)],t.prototype,"verticalNode",void 0),i([p(cc.Node)],t.prototype,"horizontalNode",void 0),i([p(cc.Button)],t.prototype,"btnGet",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../CoreGameplayEx/ConstantGameplay":"ConstantGameplay","../Gameplay/GameplayControllerBase":"GameplayControllerBase"}],GridCom:[function(e,t,o){"use strict";cc._RF.push(t,"0a244MBNnVNSoN02tjSTsNI","GridCom");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GridConfig"),c=e("./Cell"),l=cc._decorator,s=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cellPrefab=null,t._tableMatrix=null,t._leftAvailable=0,t._rightAvailable=0,t._topAvailable=0,t._botAvailable=0,t._centerPosValidCells=cc.Vec2.ZERO,t._validCellsSize=cc.Size.ZERO,t._config=null,t}return n(t,e),Object.defineProperty(t.prototype,"tableMatrix",{get:function(){return this._tableMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftAvailable",{get:function(){return this._leftAvailable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightAvailable",{get:function(){return this._rightAvailable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topAvailable",{get:function(){return this._topAvailable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"botAvailable",{get:function(){return this._botAvailable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"centerPosValidCells",{get:function(){return this._centerPosValidCells},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validCellsSize",{get:function(){return this._validCellsSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxRow",{get:function(){return this._tableMatrix?this._tableMatrix.rowSize:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxCol",{get:function(){return this._tableMatrix?this._tableMatrix.colSize:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(e){this._config=e},enumerable:!1,configurable:!0}),t.prototype.onDestroy=function(){delete this._tableMatrix},t.prototype.setTableMatrix=function(e){delete this._tableMatrix,this._tableMatrix=e,this.reloadVariablesWhenMatrixChange()},t.prototype.posFromRowAndCol=function(e,t){var o=(-Math.floor(this.tableMatrix.colSize)/2+.5+t)*this.config.cellSize.width,r=(-Math.floor(this.tableMatrix.rowSize)/2+.5+e)*this.config.cellSize.height;switch(this.config.gameType){case a.eGridGameType.Square:break;case a.eGridGameType.Hexa:Math.floor(t)%2!=0&&(r+=this.config.cellSize.height/2);break;case a.eGridGameType.Triangle:}return cc.v3(o,r,0)},t.prototype.rowAndColFromPos=function(e){var t=this.posFromRowAndCol(0,0),o=Math.round(1*(e.x-t.x)/this.config.cellSize.width),r=Math.round(1*(e.y-t.y)/this.config.cellSize.height);switch(this.config.gameType){case a.eGridGameType.Square:break;case a.eGridGameType.Hexa:Math.floor(o)%2!=0&&(r=Math.round(1*(e.y-t.y-.5*this.config.cellSize.height)/this.config.cellSize.height));break;case a.eGridGameType.Triangle:}return cc.v2(o,r)},t.prototype.getNodeIndex=function(e,t){return t<0||e<0||t>=this.maxCol||e>=this.maxRow?-1:e*this.maxCol+t},t.prototype.reloadVariablesWhenMatrixChange=function(){this.calculateAvailableBox(),this.calculateCenterPosValidCells()},t.prototype.calculateAvailableBox=function(){for(var e=!1,t=0;t<this.maxRow;t++)for(var o=0;o<this.maxCol;o++)this._tableMatrix.at(t,o)&&(e?(this._leftAvailable>o&&(this._leftAvailable=o),this._rightAvailable<o&&(this._rightAvailable=o),this._topAvailable<t&&(this._topAvailable=t)):(this._leftAvailable=this._rightAvailable=o,this._topAvailable=this._botAvailable=t,e=!0))},t.prototype.calculateCenterPosValidCells=function(){switch(this._config.gameType){case a.eGridGameType.Square:case a.eGridGameType.Triangle:this._validCellsSize=cc.size(this.posFromRowAndCol(0,this.rightAvailable).x-this.posFromRowAndCol(0,this.leftAvailable).x+this.config.cellSize.width,this.posFromRowAndCol(this.topAvailable,0).y-this.posFromRowAndCol(this.botAvailable,0).y+this.config.cellSize.height);var e=(this.rightAvailable-this.leftAvailable)/2+this.leftAvailable,t=(this.topAvailable-this.botAvailable)/2+this.botAvailable;this._centerPosValidCells=cc.v2(this.posFromRowAndCol(t,e));break;case a.eGridGameType.Hexa:for(var o=-1,r=-1,n=this.leftAvailable;n<=this.rightAvailable;n++)!this.tableMatrix.at(this.topAvailable,n)||-1!=o&&n%2==0||(o=n),!this.tableMatrix.at(this.botAvailable,n)||-1!=r&&n%2==0||(r=n);var i=this.posFromRowAndCol(this.topAvailable,o).y,c=this.posFromRowAndCol(this.botAvailable,r).y;this._validCellsSize=cc.size(this.posFromRowAndCol(0,this.rightAvailable).x-this.posFromRowAndCol(0,this.leftAvailable).x+this.config.cellSize.width,i-c+this.config.cellSize.height),this._centerPosValidCells=cc.v2(this.posFromRowAndCol(0,(this.rightAvailable-this.leftAvailable)/2+this.leftAvailable).x,(i-c)/2+c)}},t.prototype.reloadCellsComForOnlyRendererCell=function(e){if(e){for(;e.childrenCount>0;){var t=e.children[0];this.pushCellFromCellQueue(t.getComponent(c.default))}e.position=cc.v3(this.centerPosValidCells);for(var o=this.botAvailable;o<=this.topAvailable;o++)for(var r=this.leftAvailable;r<=this.rightAvailable;r++){var n=this.getRealCellIdAtRowCol(o,r);if(n>0){var i=this.popCellToCellQueue(e);this.setupCellComAtRowCol(i.getComponent(c.default),o,r,n)}}}},t.prototype.getRealCellIdAtRowCol=function(e,t){return this.tableMatrix.isInBox(e,t)?this.tableMatrix.at(e,t):0},t.prototype.pushCellFromCellQueue=function(e){e&&(e.node.removeFromParent(!0),e.node.parent=this.getUnuseCellContainer())},t.prototype.popCellToCellQueue=function(e){for(var t=this.getUnuseCellContainer();t.childrenCount>0;){var o=t.children[t.childrenCount-1];if(o)return o.removeFromParent(!0),e.addChild(o),o.getComponent(c.default).reset(),o.getComponent(c.default)}var r=cc.instantiate(this.cellPrefab),n=r.getComponent(c.default);return n.getComponent(c.default).reset(),r.parent=e,n},t.prototype.setupCellComAtRowCol=function(e,t,o,r){e.changeRendererAndCellIdByCellId(r);var n=e.node;switch(this.config.gameType){case a.eGridGameType.Square:case a.eGridGameType.Hexa:break;case a.eGridGameType.Triangle:o%2==0&&t%2!=0?n.setRotation(180):o%2!=0&&t%2==0&&n.setRotation(180)}n.name=this.getNodeIndex(t,o).toString(),n.setSiblingIndex(0),n.setPosition(this.posFromRowAndCol(t,o).subtract(n.getParent().position))},t.prototype.getUnuseCellContainer=function(){var e="unuseCellContainer",t=this.node.getChildByName(e);return t||((t=new cc.Node).name=e,t.active=!1,t.parent=this.node),t},i([p(cc.Prefab)],t.prototype,"cellPrefab",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./Cell":"Cell","./GridConfig":"GridConfig"}],GridConfig:[function(e,t,o){"use strict";var r;cc._RF.push(t,"5ae40fbmhpFS6okCuSeuvj/","GridConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.eGridGameType=void 0,function(e){e[e.Square=0]="Square",e[e.Hexa=1]="Hexa",e[e.Triangle=2]="Triangle"}(r=o.eGridGameType||(o.eGridGameType={}));o.default=function(e,t,o,n){void 0===e&&(e=cc.Size.ZERO),void 0===t&&(t=r.Square),void 0===o&&(o=cc.Vec2.ZERO),void 0===n&&(n={drag:!0,click:!1,distanceToFlagDragBlock:0}),this.cellSize=e,this.gameType=t,this.distanceFromTouchBlock=o,this.blockInteractInfo=n},cc._RF.pop()},{}],HandPoint:[function(e,t,o){"use strict";cc._RF.push(t,"fccb3IKApFN04okssOphPCb","HandPoint");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=e("../CoreGameplayEx/TableGame"),l=cc._decorator,s=l.ccclass,p=l.property;(function(e){e[e.None=0]="None",e[e.MoveBlockToHold=1]="MoveBlockToHold",e[e.RotateBlock=2]="RotateBlock"})(a||(a={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hand=null,t._currentPointRotateWorldPos=null,t._currentType=a.None,t._tableGame=null,t}return n(t,e),t.prototype.scheduleAndShowHandPointHold=function(e){var t=this;this._tableGame=e,this._currentType=a.MoveBlockToHold,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){t.showHandPointHold()},5)},t.prototype.scheduleAndShowHandPointRotate=function(e,t){var o=this;this._tableGame=e,this._currentType=a.RotateBlock,this._currentPointRotateWorldPos=t,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){o.showHandPointRotate()},5)},t.prototype.onTouchBlockBegin=function(){this.hideHandPoint()},t.prototype.onTouchBlockEnd=function(){switch(this._currentType){case a.MoveBlockToHold:this.showHandPointHold();break;case a.RotateBlock:this.showHandPointRotate();break;default:this.hideHandPoint()}},t.prototype.hideHandPoint=function(){cc.Tween.stopAllByTarget(this.hand),this.hand.active=!1},t.prototype.onSwapedBlock=function(){this.unscheduleAllCallbacks(),this.hideHandPoint(),this._currentType=a.None},t.prototype.onMovedBlock=function(){},t.prototype.onClickedBlock=function(){this.unscheduleAllCallbacks(),this.hideHandPoint(),this._currentType=a.None},t.prototype.stopHandPoint=function(){this.unscheduleAllCallbacks(),this.hideHandPoint(),this._currentType=a.None},t.prototype.showHandPointHold=function(){var e=this;cc.Tween.stopAllByTarget(this.hand),this.hand.active=!0;var t=cc.v3(this.node.convertToNodeSpaceAR(this._tableGame.worldPosByBlockId(c.BLOCK_ID_CURRENT_1))),o=cc.v3(this.node.convertToNodeSpaceAR(this._tableGame.worldPosByBlockId(c.BLOCK_ID_HOLD)));cc.tween(this.hand).repeatForever(cc.tween(this.hand).set({position:t.sub(cc.v3(0,150)),scale:1,opacity:0}).call(function(){return e.hand.active=!0}).delay(.1).parallel(cc.tween().to(.3,{opacity:255}),cc.tween().to(.6,{position:t})).delay(.8).to(.8,{position:o}).to(.8,{opacity:0}).start()).start()},t.prototype.showHandPointRotate=function(){var e=this;cc.Tween.stopAllByTarget(this.hand);var t=cc.v3(this.node.convertToNodeSpaceAR(this._currentPointRotateWorldPos));cc.tween(this.hand).repeatForever(cc.tween(this.hand).set({position:t.sub(cc.v3(0,150)),scale:1,opacity:0}).call(function(){return e.hand.active=!0}).parallel(cc.tween().to(.1,{opacity:255}),cc.tween().to(.3,{position:t})).delay(.3).to(.15,{scale:.9}).to(.15,{scale:1}).delay(.3).to(.3,{opacity:0}).start()).start()},i([p(cc.Node)],t.prototype,"hand",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../CoreGameplayEx/TableGame":"TableGame"}],Helper:[function(e,t,o){"use strict";var r,n;cc._RF.push(t,"9439b3SLHFMNZeSP4R5RnfS","Helper"),Object.defineProperty(o,"__esModule",{value:!0}),o.KDCore=void 0,r=o.KDCore||(o.KDCore={}),(n=cc._decorator).ccclass,n.property,r.isNullObject=function(e){return null==e||null==e||"undefined"==e},r.isNotNullObject=function(e){return!r.isNullObject(e)},r.randomFloat=function(e,t){return Math.random()*(t-e)+e},r.randomInt=function(e,t){return Math.ceil(r.randomFloat(e-1,t))},r.validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},r.floatAction=function(e,t,o,n,i,a){var c=null,l=Math.abs(o-t),s=0,p=0,u=t>o;return c=cc.repeatForever(cc.sequence(cc.callFunc(function(){var t=(new Date).getTime();0==p&&(p=t);var d=t-p;p=t,s+=d;var h=Math.max(0,Math.min(s/(1e3*e),1)),f=o-l*(1-h);u?(f=o-l*(h-1))<=o&&s/1e3>=e&&(f=o,n.stopAction(c),r.isNotNullObject(a)&&a()):f>=o&&s/1e3>=e&&(f=o,n.stopAction(c),r.isNotNullObject(a)&&a()),r.isNotNullObject(i)&&i(f)}),cc.delayTime(1/cc.game.getFrameRate())))},r.setTimeScale=function(e){cc.director.calculateDeltaTime=function(t){t||(t=performance.now()),this._deltaTime=(t-this._lastUpdate)/1e3,this._deltaTime*=e,this._lastUpdate=t}},r.setTagTweenAction=function(e,t){e._finalAction.setTag(t)},r.stopTweenActionByTag=function(e,t){e.stopActionByTag(t)},r.ArrayHelper={removeObject:function(e,t){for(var o=-1,n=0;n<e.length;n++)if(e[n]==t){o=n;break}return r.ArrayHelper.removeAt(e,o)},removeAt:function(e,t){return!(e.length<=t||e.length<0||t<0||(e.splice(t,1),0))},contain:function(e,t){var o=!1;return e.forEach(function(e){e==t&&(o=!0)}),o},quickFindIndex:function(e,t){var o=-1;return e.forEach(function(e,r){e==t&&(o=r)}),o},quickFind:function(e,t){var o=r.ArrayHelper.quickFindIndex(e,t);return o>=0?e[o]:null},findFirstIndex:function(e,t){var o=-1;return e.forEach(function(e,r){t(e)&&o<0&&(o=r)}),o},findFirst:function(e,t){var o=r.ArrayHelper.findFirstIndex(e,t);return o>=0?e[o]:null},findLastIndex:function(e,t){var o=-1;return e.forEach(function(e,r){t(e)&&(o=r)}),o},findLast:function(e,t){var o=r.ArrayHelper.findLastIndex(e,t);return o>=0?e[o]:null},move:function(e,t,o){if(o>=e.length)for(var r=o-e.length+1;r--;)e.push(void 0);return e.splice(o,0,e.splice(t,1)[0]),e},pushAll:function(e,t){return e.concat(t)},swapByIndex:function(e,t,o){if(t==o||t>=e.length||t<0||o>=e.length||o<0)return e;var r=e[t],n=e[o];e[t]=n,e[o]=r},swapByObject:function(e,t,o){var n=r.ArrayHelper.findFirstIndex(e,function(e){return e==t}),i=r.ArrayHelper.findFirstIndex(e,function(e){return e==o});return r.ArrayHelper.swapByIndex(e,n,i)}},r.ScreenHelper={getScreenScaleRatio:function(e,t){null==t&&(t=r.ScreenHelper.isDesignLandscape());var o=r.ScreenHelper.getScreenScaleRatioByDesignResolution(e.designResolution,t);return o>1?1:o},getScreenScaleRatioByDesignResolution:function(e,t){return null==t&&(t=r.ScreenHelper.isDesignLandscape()),t?cc.winSize.height/e.height:cc.winSize.width/e.width},autoFindAndGetScreenScaleRatio:function(e){null==e&&(e=r.ScreenHelper.isDesignLandscape());var t=cc.director.getScene().getComponentInChildren(cc.Canvas);return t?r.ScreenHelper.getScreenScaleRatio(t,e):1},getScreenRatio:function(e){return null==e&&(e=r.ScreenHelper.isDesignLandscape()),e?cc.winSize.width/cc.winSize.height:cc.winSize.height/cc.winSize.width},is12RatioDevice:function(e){return null==e&&(e=r.ScreenHelper.isDesignLandscape()),r.ScreenHelper.getScreenRatio(e)>=1.85},is34RatioDevice:function(e){return null==e&&(e=r.ScreenHelper.isDesignLandscape()),r.ScreenHelper.getScreenRatio(e)<=4/3+.01},isDesignLandscape:function(){var e=cc.director.getScene().getComponentInChildren(cc.Canvas);return e.designResolution.width>e.designResolution.height}},r.SpriteHelper={createSprite:function(e,t,o){var n=new cc.Node,i=n.addComponent(cc.Sprite);return i.spriteFrame=e,i.sizeMode=cc.Sprite.SizeMode.CUSTOM,n.setContentSize(t),r.isNotNullObject(o)&&(n.parent=o),i},addSpriteToNode:function(e,t,o){var r=o.getComponent(cc.Sprite);return r||(r=o.addComponent(cc.Sprite)),r.spriteFrame=e,r.sizeMode=cc.Sprite.SizeMode.CUSTOM,o.setContentSize(t),r},downloadAndUpdateSpriteFromUrl:function(){},loadBase64ImageToSpr:function(e,t,o){void 0===o&&(o=null);var r=new Image;r.onload=function(){var t=new cc.Texture2D;t.initWithElement(r),t.handleLoadedTexture();var n=new cc.SpriteFrame(t);e.spriteFrame=n,o&&(e.sizeMode=cc.Sprite.SizeMode.CUSTOM,e.node.setContentSize(o))}.bind(this),t=(t=(t=t.replace("data:image/png;base64,","")).replace("data:image/jpg;base64,","")).replace("data:image/jpeg;base64,",""),r.src="data:image/png;base64,"+t}},r.AnimationHelper={addSpriteFramesAnimationForNode:function(e,t,o,n,i){void 0===o&&(o=!0),void 0===n&&(n=15),void 0===i&&(i="anim_run");var a=e.getComponent(cc.Sprite);a||(a=e.addComponent(cc.Sprite)),t.sort(function(e,t){var o=e.name.split("_"),n=r.StringHelper.formatAddZeroStringNumber(o[o.length-1]),i=t.name.split("_"),a=r.StringHelper.formatAddZeroStringNumber(i[i.length-1]);return n.localeCompare(a)});for(var c=e.addComponent(cc.Animation),l=[t[0]],s=1;s<t.length;s++)l.push(t[s]);a.spriteFrame=t[0];var p=cc.AnimationClip.createWithSpriteFrames(l,n);return p.name=i,p.wrapMode=cc.WrapMode.Loop,c.addClip(p),o&&c.play(i),c},addSpineAnimationForNode:function(e,t,o,r,n){void 0===o&&(o=!0),void 0===r&&(r=""),void 0===n&&(n=!0),e.getComponent(cc.Sprite)&&e.getComponent(cc.Sprite).destroy();var i=e.getComponent(sp.Skeleton);return i||(i=e.addComponent(sp.Skeleton)),i.skeletonData=t,o&&i.setAnimation(0,r,n),i},runActionFloatAddValueForLabel:function(e,t,o,n,i,a){void 0===n&&(n=!0),void 0===i&&(i="{0}"),void 0===a&&(a=!1);var c=n?parseInt(e.string.replace(/,/gi,"")):parseFloat(e.string.replace(/,/gi,""));r.AnimationHelper.runActionFloatForLabel(e,c,c+t,o,n,i,a)},runActionFloatForLabel:function(e,t,o,n,i,a,c){void 0===i&&(i=!0),void 0===a&&(a="{0}"),void 0===c&&(c=!1),e.string=i?Math.floor(t).toString():t.toString();var l=r.floatAction(n,t,o,e.node,function(t){var o=i?Math.floor(t).toString():t.toString();o=c&&i?r.StringHelper.formatMoney(Math.floor(t)):o,e.string=r.StringHelper.format(a,[o])},null);l.setTag(4526763),e.node.stopActionByTag(4526763),e.node.runAction(l)}},r.StringHelper={format:function(e,t){var o=e;for(var r in t)o=o.replace("{"+r+"}",t[r]);return o},formatMoney:function(e,t,o){return void 0===t&&(t=0),void 0===o&&(o=","),e.toFixed(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,o)},formatWithReplaced:function(e,t,o,r){void 0===t&&(t=2),void 0===o&&(o="*"),void 0===r&&(r=-1);var n=e.length,i=r;if(n>t){for(var a=e.substring(0,t),c=0;c<n-t;c++)(r>=0&&i>0||r<0)&&(a+=o,i--);return a}return e},formatAddZeroStringNumber:function(e,t){return void 0===t&&(t=2),("0"+e).slice(-t)},stringToBoolean:function(e){return Boolean(JSON.parse(e))},booleanToString:function(e){return e.toString()},commarizeNumber:function(e,t){void 0===t&&(t=0);var o=!1;if(e<0&&(o=!0,e=-e),e>=1e3){var r=3*Math.floor((e.toFixed(0).length-1)/3);return(e/Number("1e"+r)).toFixed(t)+["k","M","B","T"][Math.floor(r/3)-1]}return(o?"-":"")+e.toLocaleString()},isNumeric:function(e){return!isNaN(e)},replaceAll:function(e,t,o){return e.replace(new RegExp(t,"g"),o)},create_UUID:function(e){var t=(new Date).getTime(),o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var o=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?o:3&o|8).toString(16)});return e?o.slice(0,e):o}},r.DateTimeHelper={isDifferenceDate:function(e,t){var o=new Date(e),r=new Date(t);return o.getFullYear()!=r.getFullYear()||o.getMonth()!=r.getMonth()||o.getDate()!=r.getDate()},isFurtureDate:function(e,t){var o=new Date(e),r=new Date(t);return r.getDate()>o.getDate()&&r.getMonth()>=o.getMonth()&&r.getFullYear()>=o.getFullYear()||r.getMonth()>o.getMonth()||r.getFullYear()>o.getFullYear()},isDifferenceWeekBeginAtMonday:function(e,t){var o=r.DateTimeHelper.getMonday(e),n=r.DateTimeHelper.getMonday(t);return r.DateTimeHelper.isDifferenceDate(o.getTime(),n.getTime())},getMonday:function(e){var t=new Date(e),o=t.getDay(),r=t.getDate()-o+(0==o?-6:1);return new Date(t.setDate(r))},convertMSToDayHouseMinuteSecond:function(e){var t,o,r,n;return n=e%1e3,r=Math.floor(e/1e3),o=Math.floor(r/60),r%=60,t=Math.floor(o/60),o%=60,{day:Math.floor(t/24),hour:t%=24,minute:o,seconds:r,milis:n}}},cc._RF.pop()},{}],IAPHelper:[function(e,t,o){"use strict";cc._RF.push(t,"c0588Taf3pGKq1io9u1FOCZ","IAPHelper"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./IIAPItem"),n=cc._decorator,i=(n.ccclass,n.property,"org/cocos2dx/javascript/natives/iap/IAPBridge"),a=new(function(){function e(){this.packagesData=[],this._callbackPurchase=null,this._callbackRestoreCompleted=null,this._listener=null,this._isUsingSdkbox=!1}return e.prototype.init=function(e,t,o,r,n){void 0===r&&(r=!1),this.packagesData=e,this._listener=o,cc.sys.isNative&&jsb&&(n&&"undefined"!=typeof sdkbox&&void 0!==sdkbox.IAP?(this._isUsingSdkbox=!0,r&&(sdkbox.IAP.setAutoFinishTransaction(!1),sdkbox.IAP.enableUserSideVerification(!0)),sdkbox.IAP.setListener(this),sdkbox.IAP.init(n)):cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("IAPHelperBrigde","init:",t):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(i,"init","()V"))},e.prototype.onInitComplete=function(){if(cc.log("IAP","JS onInitComplete"),cc.sys.isNative&&jsb)if(this._isUsingSdkbox)sdkbox.IAP.refresh();else if(cc.sys.os===cc.sys.OS_IOS){var e=this.packagesData.map(function(e){return e.packageId}).join(","),t=this.packagesData.filter(function(e){return e.type==r.IAPPackageType.Subs}).map(function(e){return e.packageId}).join(",");jsb.reflection.callStaticMethod("IAPHelperBrigde","fetchItemsByString:subscriptionIds:",e,t)}else if(cc.sys.os===cc.sys.OS_ANDROID){var o=JSON.stringify(this.packagesData.map(function(e){return{id:e.packageId,type:e.type}}));jsb.reflection.callStaticMethod(i,"fetchItemsByString","(Ljava/lang/String;)V",o)}},e.prototype.onSuccess=function(e){var t;(t=this.packagesData.find(function(t){return t.packageId==e}))?(this.processAfterPurchaseSuccessed(t),this._callbackPurchase&&(this._callbackPurchase(!0,t),this._callbackPurchase=null)):cc.log("PURCHASE SUCCESS FAILED ITEMS")},e.prototype.onFailure=function(e){var t;cc.log("PURCHASE ON FAILURE"),t=this.packagesData.find(function(t){return t.packageId==e}),this._listener&&this._listener.purchaseFailed(t),this._callbackPurchase&&(this._callbackPurchase(!1,t),this._callbackPurchase=null)},e.prototype.onCanceled=function(e){var t;t=this.packagesData.find(function(t){return t.packageId==e}),this._listener&&this._listener.purchaseFailed(t),this._callbackPurchase&&(this._callbackPurchase(!1,t),this._callbackPurchase=null)},e.prototype.onRestored=function(e){var t;t=this.packagesData.find(function(t){return t.packageId==e}),this.processAfterPurchaseSuccessed(t)},e.prototype.onRestoreComplete=function(e,t){this.onRestoreCompleted(e,t)},e.prototype.onRestoreCompleted=function(e,t){this._listener&&this._listener.onRestoreCompleted(e,t),this._callbackRestoreCompleted&&(this._callbackRestoreCompleted(e,t),this._callbackRestoreCompleted=null)},e.prototype.onProductRequestSuccess=function(e){var t=this;e&&(e=JSON.parse(e),console.log(e),e.forEach(function(e){cc.sys.os==cc.sys.OS_IOS&&t.packagesData.find(function(t){return t.packageId==e.productIdentifier})}))},e.prototype.onProductRequestFailure=function(){},e.prototype.onSubscriptionNotValid=function(e){var t=this.packagesData.find(function(t){return t.packageId==e});this._listener&&this._listener.onSubscriptionNotValid(t)},e.prototype.restore=function(e){this._callbackRestoreCompleted=e,cc.sys.isNative&&jsb&&(this._isUsingSdkbox?sdkbox.IAP.restore():cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("IAPHelperBrigde","restore"):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(i,"restore","()V"))},e.prototype.purchase=function(e,t){var o=this.packagesData.find(function(t){return t.packageId==e});if(this._callbackPurchase=t,cc.sys.isMobile&&cc.sys.isNative){if(!o)return cc.error("PURCHASE: PACKAGE ID NOT FOUND"),t&&t(!1,null),void(this._callbackPurchase=null);cc.sys.isNative&&jsb&&(this._isUsingSdkbox?sdkbox.IAP.purchase(e):cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("IAPHelperBrigde","purchaseItem:",e):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(i,"purchaseItem","(Ljava/lang/String;)V",e))}else o&&(this.processAfterPurchaseSuccessed(o),t&&(this._callbackPurchase(!0,o),this._callbackPurchase=null))},e.prototype.finishTransaction=function(){cc.sys.isNative&&jsb&&(this._isUsingSdkbox||cc.sys.os===cc.sys.OS_IOS||(cc.sys.os,cc.sys.OS_ANDROID))},e.prototype.processAfterPurchaseSuccessed=function(e){e&&this._listener&&this._listener.processPurchaseSuccessed(e)},e}());cc.IAPHelper=a,o.default=a,cc._RF.pop()},{"./IIAPItem":"IIAPItem"}],IIAPItem:[function(e,t,o){"use strict";cc._RF.push(t,"f8f0aqzs6hEUqXhseyYxNij","IIAPItem"),Object.defineProperty(o,"__esModule",{value:!0}),o.IAPPackageType=void 0,function(e){e.Cons="Cons",e.NonCons="NonCons",e.Subs="Subs"}(o.IAPPackageType||(o.IAPPackageType={})),cc._RF.pop()},{}],IStatisticData:[function(e,t,o){"use strict";cc._RF.push(t,"1f333QozrxICY8eykPLlbd0","IStatisticData"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ITableGame:[function(e,t,o){"use strict";cc._RF.push(t,"8d15fD+lRVNdoeRrlfqc1MU","ITableGame"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator;r.ccclass,r.property,cc._RF.pop()},{}],ItemScriptLoad:[function(e,t,o){"use strict";cc._RF.push(t,"006camDVIZK1pOM0UWnOA0A","ItemScriptLoad");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelName=null,t.groupSelected=null,t}return n(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.updateItem(e)},enumerable:!1,configurable:!0}),t.prototype.showSelectEffect=function(){this.groupSelected.active=!0},t.prototype.hideSelectEffect=function(){this.groupSelected.active=!1},t.prototype.updateItem=function(e){this.labelName.string=e.name},i([l(cc.Label)],t.prototype,"labelName",void 0),i([l(cc.Node)],t.prototype,"groupSelected",void 0),i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],ItemSelectHand:[function(e,t,o){"use strict";cc._RF.push(t,"2bf14Y6HRJLPa315wDpzqc/","ItemSelectHand");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprHand=null,t.sprFramesHandById=[],t.selectedEffNode=null,t}return n(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e,this.hideSelectedEff(),this.setup(e)},enumerable:!1,configurable:!0}),t.prototype.showSelectedEff=function(){this.selectedEffNode.active=!0},t.prototype.hideSelectedEff=function(){this.selectedEffNode.active=!1},t.prototype.setup=function(e){e<0?this.sprHand.node.active=!1:(this.sprHand.node.active=!0,this.sprHand.spriteFrame=this.sprFramesHandById[e])},i([l(cc.Sprite)],t.prototype,"sprHand",void 0),i([l([cc.SpriteFrame])],t.prototype,"sprFramesHandById",void 0),i([l(cc.Node)],t.prototype,"selectedEffNode",void 0),i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],KD3DButton:[function(e,t,o){"use strict";cc._RF.push(t,"a2d98BQ/bpIhKwMdy0iFGko","KD3DButton");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.motionNode=null,t.motionDistanceY=-10,t.motionDuration=.1,t.disableLayerNode=null,t.swallowTouch=!0,t._interactable=!0,t.clickEvents=[],t.standardPosMotionNode=cc.Vec2.ZERO,t.isPress=!1,t}return n(t,e),Object.defineProperty(t.prototype,"interactable",{get:function(){return this._interactable},set:function(e){return this.motionNode.stopAllActions(),this.motionNode.position=e?this.standardPosMotionNode:this.standardPosMotionNode.add(cc.v2(0,this.motionDistanceY)),this.disableLayerNode&&(this.disableLayerNode.active=!e),this._interactable=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"MotionNode",{get:function(){return this.motionNode},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.standardPosMotionNode=this.motionNode.position},t.prototype.start=function(){this.registerListeners()},t.prototype.registerListeners=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.ontouchstart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.ontouchmove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.ontouchend,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.ontouchcancel,this),this.node._touchListener.setSwallowTouches(this.swallowTouch)},t.prototype.convertTouchPosToLocal=function(e){return void 0!==this.node.parent?this.node.parent.convertToNodeSpaceAR(e):this.node.convertToNodeSpaceAR(e)},t.prototype.ontouchstart=function(){return!!this.interactable&&(this.startMotionToPress(),this.isPress=!0,!0)},t.prototype.ontouchmove=function(e){if(!this.interactable)return!1;this.node._hitTest(e.touch.getLocation())?this.startMotionToPress(!0):this.startMotionToNormal(!0),e.stopPropagation()},t.prototype.ontouchend=function(e){var t=this;this.isPress&&(this.node._hitTest(e.touch.getLocation())&&this.clickEvents.forEach(function(e){return e.emit([t])}),this.interactable&&this.startMotionToNormal(),this.isPress=!1)},t.prototype.ontouchcancel=function(){this.isPress&&(this.interactable&&this.startMotionToNormal(),this.isPress=!1)},t.prototype.startMotionToPress=function(e){this.motionNode.stopAllActions();var t=cc.v3(this.standardPosMotionNode.add(cc.v2(0,this.motionDistanceY)));e?this.motionNode.position=t:this.motionNode.runAction(cc.moveTo(this.motionDuration,cc.v2(t)))},t.prototype.startMotionToNormal=function(e){this.motionNode.stopAllActions(),e?this.motionNode.position=cc.v3(this.standardPosMotionNode):this.motionNode.runAction(cc.moveTo(this.motionDuration,this.standardPosMotionNode))},i([l(cc.Node)],t.prototype,"motionNode",void 0),i([l(cc.Float)],t.prototype,"motionDistanceY",void 0),i([l(cc.Float)],t.prototype,"motionDuration",void 0),i([l(cc.Node)],t.prototype,"disableLayerNode",void 0),i([l(cc.Boolean)],t.prototype,"swallowTouch",void 0),i([l()],t.prototype,"_interactable",void 0),i([l],t.prototype,"interactable",null),i([l([cc.Component.EventHandler])],t.prototype,"clickEvents",void 0),i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],KDBasePopupScaleFullScreen:[function(e,t,o){"use strict";cc._RF.push(t,"2cab2jJumJGRKoVpQc1+Qg/","KDBasePopupScaleFullScreen");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./KDBasePopup"),c=cc._decorator,l=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onBeforeShow=function(){e.prototype.onBeforeShow.call(this),this.container.scale=1.3,this.container.opacity=0,this.darkLayer.scale=1.3,this.darkLayer.opacity=0},t.prototype.runActionShow=function(e){var t=this;this.darkLayer.runAction(cc.spawn(cc.scaleTo(.4,1),cc.fadeTo(.4,this.darklayerOpacity))),this.container.scale=1,this.container.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){t.container.scale=1.3}),cc.spawn(cc.scaleTo(.4,1).easing(cc.easeCubicActionOut()),cc.fadeIn(.3)),cc.callFunc(e)))},t.prototype.runActionHide=function(e){this.darkLayer.runAction(cc.spawn(cc.scaleTo(.3,1.3),cc.fadeOut(.3))),this.container.runAction(cc.sequence(cc.spawn(cc.scaleTo(.3,1.3).easing(cc.easeCubicActionOut()),cc.fadeOut(.3)),cc.callFunc(e)))},i([l],t)}(a.default));o.default=s,cc._RF.pop()},{"./KDBasePopup":"KDBasePopup"}],KDBasePopupScale:[function(e,t,o){"use strict";cc._RF.push(t,"94addKRc3BAvao4QJ3TqvfU","KDBasePopupScale");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./KDBasePopup"),c=cc._decorator,l=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onBeforeShow=function(){e.prototype.onBeforeShow.call(this),this.container.scale=.4,this.container.opacity=0,this.darkLayer.opacity=0},t.prototype.runActionShow=function(e){var t=this;this.darkLayer.runAction(cc.fadeTo(.4,this.darklayerOpacity)),this.container.scale=1,this.container.runAction(cc.sequence(cc.delayTime(.01),cc.callFunc(function(){t.container.scale=.4}),cc.spawn(cc.scaleTo(.4,1).easing(cc.easeBackOut()),cc.fadeIn(.3)),cc.callFunc(e)))},t.prototype.runActionHide=function(e){this.darkLayer.runAction(cc.fadeOut(.3)),this.container.runAction(cc.sequence(cc.spawn(cc.scaleTo(.4,.4).easing(cc.easeCubicActionIn()),cc.fadeOut(.3)),cc.callFunc(e)))},i([l],t)}(a.default));o.default=s,cc._RF.pop()},{"./KDBasePopup":"KDBasePopup"}],KDBasePopup:[function(e,t,o){"use strict";cc._RF.push(t,"163faFHl/5B25wvk2aDtShK","KDBasePopup");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ePopupState=void 0;var a,c=cc._decorator,l=c.ccclass,s=c.property;(function(e){e[e.Opening=0]="Opening",e[e.Opened=1]="Opened",e[e.Closing=2]="Closing",e[e.Closed=3]="Closed"})(a=o.ePopupState||(o.ePopupState={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.darkLayer=null,t.container=null,t.isHideOnClickedDarkLayer=!1,t.darklayerOpacity=200,t.isFirstSetup=!1,t.eventsAfterShow=Array(),t.eventsBeforeHide=Array(),t.eventsAfterHide=Array(),t.layerSwallowTouch=null,t._popupState=a.Closed,t}return n(t,e),Object.defineProperty(t.prototype,"popupState",{get:function(){return this._popupState},enumerable:!1,configurable:!0}),t.prototype.show=function(){var e=this;this._popupState!=a.Opened&&this._popupState!=a.Opening&&(this.checkAndCallFirstSetup(),this.onBeforeShow(),this.node.active=!0,this.runActionShow(function(){e.onAfterShow()}))},t.prototype.hide=function(){var e=this;this._popupState!=a.Closed&&this._popupState!=a.Closing&&(this.onBeforeHide(),this.runActionHide(function(){e.node.active=!1,e.onAfterHide()}))},t.prototype.addOnceAfterShow=function(e){this.eventsAfterShow.push(e)},t.prototype.addOnceBeforeHide=function(e){this.eventsBeforeHide.push(e)},t.prototype.addOnceAfterHide=function(e){this.eventsAfterHide.push(e)},t.prototype.checkAndCallFirstSetup=function(){this.isFirstSetup||(this.firstSetup(),this.isFirstSetup=!0)},t.prototype.firstSetup=function(){this.darkLayer.on("click",this.onDarkLayerClicked,this),this.darkLayer.opacity=this.darklayerOpacity,this.createLayerSwallowTouch()},t.prototype.onDarkLayerClicked=function(){this.isHideOnClickedDarkLayer&&this.hide()},t.prototype.onBeforeShow=function(){this._popupState=a.Opening},t.prototype.onAfterShow=function(){var e=this;this._popupState=a.Opened,this.eventsAfterShow.forEach(function(t){t&&t(e)}),this.eventsAfterShow=[]},t.prototype.onBeforeHide=function(){var e=this;this._popupState=a.Closing,this.eventsBeforeHide.forEach(function(t){t&&t(e)}),this.eventsBeforeHide=[],this.setActiveLayerSwallowTouch(!0)},t.prototype.onAfterHide=function(){var e=this;this._popupState=a.Closed,this.eventsAfterHide.forEach(function(t){t&&t(e)}),this.eventsAfterHide=[],this.setActiveLayerSwallowTouch(!1)},t.prototype.setActiveLayerSwallowTouch=function(e){this.layerSwallowTouch&&(this.layerSwallowTouch.active=e)},t.prototype.createLayerSwallowTouch=function(){this.layerSwallowTouch=new cc.Node,this.layerSwallowTouch.parent=this.node,this.layerSwallowTouch.position=cc.Vec3.ZERO;var e=this.layerSwallowTouch.addComponent(cc.Widget);e.isAlignTop=!0,e.isAlignBottom=!0,e.isAlignLeft=!0,e.isAlignRight=!0,e.top=0,e.bottom=0,e.right=0,e.left=0,this.layerSwallowTouch.addComponent(cc.Button),this.layerSwallowTouch.active=!1},t.prototype.runActionShow=function(e){e&&e()},t.prototype.runActionHide=function(e){e&&e()},i([s(cc.Node)],t.prototype,"darkLayer",void 0),i([s(cc.Node)],t.prototype,"container",void 0),i([s(cc.Boolean)],t.prototype,"isHideOnClickedDarkLayer",void 0),i([s(cc.Float)],t.prototype,"darklayerOpacity",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],KDBaseTabContent:[function(e,t,o){"use strict";cc._RF.push(t,"7f37a2qYyBJkra7sjaK7wVQ","KDBaseTabContent");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.KDBaseTabContent=void 0;var a=cc._decorator,c=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.show=function(){this.reset(),this.prepareToShow(),this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},t.prototype.reset=function(){},t.prototype.prepareToShow=function(){},i([c],t)}(cc.Component));o.KDBaseTabContent=l,cc._RF.pop()},{}],KDDevicePropertiesHelper:[function(e,t,o){"use strict";cc._RF.push(t,"9bc34OyBSpKhbdEIlUdZp9D","KDDevicePropertiesHelper");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Core/Helper"),c=cc._decorator,l=c.ccclass,s=c.property,p=function(){function e(){this.target=null,this.addPosition=cc.Vec3.ZERO,this.addSize=cc.Size.ZERO,this.scaleMultiple=1,this.isAutoScaleBaseOnResolution=!1}return e.prototype.invokeAdjust=function(){this.target&&(this.target.position=this.target.position.add(this.addPosition),this.target.setContentSize(this.target.width+this.addSize.width,this.target.height+this.addSize.height),this.isAutoScaleBaseOnResolution?this.target.scale*=a.KDCore.ScreenHelper.autoFindAndGetScreenScaleRatio():this.target.scale*=this.scaleMultiple)},i([s(cc.Node)],e.prototype,"target",void 0),i([s(cc.Vec3)],e.prototype,"addPosition",void 0),i([s(cc.Size)],e.prototype,"addSize",void 0),i([s({type:cc.Float,visible:function(){return!this.isAutoScaleBaseOnResolution}})],e.prototype,"scaleMultiple",void 0),i([s(cc.Boolean)],e.prototype,"isAutoScaleBaseOnResolution",void 0),i([l("TargetProperties")],e)}(),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isCustome12Ratio=!1,t.custome12Ratio=2,t.device12Ratio=[],t.device34Ratio=[],t.device916Ratio=[],t.invokeOnStart=!1,t}return n(t,e),t.prototype.onLoad=function(){this.invokeOnStart||this.invokeAdjustAll()},t.prototype.start=function(){this.invokeOnStart&&this.invokeAdjustAll()},t.prototype.invokeAdjustAll=function(){(this.isCustome12Ratio?a.KDCore.ScreenHelper.getScreenRatio()>=this.custome12Ratio:a.KDCore.ScreenHelper.is12RatioDevice())?this.device12Ratio.forEach(function(e){return e.invokeAdjust()}):a.KDCore.ScreenHelper.is34RatioDevice()?this.device34Ratio.forEach(function(e){return e.invokeAdjust()}):this.device916Ratio.forEach(function(e){return e.invokeAdjust()})},i([s(cc.Boolean)],t.prototype,"isCustome12Ratio",void 0),i([s({type:cc.Float,visible:function(){return this.isCustome12Ratio},range:[1.95,2.6]})],t.prototype,"custome12Ratio",void 0),i([s([p])],t.prototype,"device12Ratio",void 0),i([s([p])],t.prototype,"device34Ratio",void 0),i([s([p])],t.prototype,"device916Ratio",void 0),i([s({tooltip:"if false, adjust code will invoke in onLoad callback"})],t.prototype,"invokeOnStart",void 0),i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Core/Helper":"Helper"}],KDDragCom:[function(e,t,o){"use strict";cc._RF.push(t,"56ee4bP3FxHHKF3i2hFHNVe","KDDragCom");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isDragging=!1,t.currentTouch=null,t.checkAvailableTouch=void 0,t.onTouchStartCB=void 0,t.onTouchMoveCB=void 0,t.onTouchEndCB=void 0,t.onTouchCancelCB=void 0,t.distanceFromTouch=cc.Vec2.ZERO,t.durationMoveToTouch=0,t.defaultContentSize=cc.Size.ZERO,t}var o;return n(t,e),o=t,t.prototype.onLoad=function(){},t.prototype.start=function(){this.defaultContentSize=cc.size(this.node.getContentSize()),this.registerListeners()},t.prototype.stopDrag=function(){this._isDragging=!1,this.ontouchcancel(void 0)},t.prototype.registerListeners=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.ontouchstart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.ontouchmove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.ontouchend,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.ontouchend,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.setEnableTouch=function(e){this.defaultContentSize=cc.size(this.node.getContentSize()),this.enabled=e},t.prototype.cancelDragging=function(){this.ontouchcancel(void 0)},t.prototype.convertTouchPosToLocal=function(e){return void 0!==this.node.parent?this.node.parent.convertToNodeSpaceAR(e):this.node.convertToNodeSpaceAR(e)},t.prototype.ontouchstart=function(e){if(!this.enabled)return!1;if(this._isDragging)return!1;this._isDragging=!1,this.currentTouch=null;var t=cc.v2(this.convertTouchPosToLocal(e.touch.getStartLocation()));if(void 0===this.checkAvailableTouch||this.checkAvailableTouch(this.node,t)){var o=cc.moveBy(this.durationMoveToTouch,t.add(this.distanceFromTouch).subtract(this.node.getPosition()));this.node.runAction(o),void 0!==this.onTouchCancelCB&&this.onTouchStartCB(this.node,t),this.currentTouch=e.touch,this._isDragging=!0}return this._isDragging},t.prototype.ontouchmove=function(e){if(this.enabled&&this._isDragging&&e.touch==this.currentTouch){var t=this.convertTouchPosToLocal(e.touch.getLocation()),r=cc.Vec2.distance(cc.Vec2.ZERO,e.getDelta()),n=cc.moveBy(r/1300,e.getDelta());n.setTag(o.TAG_ACTION_MOVE),this.node.runAction(n),void 0!==this.onTouchMoveCB&&this.onTouchMoveCB(this.node,t)}},t.prototype.ontouchend=function(e){if(this.enabled&&this._isDragging&&e.touch==this.currentTouch){this.node.stopAllActions(),this._isDragging=!1,this.currentTouch=null;var t=this.convertTouchPosToLocal(e.touch.getLocation());this.node.position=this.node.position.add(cc.v3(e.getDelta())),void 0!==this.onTouchEndCB&&this.onTouchEndCB(this.node,t)}},t.prototype.ontouchcancel=function(e){if(this.enabled&&this._isDragging&&(this.node.stopAllActions(),this._isDragging=!1,this.currentTouch=null,void 0!==this.onTouchCancelCB)){var t=cc.Vec2.ZERO;void 0!==e&&(t=this.convertTouchPosToLocal(e.touch.getLocation())),this.onTouchCancelCB(this.node,t)}},t.TAG_ACTION_MOVE=11111,i([l(cc.Vec2)],t.prototype,"distanceFromTouch",void 0),i([l(cc.Float)],t.prototype,"durationMoveToTouch",void 0),i([l(cc.Size)],t.prototype,"defaultContentSize",void 0),o=i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],KDDropDownItem:[function(e,t,o){"use strict";cc._RF.push(t,"c96acy5naNCjYxCBhMx/fSc","KDDropDownItem");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.KDDropDownItemData=void 0;var a=e("../../Core/Helper"),c=cc._decorator,l=c.ccclass,s=c.property;o.KDDropDownItemData=function(e,t,o){this.id=e,this.str=t,this.extraInfo=o};var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelTemplate=null,t}return n(t,e),t.prototype.setup=function(e){a.KDCore.isNotNullObject(e)&&a.KDCore.isNotNullObject(e.str)&&a.KDCore.isNotNullObject(this.labelTemplate)&&(this.labelTemplate.string=e.str)},i([s(cc.Label)],t.prototype,"labelTemplate",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Core/Helper":"Helper"}],KDDropDownListView:[function(e,t,o){"use strict";cc._RF.push(t,"d1a005o2wFIyr1kN7gj26Z9","KDDropDownListView");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./KDDropDownItem"),c=e("../../Core/Helper"),l=cc._decorator,s=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.placeHolder=null,t.listContainer=null,t.itemsContent=null,t.templateItem=null,t.datas=[],t.representItem=null,t.selectedItem=null,t.callbackSelectedItem=null,t}return n(t,e),Object.defineProperty(t.prototype,"CurrentSelectedItem",{get:function(){return this.selectedItem},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.node.on("click",this.onDropDownClicked,this)},t.prototype.addItem=function(e){this.datas.push(e)},t.prototype.addItems=function(e){var t=this;e.forEach(function(e){t.addItem(e)})},t.prototype.clear=function(){this.datas.length=0,this.reset()},t.prototype.reset=function(){c.KDCore.isNotNullObject(this.representItem)&&(this.representItem.node.active=!1),this.placeHolder.active=!0,this.selectedItem=null},t.prototype.reload=function(){var e=this;this.itemsContent.destroyAllChildren(),this.datas.forEach(function(t,o){var r=cc.instantiate(e.templateItem.node);r.active=!0,r.parent=e.itemsContent,r.getComponent(a.default).setup(t),r.on("click",function(){e.onSelectedItem(o)},e)})},t.prototype.showList=function(){this.listContainer.active=!0},t.prototype.hideList=function(){this.listContainer.active=!1},t.prototype.selecItemById=function(e){this.onSelectedItem(e)},t.prototype.onSelectedItem=function(e){if(c.KDCore.isNullObject(this.representItem)){var t=cc.instantiate(this.templateItem.node);t.getComponent(cc.Button).enabled=!1,t.active=!0,t.parent=this.node,this.representItem=t.getComponent(a.default)}this.representItem.node.active=!0,this.placeHolder.active=!1,this.representItem.setup(this.datas[e]),this.selectedItem=this.datas[e],this.hideList(),c.KDCore.isNotNullObject(this.callbackSelectedItem)&&this.callbackSelectedItem(this.datas[e])},t.prototype.onDropDownClicked=function(){this.listContainer.active?this.hideList():this.showList()},i([p(cc.Node)],t.prototype,"placeHolder",void 0),i([p(cc.Node)],t.prototype,"listContainer",void 0),i([p(cc.Node)],t.prototype,"itemsContent",void 0),i([p(a.default)],t.prototype,"templateItem",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Core/Helper":"Helper","./KDDropDownItem":"KDDropDownItem"}],KDEditboxGroupKeyboardHandle:[function(e,t,o){"use strict";cc._RF.push(t,"e6b03qxRMdJarFTE5E417Ir","KDEditboxGroupKeyboardHandle");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Core/Helper"),c=cc._decorator,l=c.ccclass,s=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editBoxs=[],t.editboxEnableFocus=null,t.enterEvents=[],t.currentIndexFocused=-1,t}return n(t,e),t.prototype.onLoad=function(){var e=this;this.editBoxs.forEach(function(t){t.returnType=cc.EditBox.KeyboardReturnType.NEXT;var o=new cc.Component.EventHandler;o.target=e.node,o.component="KDEditboxGroupKeyboardHandle",o.handler="eventHandleBegan",o.customEventData=t.tabIndex.toString(),t.editingDidBegan.push(o);var r=new cc.Component.EventHandler;r.target=e.node,r.component="KDEditboxGroupKeyboardHandle",r.handler="editingDidEnded",r.customEventData=t.tabIndex.toString(),t.editingDidEnded.push(r);var n=new cc.Component.EventHandler;n.target=e.node,n.component="KDEditboxGroupKeyboardHandle",n.handler="editingDidReturn",n.customEventData=t.tabIndex.toString(),t.editingReturn.push(n)})},t.prototype.onEnable=function(){var e=this.editboxEnableFocus;a.KDCore.isNullObject(e)&&this.editBoxs.length>0&&(e=this.editBoxs[0]),a.KDCore.isNotNullObject(e)},t.prototype.onDisable=function(){this.currentIndexFocused=-1},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDownOfEditBox,this)},t.prototype.eventHandleBegan=function(e){this.currentIndexFocused=a.KDCore.ArrayHelper.findFirstIndex(this.editBoxs,function(t){return t==e})},t.prototype.editingDidEnded=function(){},t.prototype.editingDidReturn=function(){var e=this.currentIndexFocused==this.editBoxs.length-1?0:this.currentIndexFocused+1;this.checkAndFocusEditBox(this.editBoxs[e])},t.prototype.checkAndFocusEditBox=function(e){this.scheduleOnce(function(){e.enabled&&e.setFocus()},.05)},t.prototype.onKeyDownOfEditBox=function(){},t.prototype.onKeyUp=function(e){if(this.node.active)switch(e.keyCode){case cc.macro.KEY.enter:this.enterEvents.forEach(function(e){return e.emit([])})}},t.prototype.currentEditboxIndexFocusing=function(){var e=-1;return this.editBoxs.forEach(function(t,o){t.isFocused&&(e=o)}),e},i([s([cc.EditBox])],t.prototype,"editBoxs",void 0),i([s(cc.EditBox)],t.prototype,"editboxEnableFocus",void 0),i([s([cc.Component.EventHandler])],t.prototype,"enterEvents",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Core/Helper":"Helper"}],KDOnLoadAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"e0e0950z/BLn6U8cWWMQWDI","KDOnLoadAnimation");var r,n,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.FadeInThenScaleBounceOut=0]="FadeInThenScaleBounceOut"}(n||(n={}));var c=cc.Enum(n),l=cc._decorator,s=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animType=n.FadeInThenScaleBounceOut,t.totalDuration=1,t.delay=0,t}return i(t,e),t.prototype.onLoad=function(){this.runAnm()},t.prototype.runAnm=function(){switch(this.animType){case n.FadeInThenScaleBounceOut:this.fadeInThenScaleBounceOut()}},t.prototype.fadeInThenScaleBounceOut=function(){var e=this.delay;e<0&&(e=0);var t=this.node.scale;this.node.opacity=0,this.node.scale=.7*t,this.node.runAction(cc.sequence(cc.delayTime(e),cc.fadeIn(this.totalDuration/4),cc.sequence(cc.scaleTo(this.totalDuration/4,t+.1),cc.scaleTo(this.totalDuration/4,t-.15),cc.scaleTo(2*this.totalDuration/4,t)).easing(cc.easeBounceOut())))},a([p({type:c})],t.prototype,"animType",void 0),a([p(cc.Float)],t.prototype,"totalDuration",void 0),a([p(cc.Float)],t.prototype,"delay",void 0),a([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],KDScreenShotUtil:[function(e,t,o){"use strict";cc._RF.push(t,"cbfb2/LdPNGMZJ5X0F/6RIW","KDScreenShotUtil"),Object.defineProperty(o,"__esModule",{value:!0});var r=new(function(){function e(){}return e.prototype.screenShot=function(e,t,o){void 0===e&&(e=cc.winSize),void 0===t&&(t=cc.v2(cc.winSize.width/2,cc.winSize.height/2)),void 0===o&&(o=4294967295);var r=new cc.RenderTexture;r.initWithSize(e.width,e.height,cc.gfx.RB_FMT_S8);var n=new cc.Node;n.setPosition(t),n.parent=cc.director.getScene();var i=n.addComponent(cc.Camera);return i.cullingMask=o,i.targetTexture=r,i.zoomRatio=cc.winSize.height/e.height,i.render(),n.destroy(),r},e.prototype.convertRenderTextureDataToSpriteFrame=function(e){var t=new cc.Texture2D;t.initWithData(e.readPixels(),16,e.width,e.height);var o=new cc.SpriteFrame;return o.setFlipY(!0),o.setTexture(t),o},e.prototype.screenShotWithScale=function(e){return this.screenShot(cc.size(cc.winSize.width*e,cc.winSize.height*e))},e}());o.default=r,cc._RF.pop()},{}],KDTabView:[function(e,t,o){"use strict";cc._RF.push(t,"15f4cU5UMJCm7IjuBHdFaBE","KDTabView");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.KDTabView=void 0;var a=e("./KDBaseTabContent"),c=e("../../Core/Helper"),l=cc._decorator,s=l.ccclass,p=l.property,u=function(){function e(){this.button=null,this.titleGroup=null,this.tabContent=null}return i([p(cc.Button)],e.prototype,"button",void 0),i([p(cc.Node)],e.prototype,"titleGroup",void 0),i([p(a.KDBaseTabContent)],e.prototype,"tabContent",void 0),i([s("Margin")],e)}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.colorTitleNormal=null,t.colorTitleSelected=null,t.tabs=[],t.firstTabAutoShow=0,t.onChangedTab=[],t.isShowTabCalled=!1,t}return n(t,e),t.prototype.onLoad=function(){var e=this;this.tabs.forEach(function(t){t.button.node.on("click",function(){e.showTab(t.tabContent)},e)}),this.isShowTabCalled||this.showTabByIndex(this.firstTabAutoShow),this.tabs.forEach(function(e){return e.button.interactable=e.button.interactable})},t.prototype.showTabByIndex=function(e){this.showTab(this.tabs[e].tabContent)},t.prototype.getTabByIndex=function(e){return this.tabs[e].tabContent},t.prototype.getAllTabs=function(){var e=[];return this.tabs.forEach(function(t){e.push(t.tabContent)}),e},t.prototype.showTab=function(e){this.isShowTabCalled=!0;var t=c.KDCore.ArrayHelper.findFirstIndex(this.tabs,function(t){return t.tabContent==e});this.hideAllTab();var o=this.tabs[t];c.KDCore.isNotNullObject(o)&&(o.tabContent.show(),o.button.interactable=!1,o.titleGroup&&(o.titleGroup.color=this.colorTitleSelected)),this.onChangedTab.forEach(function(e){e.emit([t,o.tabContent])})},t.prototype.getCurrentShowTab=function(){var e=null;return this.tabs.forEach(function(t){t.tabContent.node.active&&(e=t.tabContent)}),e},t.prototype.getCurrentShowTabIndex=function(){var e=this;return c.KDCore.ArrayHelper.findFirstIndex(this.tabs,function(t){return t.tabContent==e.getCurrentShowTab()})},t.prototype.hideAllTab=function(){var e=this;this.tabs.forEach(function(t){t.tabContent.hide(),t.button.interactable=!0,t.titleGroup&&(t.titleGroup.color=e.colorTitleNormal)})},i([p(cc.Color)],t.prototype,"colorTitleNormal",void 0),i([p(cc.Color)],t.prototype,"colorTitleSelected",void 0),i([p([u])],t.prototype,"tabs",void 0),i([p(cc.Integer)],t.prototype,"firstTabAutoShow",void 0),i([p([cc.Component.EventHandler])],t.prototype,"onChangedTab",void 0),i([s],t)}(cc.Component);o.KDTabView=d,cc._RF.pop()},{"../../Core/Helper":"Helper","./KDBaseTabContent":"KDBaseTabContent"}],KDTextureUtil:[function(e,t,o){"use strict";cc._RF.push(t,"14c6blefgtDHqonTCTuxQj4","KDTextureUtil"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("../KDScreenShotUtil"),n=function(){function e(){}return e.getTexturePixelData=function(e,t){void 0===t&&(t=!0);var o=null,n=null,i=e._uuid;if(i&&i.length>0&&this.rendererTextureCached.has(i)&&(n=this.rendererTextureCached.get(i)),!n){var a=new cc.Node,c=a.addComponent(cc.Sprite),l=new cc.SpriteFrame;l.setTexture(e),l.setFlipY(!0),c.spriteFrame=l,c.sizeMode=cc.Sprite.SizeMode.CUSTOM,a.setContentSize(cc.size(e.width,e.height)),a.group="MaskImg";var s=cc.find("Canvas");a.parent=s,o=r.default.screenShot(cc.size(e.width,e.height),cc.v2(cc.winSize.width/2,cc.winSize.height/2),2),t&&i&&i.length>0&&(n=o.readPixels(),this.rendererTextureCached.set(i,n)),a.destroy()}return n},e.clearRendererTextureCached=function(){e.rendererTextureCached.clear()},e.maskTexture=function(e,t,o,r,n){var i=this;if(void 0===r&&(r=!1),void 0===n&&(n=!0),!e||!t)return null;var a=e._uuid,c=t._uuid,l="";if(a&&c&&(l=a+"|"+c+"|"+o.toString()),l.length>0&&this.maskedTextureCached.has(l))return new Promise(function(e){e(i.maskedTextureCached.get(l))});for(var s=this.getTexturePixelData(e),p=this.getTexturePixelData(t),u=new Uint8Array(p.length),d=o.x-Math.floor(t.width/2),h=o.y-Math.floor(t.height/2),f=0;f<p.length/4;f++){var y=4*f,v=f%t.width,_=Math.floor(f/t.width),g=0,b=0,m=0,C=0;if(p[y+3]>25.5){var S=v+d,P=_+h;if(S>=0&&S<e.width&&P>=0&&P<e.height){var T=4*(P*e.width+S);g=s[T],b=s[T+1],m=s[T+2],C=s[T+3]}}u[y]=g,u[y+1]=b,u[y+2]=m,u[y+3]=C}if(r){var R="";return"undefined"!=typeof generatePng&&(R=btoa(generatePng(t.width,t.height,Array.from(u)))),this.loadTextureFromBase64(R)}var O=new cc.Texture2D;O.initWithData(u,16,t.width,t.height);var A=new cc.SpriteFrame(O);return l.length>0&&n&&this.maskedTextureCached.set(l,A),new Promise(function(e){e(A)})},e.clearMaskedTextureCached=function(){e.maskedTextureCached.clear()},e.loadTextureFromBase64=function(e){return new Promise(function(t,o){try{var r=new Image;r.onload=function(){var e=new cc.Texture2D;e.initWithElement(r),e.handleLoadedTexture(),t(new cc.SpriteFrame(e))},r.src="data:image/png;base64,"+e}catch(n){o()}})},e.seclectImgInBrowser=function(e){if(!cc.sys.isNative){var t=document.getElementById("input-file");t||((t=document.createElement("INPUT")).setAttribute("type","file"),t.setAttribute("id","input-file"),t.setAttribute("accept",".jpg,.jpeg,.png"),t.setAttribute("style","position: absolute;left: 0%;top: 70%;display: none"),document.body.appendChild(t)),t.click(),t.onclick=function(){this.value=null},t.onchange=function(){var t=this.files[0],o=new FileReader;o.addEventListener("load",function(){e&&e(o.result)},!1),t&&o.readAsDataURL(t),console.log(t)}}},e.rendererTextureCached=new Map,e.maskedTextureCached=new Map,e}();o.default=n,cc._RF.pop()},{"../KDScreenShotUtil":"KDScreenShotUtil"}],KDToggle:[function(e,t,o){"use strict";cc._RF.push(t,"f679fldR35PFrtXxa9jp3s+","KDToggle");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleTarget=null,t.onNode=null,t.offNode=null,t}return n(t,e),t.prototype.onLoad=function(){this.toggleTarget||(this.toggleTarget=this.getComponent(cc.Toggle))},t.prototype.start=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="KDToggle",e.handler="toggle",this.toggleTarget.checkEvents.push(e),this.reloadOnOff()},t.prototype.toggle=function(){this.reloadOnOff()},t.prototype.reloadOnOff=function(){this.onNode.active=this.toggleTarget.isChecked,this.offNode.active=!this.toggleTarget.isChecked},i([l(cc.Toggle)],t.prototype,"toggleTarget",void 0),i([l(cc.Node)],t.prototype,"onNode",void 0),i([l(cc.Node)],t.prototype,"offNode",void 0),i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],KDTrimSpriteWithMaxSize:[function(e,t,o){"use strict";cc._RF.push(t,"bebb49JfDdAroJM4YUyFF41","KDTrimSpriteWithMaxSize");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onlyScaleLargerMaxSize=!1,t.isUsingHeight=!0,t.target=null,t._maxHeight=0,t._maxWidth=0,t._previousSprFrame=null,t}return n(t,e),Object.defineProperty(t.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(e){this._maxHeight=e,this.reload()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth=e,this.reload()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.target||(this.target=this.node.getComponent(cc.Sprite))},t.prototype.update=function(){this.reload()},t.prototype.reload=function(){if(this.target&&this.target.spriteFrame&&this._previousSprFrame!=this.target.spriteFrame){var e=this.target.spriteFrame.getRect(),t=1;this.onlyScaleLargerMaxSize,this.isUsingHeight?this._maxHeight>0&&(!this.onlyScaleLargerMaxSize||e.height>this.maxHeight)&&(t=this._maxHeight/e.height):this._maxWidth>0&&(!this.onlyScaleLargerMaxSize||e.width>this.maxWidth)&&(t=this._maxWidth/e.width),this.target.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.target.node.setContentSize(e.width*t,e.height*t)}},i([l(cc.Boolean)],t.prototype,"onlyScaleLargerMaxSize",void 0),i([l(cc.Boolean)],t.prototype,"isUsingHeight",void 0),i([l(cc.Sprite)],t.prototype,"target",void 0),i([l],t.prototype,"_maxHeight",void 0),i([l({type:cc.Float,visible:function(){return this.isUsingHeight}})],t.prototype,"maxHeight",null),i([l],t.prototype,"_maxWidth",void 0),i([l({type:cc.Float,visible:function(){return!this.isUsingHeight}})],t.prototype,"maxWidth",null),i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],LoadingScene:[function(e,t,o){"use strict";cc._RF.push(t,"08909dh8IVLLIUuhQDf9qsd","LoadingScene");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./scene.model"),c=e("../../Plugin/Reactive/lib"),l=cc._decorator,s=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockInput=null,t}return n(t,e),t.prototype.onLoad=function(){this.node.setPosition(cc.v2(cc.winSize.width/2,cc.winSize.height/2)),this.blockInput.enabled=!1,c.Reactive.addTarget(this)},t.prototype.onDestroy=function(){c.Reactive.removeTarget(this)},t.prototype.start=function(){cc.game.addPersistRootNode(this.node)},t.prototype.runTransaction=function(e,t){var o=this;this.blockInput.enabled||"game-loading"==t||(this.blockInput.enabled=!0,async.parallel([function(e){return cc.tween(o.node).set({opacity:0}).to(.3,{opacity:255}).call(function(){return e(null)}).start()},function(e){return cc.director.preloadScene(t,null,e)}],function(){cc.director.loadScene(t,function(){cc.tween(o.node).set({opacity:255}).to(.3,{opacity:0}).call(function(){o.blockInput.enabled=!1}).set({opacity:0}).start()})}))},i([p(cc.BlockInputEvents)],t.prototype,"blockInput",void 0),i([c.react({event:a.SceneProps.scene,condition:function(e){return e}})],t.prototype,"runTransaction",null),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Plugin/Reactive/lib":"lib","./scene.model":"scene.model"}],LocalNotification:[function(e,t,o){"use strict";cc._RF.push(t,"c3847DH705LQYcApnYdOaB4","LocalNotification"),Object.defineProperty(o,"__esModule",{value:!0});var r="org/cocos2dx/javascript/natives/local_notification/LocalNotification",n="LocalNotification",i=new(function(){function e(){this._dailyRequest=[]}return e.prototype.init=function(e){this._dailyRequest=e.daily,this._enable=!cc.sys.localStorage.getItem("notification")||"true"===cc.sys.localStorage.getItem("notification").toString(),this._init()},e.prototype._init=function(){"undefined"!=typeof jsb&&(cc.sys.isNative&&jsb&&cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(n,"init"):(jsb.reflection.callStaticMethod(r,"init","()V"),this.onGrantedPermission(!0)))},Object.defineProperty(e.prototype,"enable",{get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,cc.sys.localStorage.setItem("notification",e),this._enable?this.scheduleAllDaily():this.removeAllRequest())},enumerable:!1,configurable:!0}),e.prototype.scheduleAllDaily=function(){var e=this;this._dailyRequest&&this._dailyRequest.forEach(function(t){e.triggerDaily(t.id,t.id_android,t.title,t.body,t.hour,t.minute)})},e.prototype.triggerAfter=function(e,t,o,i,a,c){void 0===c&&(c=!1),"undefined"!=typeof jsb&&cc.sys.isNative&&jsb&&cc.sys.os&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(n,"triggerAfter:title:body:seconds:repeat:",e,o,i,a,c):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(r,"triggerAfter","(ILjava/lang/String;Ljava/lang/String;JZ)V",t,o,i,a,c))},e.prototype.triggerDaily=function(e,t,o,i,a,c){void 0===c&&(c=0),"undefined"!=typeof jsb&&cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(n,"triggerDaily:title:body:hour:minute:",e,o,i,a,c):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(r,"triggerDaily","(ILjava/lang/String;Ljava/lang/String;IIZ)V",t,o,i,a,c,!0))},e.prototype.removeRequest=function(e,t){"undefined"!=typeof jsb&&cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(n,"removeRequest:",e):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(r,"cancel","(I)V",t))},e.prototype.removeAllRequest=function(){"undefined"!=typeof jsb&&cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod(n,"removeAllRequest"):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod(r,"cancelAll","()V"))},e.prototype.onGrantedPermission=function(e){e&&this._enable&&this.scheduleAllDaily()},e}());cc.LocalNotification=i,o.default=i,cc._RF.pop()},{}],Lose:[function(e,t,o){"use strict";cc._RF.push(t,"6e7f1Io0lhNwZF9sVjX8nYP","Lose");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Plugin/KDPlugin/Core/Helper"),c=e("../../Gameplay/GameplayControllerBase"),l=e("../Base/models/popupsview.model"),s=e("../../Sound/sound.model"),p=e("../../Sound/sound.const"),u=e("../../../Plugin/Native/Share"),d=e("../../ConstantNative"),h=e("../../Manager4Native/AdManager"),f=e("../../Manager4Native/GameServiceManager"),y=e("../../SceneManager/scene.model"),v=cc._decorator,_=v.ccclass,g=v.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelScore=null,t.labelBestScore=null,t}return n(t,e),t.prototype.onShow=function(){var e=l.PopupView.lose.value.newScore,t=l.PopupView.lose.value.oldBestScore;this.labelScore.string=a.KDCore.StringHelper.formatMoney(e),this.labelBestScore.string=a.KDCore.StringHelper.formatMoney(t)},t.prototype.onTouchStart=function(){this.node.opacity=0},t.prototype.onTouchEnd=function(){this.node.opacity=255},t.prototype.onReplayClicked=function(){s.Sound.sound.value=p.SoundNames.REPLAY_NEW_GAME,cc.systemEvent.emit(c.EVENT_REPLAY_NEW_GAME)},t.prototype.onShareClicked=function(){u.share(d.SHARE_TITLE,d.SHARE_BODY,d.SHARE_URL)},t.prototype.onLeaderboardClicked=function(){f.default.showLeaderboard()},t.prototype.onHomeClicked=function(){var e=function(){y.Scene.scene.value="main-menu"};h.default.isInterstitialAvailable(d.AD_INTERSTITIAL)?h.default.showInterstitial(d.AD_INTERSTITIAL,null,e):e()},i([g(cc.Label)],t.prototype,"labelScore",void 0),i([g(cc.Label)],t.prototype,"labelBestScore",void 0),i([_],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../../../Plugin/KDPlugin/Core/Helper":"Helper","../../../Plugin/Native/Share":"Share","../../ConstantNative":"ConstantNative","../../Gameplay/GameplayControllerBase":"GameplayControllerBase","../../Manager4Native/AdManager":"AdManager","../../Manager4Native/GameServiceManager":"GameServiceManager","../../SceneManager/scene.model":"scene.model","../../Sound/sound.const":"sound.const","../../Sound/sound.model":"sound.model","../Base/models/popupsview.model":"popupsview.model"}],MainMenu:[function(e,t,o){"use strict";cc._RF.push(t,"7dd34MQBx9Bj7aWBtUEcAqo","MainMenu");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Player/player.model"),c=e("../../Plugin/Native/Rate"),l=e("../ConstantNative"),s=e("../../Plugin/Native/Share"),p=e("../Manager4Native/GameServiceManager"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onRateClicked=function(){a.Player.rating.value=5,c.rate(l.APPLE_APP_ID,l.GOOGLE_APP_ID)},t.prototype.onShareClicked=function(){s.share(l.SHARE_TITLE,l.SHARE_BODY,l.SHARE_URL)},t.prototype.onLeaderboardClicked=function(){p.default.showLeaderboard()},i([d],t)}(cc.Component));o.default=h,cc._RF.pop()},{"../../Plugin/Native/Rate":"Rate","../../Plugin/Native/Share":"Share","../ConstantNative":"ConstantNative","../Manager4Native/GameServiceManager":"GameServiceManager","../Player/player.model":"player.model"}],ManagerSetupScripts:[function(e,t,o){"use strict";cc._RF.push(t,"2952aFNvKRMgoSDDf+4zKth","ManagerSetupScripts"),Object.defineProperty(o,"__esModule",{value:!0}),o.MNGSetupScripts=o.ScriptData=void 0;var r=e("../../Plugin/KDPlugin/MatrixGame/TableMatrix"),n=function(e,t,o,r){void 0===r&&(r=[]),this.name=e,this.boardMatrix=t,this.blocksQueueMatrix=o,this.starList=r};o.ScriptData=n;var i=function(){function e(){this.savedScripts=[],this.starsList=[],this.handIdSelected=-1,this.bgCustomeBase64=null,this.bgNextBlockBase64=null,this.bgCurBlockBase64=null,this.bgHoldBlockBase64=null,this.loadFromStorage()}return e.prototype.saveScriptByItsName=function(e){return""!=e.name&&!this.savedScripts.find(function(t){return t.name==e.name})&&(this.savedScripts.push(e),this.writeToStorage(),!0)},e.prototype.deleteScriptByName=function(e){_.remove(this.savedScripts,function(t){return t.name==e}),this.writeToStorage()},e.prototype.writeToStorage=function(){cc.sys.localStorage.setItem("scripts_save",JSON.stringify(this.savedScripts))},e.prototype.loadFromStorage=function(){var e=cc.sys.localStorage.getItem("scripts_save");e&&(this.savedScripts=JSON.parse(e),this.savedScripts=this.savedScripts.map(function(e){return new n(e.name,Object.assign(new r.default([][1]),e.boardMatrix),e.blocksQueueMatrix.map(function(e){return Object.assign(new r.default([][1]),e)}),e.starList)}))},e}();o.MNGSetupScripts=i;var a=new i;o.default=a,cc._RF.pop()},{"../../Plugin/KDPlugin/MatrixGame/TableMatrix":"TableMatrix"}],Merge2dxData:[function(e,t,o){"use strict";cc._RF.push(t,"59d6fscXPhPyIVyFsBJAd/f","Merge2dxData"),Object.defineProperty(o,"__esModule",{value:!0}),o.Merge2dxData=void 0;var r=e("../Player/player.model"),n=e("../Sound/sound.model"),i=e("../Award/award.model"),a=e("../Gameplay/table.model"),c=e("../Statistic/statistic.model"),l=function(){function e(){}return e.decryptStr=function(e){for(var t="",o=Array.apply(null,Array(256)).map(function(){return-1}),r=0;r<64;r++)o["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[r]]=r;var n=0,i=-8;for(r=0;r<e.length;r++){var a=e[r];if(-1==o[a]||"="==a)break;n=(n<<6)+o[a],(i+=6)>=0&&(t+=String.fromCharCode(n>>i&255),i-=8)}return t},e.getUserData=function(){var t=jsb.fileUtils.getWritablePath()+"ud_block_sodoku.sav";if(!jsb.fileUtils.isFileExist(t))return null;var o=jsb.fileUtils.getStringFromFile(t),r=e.decryptStr(o).trim();return JSON.parse(r)},e.getTableData=function(){var t=jsb.fileUtils.getWritablePath()+"tgdt_block_sodoku.sav";if(!jsb.fileUtils.isFileExist(t))return null;var o=jsb.fileUtils.getStringFromFile(t),r=e.decryptStr(o).trim();return JSON.parse(r)},e.getStatisticData=function(){var t=jsb.fileUtils.getWritablePath()+"statistic.sav";if(!jsb.fileUtils.isFileExist(t))return null;var o=jsb.fileUtils.getStringFromFile(t),r=e.decryptStr(o).trim();return JSON.parse(r)},e.checkAndMergeDataFrom2dxEngine=function(){if(!r.Player.mergedFrom2dx.value){if("undefined"!=typeof jsb){cc.sys.os==cc.sys.OS_WINDOWS&&jsb.fileUtils.setWritablePath("C:\\Users\\user\\AppData\\Local\\NineWood\\");var e=this.getUserData();e&&(r.Player.playedTutorial.value=e._isPlayedTutorial,r.Player.highScore.value=e._bestScore,r.Player.playedGames.value=e._gameOverCount,e._isRateClicked&&(r.Player.rating.value=4),r.Player.vibrate.value=e._isVibrate,n.Sound.sound_volume.value=e._isSoundOn?1:0,n.Sound.background_volume.value=e._isMusicOn?1:0,i.AwardModelInstance.awardUnlocked.value=e._unlockedAwards.split(",").map(function(e){return parseInt(e)}),i.AwardModelInstance.chooseAward(e._selectedTrophy)||(i.AwardModelInstance.awardChoosen.value=null),i.AwardModelInstance.accumulatedScore.value=e._allTimeScore,i.AwardModelInstance.accumulatedScoreInDay.value=e._currentDayScore,e._streakCounter.split(",").forEach(function(e,t){t-2>=0&&(i.AwardModelInstance.streaks.value[t-2]=parseInt(e))}));var t=this.getTableData();t&&(a.default.score.value=t._currentScore,a.default.boardStr.value=t._boardMatrix,a.default.blocksStr.value=t._blocksMatrix,a.default.playingDuration.value=t._playingDurationInSecond,a.default.maxCombo.value=t._maxCombo,a.default.maxStreak.value=t._maxStreak,a.default.totalCombo.value=t._totalCombo,a.default.totalStreak.value=t._totalStreak,a.default.moves.value=t._totalMoves);var o=this.getStatisticData();if(o){c.Statistic.records.value=[];for(var l=o.dates.reverse(),s=o.values.reverse(),p=0;p<l.length;p++){var u=l[p].split(","),d=parseInt(u[0])+1900,h=parseInt(u[1]),f=parseInt(u[2]);c.Statistic.addRecordWithCustomDate(s[p],new Date(d,h,f))}}}r.Player.mergedFrom2dx.value=!0}},e}();o.Merge2dxData=l,cc._RF.pop()},{"../Award/award.model":"award.model","../Gameplay/table.model":"table.model","../Player/player.model":"player.model","../Sound/sound.model":"sound.model","../Statistic/statistic.model":"statistic.model"}],Model:[function(e,t,o){"use strict";cc._RF.push(t,"2bbb2IlcqNBY7z7JC+96NJm","Model"),Object.defineProperty(o,"__esModule",{value:!0}),o.Model=void 0;var r=e("../const"),n=function(){function e(e,t,o){void 0===t&&(t=!0),void 0===o&&(o=null),this.name=e,this.serializable=t,this.saveFile=o}return e.prototype.onDestroy=function(){},e.prototype.serialize=function(){for(var e={},t=0,o=Object.getOwnPropertyNames(this);t<o.length;t++){var n=o[t];this[n]&&this[n].type===r.PROTOTYPE_TYPE&&this[n].serialize&&(this[n].value&&this[n].value.serialize?e[n]=this[n].value.serialize():e[n]=this[n].value)}return e},e.prototype.deserialize=function(e){for(var t=0,o=Object.getOwnPropertyNames(this);t<o.length;t++){var n=o[t];void 0!==e[n]&&this[n].type===r.PROTOTYPE_TYPE&&this[n].serialize&&(this[n].value&&this[n].value.deserialize?this[n].value.deserialize(e[n]):this[n].value=e[n])}},e}();o.Model=n,cc._RF.pop()},{"../const":"const"}],NativeGeneralInfo:[function(e,t,o){"use strict";cc._RF.push(t,"efbc3rNNyRIT5styGZ6krdJ","NativeGeneralInfo"),Object.defineProperty(o,"__esModule",{value:!0});var r="org/cocos2dx/javascript/natives/general_info/GeneralInfo",n=function(){function e(){}return e.getAppName=function(){if(cc.sys.isNative){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GeneralInfo","getAppName");if(cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(r,"getAppName","()Ljava/lang/String;")}return"None"},e.getVersionName=function(){if(cc.sys.isNative){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GeneralInfo","getVersionName");if(cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(r,"getVersionName","()Ljava/lang/String;")}return"None"},e.getVersionCode=function(){if(cc.sys.isNative){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GeneralInfo","getVersionCode");if(cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(r,"getVersionCode","()Ljava/lang/String;")}return"None"},e.getDeviceModel=function(){if(cc.sys.isNative){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GeneralInfo","getDeviceModel");if(cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(r,"getDeviceModel","()Ljava/lang/String;")}return"None"},e.getDeviceName=function(){if(cc.sys.isNative){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GeneralInfo","getDeviceName");if(cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(r,"getDeviceName","()Ljava/lang/String;")}return"None"},e.getOS=function(){if(cc.sys.isNative){if(cc.sys.os==cc.sys.OS_IOS)return"IOS";if(cc.sys.os==cc.sys.OS_ANDROID)return"Android"}return"None"},e.getOSVersion=function(){if(cc.sys.isNative){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GeneralInfo","getOSVersion");if(cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(r,"getOSVersion","()Ljava/lang/String;")}return"None"},e.getSystemLanguage=function(){if(cc.sys.isNative){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GeneralInfo","getSystemLanguage");if(cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(r,"getSystemLanguage","()Ljava/lang/String;")}return"None"},e.getCountry=function(){if(cc.sys.isNative){if(cc.sys.os==cc.sys.OS_IOS)return jsb.reflection.callStaticMethod("GeneralInfo","getCountry");if(cc.sys.os==cc.sys.OS_ANDROID)return jsb.reflection.callStaticMethod(r,"getCountry","()Ljava/lang/String;")}return"None"},e}();o.default=n,cc._RF.pop()},{}],NativeInitManager:[function(e,t,o){"use strict";cc._RF.push(t,"bc4c9+jPIJIxYVGnfk5yB3a","NativeInitManager"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./../ConstantNative"),n=e("./AdManager"),i=e("./AnalyticManager"),a=e("./RemoteConfigManager"),c=e("./GameServiceManager"),l=e("./PaymentProcessManager"),s=cc._decorator,p=(s.ccclass,s.property,new(function(){function e(){}return e.prototype.init=function(){cc.sys.isMobile&&cc.sys.isNative&&(i.default.init(),a.default.init(),n.default.init(r.AdInit),c.default.signIn(),l.default.init())},e}()));o.default=p,cc._RF.pop()},{"./../ConstantNative":"ConstantNative","./AdManager":"AdManager","./AnalyticManager":"AnalyticManager","./GameServiceManager":"GameServiceManager","./PaymentProcessManager":"PaymentProcessManager","./RemoteConfigManager":"RemoteConfigManager"}],NewHighestScoreLayer:[function(e,t,o){"use strict";cc._RF.push(t,"f27b6rY5mxGoo0qOJVBYe8X","NewHighestScoreLayer");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../PersistRootNodes/CupFrames"),c=e("../../../Plugin/KDPlugin/Core/Helper"),l=cc._decorator,s=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelScore=null,t.sprCup=null,t.flare=null,t.btnHide=null,t.particleTemplate=null,t.currentParticle=null,t.callback=null,t}return n(t,e),t.prototype.show=function(e,t,o){var r=this;this.node.active=!0,this.callback=o,this.node.opacity=0,this.scheduleOnce(function(){r.node.opacity=255},.01),c.KDCore.AnimationHelper.runActionFloatForLabel(this.labelScore,0,e,1.3,!0,"{0}",!0),this.sprCup.spriteFrame=a.default.CupFramesInstance.getSprFrameByCupId(t),cc.Tween.stopAllByTarget(this.flare),cc.tween(this.flare).set({angle:0}).repeatForever(cc.tween().by(4,{angle:360})).start();var n=this.getComponent(cc.Animation);n.play(n.defaultClip.name),this.currentParticle&&this.currentParticle.isValid&&this.currentParticle.destroy(),this.currentParticle=cc.instantiate(this.particleTemplate),this.currentParticle.parent=this.node,this.currentParticle.active=!0,this.btnHide.interactable=!1,this.scheduleOnce(function(){r.btnHide.interactable=!0},1)},t.prototype.hide=function(){this.node.active=!1,this.callback&&this.callback()},i([p(cc.Label)],t.prototype,"labelScore",void 0),i([p(cc.Sprite)],t.prototype,"sprCup",void 0),i([p(cc.Node)],t.prototype,"flare",void 0),i([p(cc.Button)],t.prototype,"btnHide",void 0),i([p(cc.Node)],t.prototype,"particleTemplate",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Plugin/KDPlugin/Core/Helper":"Helper","../../PersistRootNodes/CupFrames":"CupFrames"}],Notification:[function(e,t,o){"use strict";cc._RF.push(t,"9141faF7t1MAIcB5reQBvQq","Notification");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./noti.model"),c=e("./noti.const"),l=e("../../Plugin/Reactive/lib"),s=e("../../Plugin/Native/LocalNotification"),p=cc._decorator,u=p.ccclass,d=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){l.Reactive.addTarget(this),cc.game.addPersistRootNode(this.node)},t.prototype.onDestroy=function(){l.Reactive.removeTarget(this)},t.prototype.onEnableNotification=function(e,t){t&&s.default.init(c.NotificationInit),s.default.enable=t},i([l.react({event:a.NotificationProps.enable})],t.prototype,"onEnableNotification",null),i([u],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../Plugin/Native/LocalNotification":"LocalNotification","../../Plugin/Reactive/lib":"lib","./noti.const":"noti.const","./noti.model":"noti.model"}],Pause:[function(e,t,o){"use strict";cc._RF.push(t,"93d86GKR7tAu6Pdf4S2yCZ0","Pause");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./../SceneManager/scene.model"),c=e("./../ConstantNative"),l=e("../Gameplay/GameplayControllerBase"),s=e("../Sound/sound.model"),p=e("../Sound/sound.const"),u=e("../../Plugin/Native/Share"),d=e("../ConstantNative"),h=e("../Manager4Native/GameServiceManager"),f=e("../Manager4Native/AdManager"),y=e("../Player/player.model"),v=e("../../Plugin/Native/Rate"),_=cc._decorator,g=_.ccclass,b=(_.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onReplayClicked=function(){var e=function(){s.Sound.sound.value=p.SoundNames.REPLAY_NEW_GAME,cc.systemEvent.emit(l.EVENT_REPLAY_NEW_GAME)};f.default.isInterstitialAvailable(c.AD_INTERSTITIAL)?f.default.showInterstitial(c.AD_INTERSTITIAL,null,e):e()},t.prototype.onShareClicked=function(){u.share(d.SHARE_TITLE,c.SHARE_BODY,c.SHARE_URL)},t.prototype.onLeaderboardClicked=function(){h.default.showLeaderboard()},t.prototype.onHomeClicked=function(){var e=function(){a.Scene.scene.value="main-menu"};f.default.isInterstitialAvailable(c.AD_INTERSTITIAL)?f.default.showInterstitial(c.AD_INTERSTITIAL,null,e):e()},t.prototype.onRateClicked=function(){y.Player.rating.value=5,v.rate(c.APPLE_APP_ID,c.GOOGLE_APP_ID)},i([g],t)}(cc.Component));o.default=b,cc._RF.pop()},{"../../Plugin/Native/Rate":"Rate","../../Plugin/Native/Share":"Share","../ConstantNative":"ConstantNative","../Gameplay/GameplayControllerBase":"GameplayControllerBase","../Manager4Native/AdManager":"AdManager","../Manager4Native/GameServiceManager":"GameServiceManager","../Player/player.model":"player.model","../Sound/sound.const":"sound.const","../Sound/sound.model":"sound.model","./../ConstantNative":"ConstantNative","./../SceneManager/scene.model":"scene.model"}],PaymentProcessManager:[function(e,t,o){"use strict";cc._RF.push(t,"3a43670CupJJalG6XkAFyEA","PaymentProcessManager"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./../ConstantNative"),n=e("../../Plugin/Native/IAP/IAPHelper"),i=e("../Player/player.model"),a=e("./AdManager"),c=new(function(){function e(){}return e.prototype.init=function(){n.default.init(r.IAPItems,r.IOS_SHARED_SECRECT,this)},e.prototype.processPurchaseSuccessed=function(e){switch(console.log("CPaymentProcessManager processPurchaseSuccessed: ",e.packageId),e.packageId){case r.IAPProductIds.RemoveAds:i.Player.removedAds.value=!0,a.default.hideBanner(r.AD_BANNER);break;case r.IAPProductIds.Premium1:case r.IAPProductIds.Premium2:i.Player.subscritionProductId.value=e.packageId}},e.prototype.purchaseFailed=function(){},e.prototype.onRestoreCompleted=function(){},e.prototype.onSubscriptionNotValid=function(e){console.log("CPaymentProcessManager onSubscriptionNotValid",e.packageId),i.Player.subscritionProductId.value==e.packageId&&(i.Player.subscritionProductId.value="",console.log("CPaymentProcessManager removed subscription"))},e}());o.default=c,cc._RF.pop()},{"../../Plugin/Native/IAP/IAPHelper":"IAPHelper","../Player/player.model":"player.model","./../ConstantNative":"ConstantNative","./AdManager":"AdManager"}],PngEndcoder:[function(e,t){"use strict";var o,r,n,i,a,c,l,s,p,u,d,h;cc._RF.push(t,"4bfb7LJZLNJcopKDZ3v/XUH","PngEndcoder"),o=window,n=String.fromCharCode(120,1),i=[],a=String.fromCharCode(137,80,78,71,13,10,26,10),c=String.fromCharCode(0),l=function(e){var t,o,r,n="";for(t=0;t<e.length;t+=65535)r="",(o=e.length-t)<=65535?r=String.fromCharCode(1):(o=65535,r=String.fromCharCode(0)),n+=r+String.fromCharCode(255&o,(65280&o)>>>8),n+=String.fromCharCode(255&~o,(65280&~o)>>>8),n+=e.substring(t,t+o);return n},s=function(e){var t,o=1,r=0;for(t=0;t<e.length;t++)r=(r+(o=(o+e.charCodeAt(t))%65521))%65521;return r<<16|o},p=function(e,t){var o,r,n=e;for(o=0;o<t.length;o++)r=t.charCodeAt(o),n=i[255&(n^r)]^n>>>8;return n},u=function(e){return String.fromCharCode((4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e)},d=function(e,t,o){var r=4294967295^p(4294967295,t+o);return u(e)+t+o+u(r)},h=function(e,t){var o;return o=u(e),o+=u(t),o+=String.fromCharCode(8),o+=String.fromCharCode(6),o+=String.fromCharCode(0),o+=String.fromCharCode(0),o+=String.fromCharCode(0),d(13,"IHDR",o)},function(){var e,t,o;for(e=0;e<256;e++){for(t=e,o=0;o<8;o++)1&t?t=3988292384^t>>>1:t>>>=1;i[e]=t}}(),r=d(0,"IEND",""),o.generatePng=function(e,t,o){var i,p,f,y,v,_=h(e,t),g="";for(f=0;f<o.length;f+=4*e){if(p=c,Array.isArray(o))for(y=0;y<4*e;y++)p+=String.fromCharCode(255&o[f+y]);else p+=o.substr(f,4*e);g+=p}return v=n+l(g)+u(s(g)),i=d(v.length,"IDAT",v),a+_+i+r},cc._RF.pop()},{}],PopupBlockMaker:[function(e,t,o){"use strict";cc._RF.push(t,"c6bc6YvwnBBkKvZC/d0e7in","PopupBlockMaker");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Plugin/KDPlugin/MatrixGame/TableMatrix"),c=e("../../../Script/CoreGameplayEx/ConstantGameplay"),l=e("../SetupScrips/CustomBoardBlock/BoardCustom"),s=e("../SetupScrips/CustomBoardBlock/PopupCustomBlocks"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boardBlockMaker=null,t.popupCustomBlock=null,t}return n(t,e),t.prototype.show=function(){this.node.active=!0,this.boardBlockMaker.setTableMatrix(a.default.createDefaultTableMatrix(5,5,1))},t.prototype.hide=function(){this.node.active=!1},t.prototype.onAddClicked=function(){var e=this.boardBlockMaker.tableMatrix.matrixCopy;e.forEach(function(e){return e.forEach(function(t,o){1==t&&(e[o]=0)})}),this.boardBlockMaker.setTableMatrix(new a.default(e));for(var t=a.default.createDefaultTableMatrix(c.default.MAX_ROWS,c.default.MAX_COLS,0),o=this.boardBlockMaker.tableMatrix.matrix,r=this.boardBlockMaker.botAvailable;r<=this.boardBlockMaker.topAvailable;r++)for(var n=this.boardBlockMaker.leftAvailable;n<=this.boardBlockMaker.rightAvailable;n++)o[r][n]&&t.setValueAt(r-this.boardBlockMaker.botAvailable,n-this.boardBlockMaker.leftAvailable,2);this.popupCustomBlock.addBlocksSelected([t]),this.hide()},i([d(l.default)],t.prototype,"boardBlockMaker",void 0),i([d(s.default)],t.prototype,"popupCustomBlock",void 0),i([u],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../Plugin/KDPlugin/MatrixGame/TableMatrix":"TableMatrix","../../../Script/CoreGameplayEx/ConstantGameplay":"ConstantGameplay","../SetupScrips/CustomBoardBlock/BoardCustom":"BoardCustom","../SetupScrips/CustomBoardBlock/PopupCustomBlocks":"PopupCustomBlocks"}],PopupCustomBlocks:[function(e,t,o){"use strict";cc._RF.push(t,"5065eXrR11MoJKGMiBxU+hV","PopupCustomBlocks");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../../Plugin/KDPlugin/MatrixGame/Block"),c=e("../../../../Plugin/KDPlugin/MatrixGame/GridConfig"),l=e("../../../../Plugin/KDPlugin/MatrixGame/TableMatrix"),s=e("../../../../Script/CoreGameplayEx/BlockGame"),p=e("../../../../Script/CoreGameplayEx/ConstantGameplay"),u=e("./BlockCustom"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollBlockSelectedQueue=null,t.scrollViewBlockTemplate=null,t.blockCustomTemplate=null,t._currentBlockTemplateSelect=null,t._currentBlockQueueSelect=null,t}return n(t,e),t.prototype.start=function(){this.setupBlocksTemplate()},t.prototype.show=function(){this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},t.prototype.addBlocksSelected=function(e){var t=this;e.forEach(function(e){return t.createBlockCustomAndAddToQueue(e)})},t.prototype.getBlocksSelected=function(){return this.scrollBlockSelectedQueue.content.children.map(function(e){return e.getComponent(u.default)})},t.prototype.clearCurrentQueue=function(){this.scrollBlockSelectedQueue.content.destroyAllChildren()},t.prototype.setupBlocksTemplate=function(){var e=this;this.scrollViewBlockTemplate.content.destroyAllChildren();for(var t=function(t,o){void 0===o&&(o=0);var r=cc.instantiate(e.blockCustomTemplate.node).getComponent(u.default);r.config=new c.default,r.config.cellSize=cc.size(30,30),r.config.gameType=c.eGridGameType.Square,r.onClick=e.onClickBlockTemplate.bind(e),r.setTableMatrix(s.default.createTableMatrixBlock(t,0,o)),r.getRendererByType(a.eBlockRendererType.BlockRenderer).position=cc.Vec3.ZERO,r.node.setContentSize(r.validCellsSize),r.node.active=!0,r.node.parent=e.scrollViewBlockTemplate.content},o=p.BlockDefaulType.Custom_BlockType+1;o<p.BlockDefaulType.End_BlockType;o++)t(o);[p.default.CELL_ID_CLEAR_BOM,p.default.CELL_ID_CLEAR_HORIZONTAL,p.default.CELL_ID_CLEAR_VERTICAL].forEach(function(e){t(p.BlockDefaulType.One_BlockType,e)})},t.prototype.onClickBlockTemplate=function(e){this.scrollViewBlockTemplate.content.children.forEach(function(e){return e.getComponent(u.default).hideSelectedBg()}),e!=this._currentBlockTemplateSelect?(e.showSelectedBg(),this._currentBlockTemplateSelect=e):this._currentBlockTemplateSelect=null},t.prototype.onClickBlockQueue=function(e){this.scrollBlockSelectedQueue.content.children.forEach(function(e){return e.getComponent(u.default).hideSelectedBg()}),e!=this._currentBlockQueueSelect?(e.showSelectedBg(),this._currentBlockQueueSelect=e):this._currentBlockQueueSelect=null},t.prototype.onAddBlockToQueueClicked=function(){this._currentBlockTemplateSelect&&this.createBlockCustomAndAddToQueue(new l.default(this._currentBlockTemplateSelect.tableMatrix.matrixCopy))},t.prototype.onRemoveBlockFromQueueClicked=function(){this._currentBlockQueueSelect&&(this._currentBlockQueueSelect.node.destroy(),this._currentBlockQueueSelect=null)},t.prototype.onRotateBlockFromQueueClicked=function(){this._currentBlockQueueSelect&&(this._currentBlockQueueSelect.setTableMatrix(this.rotateBlock(this._currentBlockQueueSelect)),this._currentBlockQueueSelect.getRendererByType(a.eBlockRendererType.BlockRenderer).position=cc.Vec3.ZERO,this._currentBlockQueueSelect.node.setContentSize(this._currentBlockQueueSelect.validCellsSize))},t.prototype.rotateBlock=function(e){for(var t=[],o=e.botAvailable;o<=e.topAvailable;o++){t.push([]);for(var r=e.leftAvailable;r<=e.rightAvailable;r++)t[o].push(e.tableMatrix.at(o,r))}(function(){for(var e=t.length,o=t[0].length,r=[],n=0;n<o;n++){for(var i=[],a=0;a<e;a++){var c=a,l=o-1-n;i.push(t[c][l])}r.push(i)}t=[],t=r})();var n=l.default.createDefaultTableMatrix(p.default.MAX_ROWS,p.default.MAX_COLS);for(o=0;o<t.length;o++)for(r=0;r<t[0].length;r++)t[o][r]&&n.setValueAt(o,r,2);return n},t.prototype.createBlockCustomAndAddToQueue=function(e){var t=cc.instantiate(this.blockCustomTemplate.node).getComponent(u.default);t.config=new c.default,t.config.cellSize=cc.size(30,30),t.config.gameType=c.eGridGameType.Square,t.onClick=this.onClickBlockQueue.bind(this),t.showLabelIndex(),t.setTableMatrix(e),t.getRendererByType(a.eBlockRendererType.BlockRenderer).position=cc.Vec3.ZERO,t.node.setContentSize(t.validCellsSize),t.node.active=!0,t.node.parent=this.scrollBlockSelectedQueue.content,this.scrollBlockSelectedQueue.scrollToBottomRight()},i([f(cc.ScrollView)],t.prototype,"scrollBlockSelectedQueue",void 0),i([f(cc.ScrollView)],t.prototype,"scrollViewBlockTemplate",void 0),i([f(u.default)],t.prototype,"blockCustomTemplate",void 0),i([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../Plugin/KDPlugin/MatrixGame/Block":"Block","../../../../Plugin/KDPlugin/MatrixGame/GridConfig":"GridConfig","../../../../Plugin/KDPlugin/MatrixGame/TableMatrix":"TableMatrix","../../../../Script/CoreGameplayEx/BlockGame":"BlockGame","../../../../Script/CoreGameplayEx/ConstantGameplay":"ConstantGameplay","./BlockCustom":"BlockCustom"}],PopupFeedback:[function(e,t,o){"use strict";cc._RF.push(t,"50279LdMwRHvrDTpMs93ObT","PopupFeedback");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Base/models/popupsview.model"),c=e("../Utils/RestAPIManager"),l=e("../../Plugin/Native/NativeGeneralInfo"),s=e("../../Plugin/KDPlugin/Core/Helper"),p=e("../ConstantNative"),u=e("./Base/components/BasePopup"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelEmail=null,t.labelFeedback=null,t.editboxEmail=null,t.editBoxFeedback=null,t.sprFrameThanksForFeedback=null,t.standarPosLabelEmail=cc.Vec3.ZERO,t.standarPosLabelFeedback=cc.Vec3.ZERO,t._numberRating=0,t}return n(t,e),t.prototype.onLoad=function(){this.standarPosLabelEmail=this.labelEmail.node.position,this.standarPosLabelFeedback=this.labelFeedback.node.position},t.prototype.onShow=function(){this._numberRating=a.PopupView.feedback.value.rate,this.editboxEmail.string="",this.editBoxFeedback.string=""},t.prototype.onHide=function(){a.PopupView.feedback.value.callbackHide&&(a.PopupView.feedback.value.callbackHide(),a.PopupView.feedback.value.callbackHide=null)},t.prototype.onFeedbackClicked=function(){var e=this;if(""==this.editboxEmail.string)return this.labelEmail.node.position=this.standarPosLabelEmail,void cc.tween(this.labelEmail.node).to(.1,{position:cc.v3(this.standarPosLabelEmail.x,this.standarPosLabelEmail.y+5)}).to(.2,{position:cc.v3(this.standarPosLabelEmail.x,this.standarPosLabelEmail.y-5)}).to(.1,{position:cc.v3(this.standarPosLabelEmail.x,this.standarPosLabelEmail.y)}).start();if(""==this.editBoxFeedback.string)return this.labelFeedback.node.position=this.standarPosLabelFeedback,void cc.tween(this.labelFeedback.node).to(.1,{position:cc.v3(this.standarPosLabelFeedback.x,this.standarPosLabelFeedback.y+5)}).to(.2,{position:cc.v3(this.standarPosLabelFeedback.x,this.standarPosLabelFeedback.y-5)}).to(.1,{position:cc.v3(this.standarPosLabelFeedback.x,this.standarPosLabelFeedback.y)}).start();var t=p.APPLE_APP_ID;cc.sys.os==cc.sys.OS_ANDROID&&(t=p.GOOGLE_APP_ID),c.default.Instance.sendFeedback(this.editboxEmail.string,this._numberRating,l.default.getDeviceName(),this.editBoxFeedback.string,l.default.getOS(),l.default.getOSVersion(),l.default.getDeviceName(),l.default.getVersionCode(),Math.floor(Date.now()/1e3),l.default.getCountry(),p.PROJECT_NAME,t,function(){var t=s.KDCore.SpriteHelper.createSprite(e.sprFrameThanksForFeedback,e.sprFrameThanksForFeedback.getOriginalSize(),null);t.node.scale=.5,t.node.position=cc.v3(cc.winSize.width/2,320),t.node.opacity=0,cc.game.addPersistRootNode(t.node),cc.tween(t.node).to(.6,{opacity:255}).delay(2.3).to(.6,{opacity:0}).removeSelf().start()}),this.getComponent(u.default).hide()},t.prototype.prepareAndShow=function(e){void 0===e&&(e=0)},i([f(cc.Label)],t.prototype,"labelEmail",void 0),i([f(cc.Label)],t.prototype,"labelFeedback",void 0),i([f(cc.EditBox)],t.prototype,"editboxEmail",void 0),i([f(cc.EditBox)],t.prototype,"editBoxFeedback",void 0),i([f(cc.SpriteFrame)],t.prototype,"sprFrameThanksForFeedback",void 0),i([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../Plugin/KDPlugin/Core/Helper":"Helper","../../Plugin/Native/NativeGeneralInfo":"NativeGeneralInfo","../ConstantNative":"ConstantNative","../Utils/RestAPIManager":"RestAPIManager","./Base/components/BasePopup":"BasePopup","./Base/models/popupsview.model":"popupsview.model"}],PopupLoad:[function(e,t,o){"use strict";cc._RF.push(t,"b6f64DPcNFFqrz7LI2SfaV4","PopupLoad");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ItemScriptLoad"),c=e("../ManagerSetupScripts"),l=e("../SetupScrips/SetupScriptController"),s=cc._decorator,p=s.ccclass,u=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollViewScripts=null,t.itemScriptTempalte=null,t.setupController=null,t.currentSelectItem=null,t}return n(t,e),t.prototype.show=function(){this.node.active=!0,this.loadAllScripts()},t.prototype.hide=function(){this.node.active=!1},t.prototype.loadAllScripts=function(){var e=this;this.currentSelectItem=null,this.scrollViewScripts.content.destroyAllChildren(),c.default.savedScripts.forEach(function(t){var o=cc.instantiate(e.itemScriptTempalte.node);o.parent=e.scrollViewScripts.content,o.active=!0,o.getComponent(a.default).data=t,o.getComponent(a.default).hideSelectEffect()})},t.prototype.onScriptSelectClicked=function(e){this.currentSelectItem&&this.currentSelectItem.isValid&&this.currentSelectItem.hideSelectEffect(),this.currentSelectItem=e.target.parent.getComponent(a.default),this.currentSelectItem.showSelectEffect()},t.prototype.onDeletedClicked=function(){this.currentSelectItem&&(c.default.deleteScriptByName(this.currentSelectItem.data.name),this.currentSelectItem.node.destroy(),this.currentSelectItem=null)},t.prototype.onLoadClicked=function(){this.currentSelectItem&&(this.setupController.loadFromData(this.currentSelectItem.data),this.hide())},i([u(cc.ScrollView)],t.prototype,"scrollViewScripts",void 0),i([u(a.default)],t.prototype,"itemScriptTempalte",void 0),i([u(l.default)],t.prototype,"setupController",void 0),i([p],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../ManagerSetupScripts":"ManagerSetupScripts","../SetupScrips/SetupScriptController":"SetupScriptController","./ItemScriptLoad":"ItemScriptLoad"}],PopupSave:[function(e,t,o){"use strict";cc._RF.push(t,"80af8V1kNRFkbuAd7V5WRlZ","PopupSave");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../ManagerSetupScripts"),c=e("../SetupScrips/SetupScriptController"),l=cc._decorator,s=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editboxName=null,t.cannotSaveNode=null,t.setupController=null,t}return n(t,e),t.prototype.show=function(){this.node.active=!0,this.cannotSaveNode.active=!1},t.prototype.hide=function(){this.node.active=!1},t.prototype.onSaveClicked=function(){var e=this.setupController.getCurrentData();e.name=this.editboxName.string,a.default.saveScriptByItsName(e)?(this.hide(),this.cannotSaveNode.active=!1):this.cannotSaveNode.active=!0},i([p(cc.EditBox)],t.prototype,"editboxName",void 0),i([p(cc.Node)],t.prototype,"cannotSaveNode",void 0),i([p(c.default)],t.prototype,"setupController",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../ManagerSetupScripts":"ManagerSetupScripts","../SetupScrips/SetupScriptController":"SetupScriptController"}],PopupSelectHand:[function(e,t,o){"use strict";cc._RF.push(t,"2b775yRr+9BJKsaeavJWPiQ","PopupSelectHand");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ItemSelectHand"),c=e("../ManagerSetupScripts"),l=cc._decorator,s=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollViewHand=null,t.itemSelectHandTemplate=null,t.totalItem=0,t}return n(t,e),t.prototype.onLoad=function(){this.reloadItems()},t.prototype.show=function(){this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},t.prototype.reloadItems=function(){this.scrollViewHand.content.destroyAllChildren();for(var e=-1;e<this.totalItem;e++){var t=cc.instantiate(this.itemSelectHandTemplate.node);t.active=!0,t.parent=this.scrollViewHand.content,t.getComponent(a.default).id=e,e==c.default.handIdSelected&&t.getComponent(a.default).showSelectedEff()}},t.prototype.onSelectHand=function(e){var t=e.target.getComponent(a.default),o=t.id;this.scrollViewHand.content.children.forEach(function(e){var o=e.getComponent(a.default);o==t?o.showSelectedEff():o.hideSelectedEff()}),c.default.handIdSelected=o},i([p(cc.ScrollView)],t.prototype,"scrollViewHand",void 0),i([p(a.default)],t.prototype,"itemSelectHandTemplate",void 0),i([p(cc.Integer)],t.prototype,"totalItem",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../ManagerSetupScripts":"ManagerSetupScripts","./ItemSelectHand":"ItemSelectHand"}],PopupSelectTheme:[function(e,t,o){"use strict";cc._RF.push(t,"ca6e0E1BzFK/ojD3GnqPjFj","PopupSelectTheme");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.show=function(){this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},i([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],"Prop.decorator":[function(e,t,o){"use strict";cc._RF.push(t,"eb14bpx/5tNF5bxs9FwEPtM","Prop.decorator"),Object.defineProperty(o,"__esModule",{value:!0}),o.prop=void 0;var r=e("../const");o.prop=function(e){return function(t,o){Array.isArray(t[r.PROTOTYPE_PROPS])?t[r.PROTOTYPE_PROPS].push({name:o,options:e}):t[r.PROTOTYPE_PROPS]=[{name:o,options:e}]}},cc._RF.pop()},{"../const":"const"}],PropertyArray:[function(e,t,o){"use strict";cc._RF.push(t,"ce4aaprXW1HvYXWkhTqHwqo","PropertyArray");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyArray=void 0;var i=function(e){function t(t,o){void 0===t&&(t=[]),void 0===o&&(o=!0);var r=e.call(this,o)||this;return r._value=t,r}return n(t,e),t.prototype.get=function(e){return this._value[e]},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.emit()},enumerable:!1,configurable:!0}),t.prototype.getValueAt=function(e){return this._value[e]},t.prototype.setValueAt=function(e,t){this._value.length>e&&(this._value[e]=t,this.emit(t))},Object.defineProperty(t.prototype,"length",{get:function(){return this._value.length},set:function(e){this._value.length=e,this.emit()},enumerable:!1,configurable:!0}),t.prototype.concat=function(e){this._value=this._value.concat(e),this.emit(e)},t.prototype.push=function(e){this._value.push(e),this.emit(e)},t.prototype.pop=function(){var e=this._value.pop();return this.emit(e),e},t.prototype.shift=function(){var e=this._value.shift();return this.emit(e),e},t.prototype.unshift=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this._value).unshift.apply(e,t),this.emit.apply(this,t)},t.prototype.splice=function(e,t){var o=this._value.splice(e,t);return this.emit.apply(this,o),o},t.prototype.reverse=function(){return this._value=this._value.reverse(),this.emit(),this._value},t.prototype.sort=function(e){return this._value=this._value.sort(e),this.emit(),this._value},t.prototype.every=function(e,t){return this._value.every(e,t)},t.prototype.filter=function(e,t){return this._value.filter(e,t)},t.prototype.forEach=function(e,t){return this._value.forEach(e,t)},t.prototype.indexOf=function(e,t){return this._value.indexOf(e,t)},t.prototype.lastIndexOf=function(e,t){return this._value.lastIndexOf(e,t)},t.prototype.join=function(e){return this._value.join(e)},t.prototype.map=function(e,t){return this._value.map(e,t)},t.prototype.reduce=function(e,t){return this._value.reduce(e,t)},t.prototype.reduceRight=function(e,t){return this._value.reduceRight(e,t)},t.prototype.slice=function(e,t){return this._value.slice(e,t)},t.prototype.some=function(e,t){return this._value.some(e,t)},t}(e("./Property").Property);o.PropertyArray=i,cc._RF.pop()},{"./Property":"Property"}],PropertyFilter:[function(e,t,o){"use strict";cc._RF.push(t,"1b220XV7wdAdLqEy9bECGeR","PropertyFilter");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,n++)r[n]=i[a];return r};Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyFilter=void 0;var a=function(e){function t(t,o){var r=e.call(this,!1)||this;return r.property=t,r.filter=o,r.dependence(t,function(e){e.name?(r._value=e.value,r.addEvent(e.name,r.onChangeValue)):cc.error("PropertyFilter init error, property name empty")}),r}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.onChangeValue=function(e,t){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];(this.alwayTrigger||this._value!==t)&&this.filter&&this.filter.apply(this,i([e,t],o))?(this._value=t,this.emit.apply(this,o)):this._value=void 0},t}(e("./Property").Property);o.PropertyFilter=a,cc._RF.pop()},{"./Property":"Property"}],PropertyHightValue:[function(e,t,o){"use strict";cc._RF.push(t,"0cb66C4INhCV7okhARyOoti","PropertyHightValue");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyHightValue=void 0;var i=function(e){function t(t,o,r){void 0===o&&(o=!0);var n=e.call(this,t,o)||this;return n.compare=r,n}return n(t,e),t.prototype.onChangeValue=function(e){return this.compare?this.compare(this._value,e)?this._value:e:this._value>e?this._value:e},t}(e("./PropertyValue").PropertyValue);o.PropertyHightValue=i,cc._RF.pop()},{"./PropertyValue":"PropertyValue"}],PropertyMapFunc:[function(e,t,o){"use strict";cc._RF.push(t,"8d5d5ZAk61N7ppoO1HQP7H3","PropertyMapFunc"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],PropertyMapMulti:[function(e,t,o){"use strict";cc._RF.push(t,"5eb9bmq9qRLQ5lFHAYARCpH","PropertyMapMulti");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyMapMulti=void 0;var i=function(e){function t(t,o){var r=e.call(this,null,o)||this;return r.properties=t,r.map=o,t.forEach(function(e){r.dependence(e,function(t){e.name?(r.reactiveValue(t,t.value),r.addEvent(t.name,r.onChangeValue)):cc.error("PropertyMapMulti init error, property name empty")})}),r}return n(t,e),t}(e("./PropertyMap").PropertyMap);o.PropertyMapMulti=i,cc._RF.pop()},{"./PropertyMap":"PropertyMap"}],PropertyMap:[function(e,t,o){"use strict";cc._RF.push(t,"07af7+2MA5HQqvs5hudBc36","PropertyMap");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,n++)r[n]=i[a];return r};Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyMap=void 0;var a=function(e){function t(t,o){var r=e.call(this,!1)||this;return r.property=t,r.map=o,r.dependence(t,function(e){e.name?(r._value=r.reactiveValue(e,e.value),r.addEvent(e.name,r.onChangeValue)):cc.error("PropertyMap init error, property name empty")}),r}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){(this.alwayTrigger||this._value!==e)&&(this._value=e,this.emit())},enumerable:!1,configurable:!0}),t.prototype.onChangeValue=function(e,t){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];t=this.reactiveValue.apply(this,i([e,t],o)),this.value=t},t.prototype.reactiveValue=function(e,t){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return this.map?this.map.apply(this,i([e,t],o)):t},t}(e("./Property").Property);o.PropertyMap=a,cc._RF.pop()},{"./Property":"Property"}],PropertyNonSerialize:[function(e,t,o){"use strict";cc._RF.push(t,"d124dCFCpFPTJl8XYg5NkfK","PropertyNonSerialize");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyNonSerialize=void 0;var i=function(e){function t(t){return e.call(this,t,!1)||this}return n(t,e),t}(e("./PropertyValue").PropertyValue);o.PropertyNonSerialize=i,cc._RF.pop()},{"./PropertyValue":"PropertyValue"}],PropertyNumberRunner:[function(e,t,o){"use strict";cc._RF.push(t,"acdc1CPEYZE8ZFSbihz30GT","PropertyNumberRunner");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyNumberRunner=void 0;var i=e("./PropertyRunner"),a=.05,c=function(e){function t(t,o,r,n,i){void 0===n&&(n=!1),void 0===i&&(i=1e3*a);var c=e.call(this,t,o,null,null,null)||this;return c.property=t,c.map=o,c.seconds=r,c.float=n,c.updateMs=i,c.interval=function(e,t){c.actualValue=e;var o=Math.round(Math.max(r/a,1));return c.increment=(t-e)/o,c.revert=c.increment<0,c.updateMs},c.update=function(e,t){return c.actualValue=_.clamp(c.actualValue+c.increment,Math.min(e,t),Math.max(e,t)),n?_.round(c.actualValue,2):Math.round(c.actualValue)},c.canRun=function(e,t){return c.actualValue!==t},c}return n(t,e),t}(i.PropertyRunner);o.PropertyNumberRunner=c,cc._RF.pop()},{"./PropertyRunner":"PropertyRunner"}],PropertyRunner:[function(e,t,o){"use strict";cc._RF.push(t,"c428akdVjxDmKo8/jjQqLx1","PropertyRunner");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyRunner=void 0;var i=function(e){function t(t,o,r,n,i){var a=e.call(this,!1)||this;return a.property=t,a.map=o,a.interval=r,a.update=n,a.canRun=i,a._intervalId=null,a.dependence(t,function(e){e.name?(a.pre=a.property.value,a.next=a.property.value,a.reactiveValue(e,a.next),a.addEvent(e.name,a.onChangeValue)):cc.error("PropertyRunner init error, property name empty")}),a}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.onChangeValue=function(e,t){if(this.next=t,null===this._intervalId&&this.canRun(this.pre,this.next)){var o=this.interval(this.pre,this.next);o>0&&(this._intervalId=setInterval(this._update.bind(this),o))}},t.prototype.reactiveValue=function(e,t){this.map&&(t=this.map(e,this.pre,this.next)),this._value=t,this.emit()},t.prototype._update=function(){this.pre=this.update(this.pre,this.next),this.reactiveValue(this,this.pre),this.canRun(this.pre,this.next)||(clearInterval(this._intervalId),this._intervalId=null)},t}(e("./Property").Property);o.PropertyRunner=i,cc._RF.pop()},{"./Property":"Property"}],PropertyTrigger:[function(e,t,o){"use strict";cc._RF.push(t,"d7f01zlvklLoJ1mK9XZ9Ebn","PropertyTrigger");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyTrigger=void 0;var i=function(e){function t(t,o){void 0===o&&(o=0);var r=e.call(this,null,!1)||this;return r.callFunc=t,r.delaySeconds=o,r.alwayTrigger=!0,r}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){e=this.onChangeValue(e),(this.alwayTrigger||this._value!==e)&&(this._value=e,this.emit(),this.callFunc&&(this.delaySeconds>0?setTimeout(this.callFunc,1e3*this.delaySeconds):this.callFunc()))},enumerable:!1,configurable:!0}),t.prototype.initEmit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(e("./PropertyValue").PropertyValue);o.PropertyTrigger=i,cc._RF.pop()},{"./PropertyValue":"PropertyValue"}],PropertyValue:[function(e,t,o){"use strict";cc._RF.push(t,"962e9vTuDRCBL9bf0AHYpvq","PropertyValue");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PropertyValue=void 0;var i=function(e){function t(t,o){void 0===t&&(t=null),void 0===o&&(o=!0);var r=e.call(this,o)||this;return r._value=t,r}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){e=this.onChangeValue(e),(this.alwayTrigger||this._value!==e)&&(this._value=e,this.emit())},enumerable:!1,configurable:!0}),t.prototype.onChangeValue=function(e){return e},t}(e("./Property").Property);o.PropertyValue=i,cc._RF.pop()},{"./Property":"Property"}],Property:[function(e,t,o){"use strict";cc._RF.push(t,"67ea3TEQFtBJqvjU2vqrb1f","Property");var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,n++)r[n]=i[a];return r};Object.defineProperty(o,"__esModule",{value:!0}),o.Property=void 0;var n=e("../const"),i=e("../lib"),a=function(){function e(e){void 0===e&&(e=!0),this.serialize=e,this.alwayTrigger=!1,this.debug=!1,this.initializeCompleted=[]}return e.prototype.initialize=function(e){this.name=e;for(var t=0,o=this.initializeCompleted;t<o.length;t++)(0,o[t])(this);this.initializeCompleted.length=0},e.prototype.dependence=function(e,t){e&&(e.name?t(e):e.initializeCompleted.push(t))},e.prototype.destroy=function(){i.Reactive.removeTarget(this)},Object.defineProperty(e.prototype,"type",{get:function(){return n.PROTOTYPE_TYPE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},set:function(){},enumerable:!1,configurable:!0}),e.prototype.addEvent=function(e,t){i.Reactive.addEvent(e,this,t)},e.prototype.emit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.debug&&(cc.log("Property "+this.name+" emit change data "+this.value),console.log((new Error).stack)),i.Reactive.emit.apply(i.Reactive,r([this.name,this,this.value],e))},e.prototype.initEmit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.emit.apply(this,e)},e}();o.Property=a,cc._RF.pop()},{"../const":"const","../lib":"lib"}],RatePopup:[function(e,t,o){"use strict";cc._RF.push(t,"5b48fgyVShMerEyNp4dGdiJ","RatePopup");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Player/player.model"),c=e("./Base/models/popupsview.model"),l=e("./Base/components/BasePopup"),s=e("../ConstantNative"),p=e("../Utils/RestAPIManager"),u=e("../../Plugin/Native/NativeGeneralInfo"),d=e("../../Plugin/Native/Rate"),h=e("../Manager4Native/AnalyticManager"),f=cc._decorator,y=f.ccclass,v=f.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starButtons=[],t.starContainer=null,t.rate=0,t.callbackHide=null,t}var o;return n(t,e),o=t,t.prototype.start=function(){this.starContainer.on(cc.Node.EventType.TOUCH_START,this.onRateStart.bind(this),this),this.starContainer.on(cc.Node.EventType.TOUCH_MOVE,this.onRateStart.bind(this),this),this.starContainer.on(cc.Node.EventType.TOUCH_END,this.onRateEnd.bind(this),this)},t.prototype.onLoad=function(){null==o.totalGamePlayedFromLaunchGame&&(o.totalGamePlayedFromLaunchGame=a.Player.playedGames.value)},t.prototype.onShow=function(){this.callbackHide=c.PopupView.rate.value.callbackHide,this.onStarClicked(null,a.Player.rating.value)},t.prototype.onHide=function(){this.callbackHide&&(this.callbackHide(),this.callbackHide=null)},t.prototype.onStarClicked=function(e,t){t=Number(t),this.rate=t,this.starButtons.map(function(e){return e.node.getChildByName("sprite")}).forEach(function(e,o){return e.opacity=o<t?255:0})},t.prototype.onRateStart=function(e){var t=this.starContainer.parent.convertToNodeSpaceAR(e.getLocation());if(!(t.y>this.starContainer.y+this.starContainer.height/2||t.y<this.starContainer.y-this.starContainer.height/2))for(var o=this.starButtons.length-1;o>=0;o--)if(t.x>=this.starButtons[o].node.getPosition().x-50){this.onStarClicked(null,o+1),this.rate=o+1;break}},t.prototype.onRateEnd=function(e){this.onRateStart(e),this.onRateClicked()},t.prototype.onRateClicked=function(){var e=this;a.Player.rating.value=this.rate,h.default.logEventUX("PopupRate","Rate_"+this.rate),cc.tween(this.node).delay(.1).call(function(){if(e.rate<=3&&e.rate>0)c.PopupView.feedback.value={rate:e.rate,callbackHide:e.callbackHide},e.callbackHide=null;else if(e.rate>0){var t=s.APPLE_APP_ID;cc.sys.os==cc.sys.OS_ANDROID&&(t=s.GOOGLE_APP_ID),p.default.Instance.sendFeedback("",e.rate,u.default.getDeviceName(),"",u.default.getOS(),u.default.getOSVersion(),u.default.getDeviceName(),u.default.getVersionCode(),Math.floor(Date.now()/1e3),u.default.getCountry(),s.PROJECT_NAME,t,null),d.rate(s.APPLE_APP_ID,s.GOOGLE_APP_ID)}e.getComponent(l.default).hide()}).start()},t.totalGamePlayedFromLaunchGame=null,i([v([cc.Button])],t.prototype,"starButtons",void 0),i([v(cc.Node)],t.prototype,"starContainer",void 0),o=i([y],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../../Plugin/Native/NativeGeneralInfo":"NativeGeneralInfo","../../Plugin/Native/Rate":"Rate","../ConstantNative":"ConstantNative","../Manager4Native/AnalyticManager":"AnalyticManager","../Player/player.model":"player.model","../Utils/RestAPIManager":"RestAPIManager","./Base/components/BasePopup":"BasePopup","./Base/models/popupsview.model":"popupsview.model"}],Rate:[function(e,t,o){"use strict";cc._RF.push(t,"cd194FKYhND8qIUpbZVE24J","Rate"),Object.defineProperty(o,"__esModule",{value:!0}),o.rate=void 0,o.rate=function(e,t){var o;o=cc.sys.os===cc.sys.OS_IOS?"itms-apps://itunes.apple.com/us/app/apple-store/id"+e+"?mt=8&action=write-review":"market://details?id="+t,cc.sys.openURL(o)},cc._RF.pop()},{}],"React.decorator":[function(e,t,o){"use strict";cc._RF.push(t,"5f910VQNypK5awYXpRpT7JS","React.decorator"),Object.defineProperty(o,"__esModule",{value:!0}),o.react=void 0;var r=e("../const");o.react=function(e){return function(t,o){e.func=o,Array.isArray(t[r.PROTOTYPE_HANDLERS])?t[r.PROTOTYPE_HANDLERS].push(e):t[r.PROTOTYPE_HANDLERS]=[e]}},cc._RF.pop()},{"../const":"const"}],ReactBindingData:[function(e,t,o){"use strict";cc._RF.push(t,"9f1f0doeSREC69cJiIWG7xV","ReactBindingData");var r=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ReactBindingData=o.ReactDataType=void 0;var n=cc._decorator,i=n.ccclass,a=n.property;o.ReactDataType=cc.Enum({ANY:0,STRING:1,NUMBER:2,BOOLEAN:3});var c=function(){function e(){this.event="",this.data="",this.dataType=o.ReactDataType.ANY}var t;return t=e,e.create=function(e,r,n){void 0===r&&(r=null),void 0===n&&(n=o.ReactDataType.ANY);var i=new t;return i.event=e,i.data=r,i.dataType=n,i},r([a(cc.String)],e.prototype,"event",void 0),r([a(cc.String)],e.prototype,"data",void 0),r([a({type:o.ReactDataType})],e.prototype,"dataType",void 0),t=r([i("ReactBindingData")],e)}();o.ReactBindingData=c,cc._RF.pop()},{}],ReactiveAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"1e7a2Cq4WVJZ5wwX6wzkvZq","ReactiveAnimation");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animation=null,t.animationIndex=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.animation||(this.animation=this.getComponent(cc.Animation))},t.prototype.reload=function(){},t.prototype.onChangeValue=function(e,t){this.playAnimation(t)},t.prototype.playAnimation=function(e){if(this.animation){var t=this.animation.getClips()[this.animationIndex];if(!t)return;e?this.animation.play(t.name):this.animation.stop(t.name)}},i([s(cc.Animation)],t.prototype,"animation",void 0),i([s({type:cc.Integer,min:0})],t.prototype,"animationIndex",void 0),i([l,p("Reactive/ReactiveAnimation")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveAudio:[function(e,t,o){"use strict";cc._RF.push(t,"7d5b93/wpBLS7ON44j5AYkL","ReactiveAudio");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audioClip=null,t.loop=!1,t.volume=1,t.playOnLoad=!1,t.audioId=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.reload=function(e){null!==e&&this.playOnLoad&&this.onChangeValue(null,e)},t.prototype.onChangeValue=function(e,t){var o=typeof t,r=null!==this.audioId?cc.audioEngine.getState(this.audioId):cc.audioEngine.AudioState.STOPPED;"boolean"===o?t?this.audioId=cc.audioEngine.play(this.audioClip,this.loop,this.volume):r!==cc.audioEngine.AudioState.PLAYING&&r!==cc.audioEngine.AudioState.INITIALZING||cc.audioEngine.stop(this.audioId):"number"===o&&(this.volume=t,r===cc.audioEngine.AudioState.PLAYING||r===cc.audioEngine.AudioState.INITIALZING?cc.audioEngine.setVolume(this.audioId,this.volume):this.audioId=cc.audioEngine.play(this.audioClip,this.loop,this.volume))},i([s({type:cc.AudioClip})],t.prototype,"audioClip",void 0),i([s(cc.Boolean)],t.prototype,"loop",void 0),i([s({type:cc.Float,min:0,max:1})],t.prototype,"volume",void 0),i([s(cc.Boolean)],t.prototype,"playOnLoad",void 0),i([l,p("Reactive/ReactiveAudio")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveBindingData:[function(e,t,o){"use strict";cc._RF.push(t,"67210oPCRNMQoKI9wTAVskv","ReactiveBindingData");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../lib"),c=e("./ReactBindingData"),l=e("./ReactiveComponent"),s=cc._decorator,p=s.ccclass,u=s.property,d=s.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dataBinding=!0,t.bindings=[],t}return n(t,e),t.prototype.updateData=function(e){if(void 0===e&&(e=null),this.previousValue=e,this.dataBinding&&this.bindings.length>0)for(var t=void 0,o=0,r=this.bindings;o<r.length;o++){var n=r[o];if(null!==(t=null!==n.data?n.data:e))switch(n.dataType){case c.ReactDataType.BOOLEAN:t="true"===t.toString();break;case c.ReactDataType.NUMBER:t=Number(t);break;case c.ReactDataType.STRING:t=t.toString()}a.repository.setValue(n.event,t)}},i([u(cc.Boolean)],t.prototype,"dataBinding",void 0),i([u({type:[c.ReactBindingData],visible:function(){return this.dataBinding}})],t.prototype,"bindings",void 0),i([p,d("Reactive/ReactiveBindingData")],t)}(l.default);o.default=h,cc._RF.pop()},{"../lib":"lib","./ReactBindingData":"ReactBindingData","./ReactiveComponent":"ReactiveComponent"}],ReactiveButton:[function(e,t,o){"use strict";cc._RF.push(t,"77569xj3DZBhLOBUfSlwcnG","ReactiveButton");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Model/Repository"),c=e("../const"),l=e("./ReactiveBindingData"),s=cc._decorator,p=s.ccclass,u=s.property,d=s.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button=null,t.soundEvent=c.SOUND_BUTTON_EVENT,t.clickDelay=!0,t.clickTime=0,t}return n(t,e),t.prototype.onLoad=function(){if(e.prototype.onLoad.call(this),this.button||(this.button=this.getComponent(cc.Button)),this.button){var t=new cc.Component.EventHandler;t.component="ReactiveButton",t.target=this.node,t.handler="onClick",this.button.clickEvents.push(t)}this.clickDelay=!0},t.prototype.reload=function(e){null!==e&&this.button&&(this.button.interactable=e)},t.prototype.onChangeValue=function(e,t){this.button&&(this.button.interactable=t)},t.prototype.onClick=function(){this.clickDelay&&Date.now()-this.clickTime<1e3||(this.clickTime=Date.now(),this.soundEvent&&a.repository.setValue(this.soundEvent,null),this.updateData())},i([u(cc.Button)],t.prototype,"button",void 0),i([u(cc.String)],t.prototype,"soundEvent",void 0),i([u(cc.Boolean)],t.prototype,"clickDelay",void 0),i([p,d("Reactive/ReactiveButton")],t)}(l.default);o.default=h,cc._RF.pop()},{"../Model/Repository":"Repository","../const":"const","./ReactiveBindingData":"ReactiveBindingData"}],ReactiveColor:[function(e,t,o){"use strict";cc._RF.push(t,"8f581td2X9Gv4NwLxamPmpK","ReactiveColor");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.content||(this.content=this.node)},t.prototype.reload=function(e){null!==e&&this.content&&(this.content.color=e)},t.prototype.onChangeValue=function(e,t){this.content&&(this.content.color=t)},i([s(cc.Node)],t.prototype,"content",void 0),i([l,p("Reactive/ReactiveColor")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveComponent:[function(e,t,o){"use strict";cc._RF.push(t,"d925d9okIpGfIb1Pkx9doky","ReactiveComponent");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Property/ReactiveProperty"),c=e("../Model/Repository"),l=cc._decorator,s=l.ccclass,p=l.property,u=l.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.event="",t.alwayTrigger=!1,t.previousValue=null,t}return n(t,e),t.prototype.onLoad=function(){this.event&&a.Reactive.addEvent(this.event,this,this._onChangeValue)},t.prototype.onEnable=function(){this._reload()},t.prototype.onDestroy=function(){this.event&&a.Reactive.removeTarget(this)},t.prototype.eventName=function(){return this.event},t.prototype.changeEvent=function(e){e!==this.event&&(this.event=e,a.Reactive.addEvent(this.event,this,this._onChangeValue),this.previousValue=null,this._reload())},t.prototype._reload=function(){var e=c.repository.getValue(this.event);e!==this.previousValue&&(this.reload(e),this.previousValue=e)},t.prototype._onChangeValue=function(e,t){(this.alwayTrigger||t!==this.previousValue)&&(this.onChangeValue(e,t),this.previousValue=t)},t.prototype.reload=function(){},t.prototype.onChangeValue=function(e,t){this.previousValue=t},i([p(cc.String)],t.prototype,"event",void 0),i([p(cc.Boolean)],t.prototype,"alwayTrigger",void 0),i([s,u("Reactive/ReactiveComponent")],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../Model/Repository":"Repository","../Property/ReactiveProperty":"ReactiveProperty"}],ReactiveCustomHandlers:[function(e,t,o){"use strict";cc._RF.push(t,"3cfadsfUyZHhYK5XwegIMr6","ReactiveCustomHandlers");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlers=[],t}return n(t,e),t.prototype.onChangeValue=function(e,t){this.handlers.forEach(function(o){return o.emit([e,t])})},i([s([cc.Component.EventHandler])],t.prototype,"handlers",void 0),i([l,p("Reactive/ReactiveCustomHandlers")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveEnable:[function(e,t,o){"use strict";cc._RF.push(t,"54bd5e+8Y5BPI+Dwf+ZNRyC","ReactiveEnable");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.component=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.reload=function(e){null!==e&&this.component&&(this.component.enabled=!!e)},t.prototype.onChangeValue=function(e,t){this.component&&(this.component.enabled=!!t)},i([s(cc.Component)],t.prototype,"component",void 0),i([l,p("Reactive/ReactiveEnable")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveLabel:[function(e,t,o){"use strict";cc._RF.push(t,"cd3e05d4ARLo5socqTkvdAV","ReactiveLabel");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.label||(this.label=this.getComponent(cc.Label))},t.prototype.reload=function(e){null!=e&&this.label&&(this.label.string=e.toString())},t.prototype.onChangeValue=function(e,t){this.label&&(this.label.string=t.toString()||"")},i([s(cc.Label)],t.prototype,"label",void 0),i([l,p("Reactive/ReactiveLabel")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveNode:[function(e,t,o){"use strict";cc._RF.push(t,"7a239wlUT5HJ4ig1eR6Aus8","ReactiveNode");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=(c.property,c.menu),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.reload=function(e){null!==e&&(this.node.active=e)},t.prototype.onChangeValue=function(e,t){this.node.active=t},i([l,s("Reactive/ReactiveNode")],t)}(a.default);o.default=p,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveOpacity:[function(e,t,o){"use strict";cc._RF.push(t,"9afa3be6I5PYapU3Ei+Lioe","ReactiveOpacity");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.invert=!1,t.content=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.content||(this.content=this.node)},t.prototype.reload=function(e){null!==e&&this.content&&(this.content.opacity="number"==typeof e?e:e?255:0,this.invert&&(this.content.opacity=this.content.opacity?0:255))},t.prototype.onChangeValue=function(e,t){this.content&&(this.content.opacity="number"==typeof t?t:t?255:0,this.invert&&(this.content.opacity=this.content.opacity?0:255))},i([s(cc.Boolean)],t.prototype,"invert",void 0),i([s(cc.Node)],t.prototype,"content",void 0),i([l,p("Reactive/ReactiveOpacity")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactivePosition:[function(e,t,o){"use strict";cc._RF.push(t,"98464EOB85HdJMf3tZq2KJw","ReactivePosition");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.content||(this.content=this.node)},t.prototype.reload=function(e){if(null!==e&&this.content)if("number"==typeof e){var t=this.content.position;t.x=e,this.content.setPosition(t)}else this.content.setPosition(e)},t.prototype.onChangeValue=function(e,t){if(this.content)if("number"==typeof t){var o=this.content.position;o.x=t,this.content.setPosition(o)}else this.content.setPosition(t)},i([s(cc.Node)],t.prototype,"content",void 0),i([l,p("Reactive/ReactivePosition")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveProgressBar:[function(e,t,o){"use strict";cc._RF.push(t,"80e36R2FApGbZryLMQfKknA","ReactiveProgressBar");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bar=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.bar||(this.bar=this.getComponent(cc.ProgressBar))},t.prototype.reload=function(e){null!==e&&this.bar&&(this.bar.progress=e)},t.prototype.onChangeValue=function(e,t){this.bar&&(this.bar.progress=t)},i([s(cc.ProgressBar)],t.prototype,"bar",void 0),i([l,p("Reactive/ReactiveProgressBar")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveProperty:[function(e,t,o){"use strict";cc._RF.push(t,"2f52bBK1dxJs4edQtF43FLX","ReactiveProperty");var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,n++)r[n]=i[a];return r};Object.defineProperty(o,"__esModule",{value:!0}),o.Reactive=void 0;var n=e("../const"),i=e("../Model/Repository"),a=function(){function e(){this._events={}}return e.prototype.addEvent=function(e,t,o,r,n){this._events[e]?this._events[e].push({target:t,func:o,condition:r,props:n}):this._events[e]=[{target:t,func:o,condition:r,props:n}]},e.prototype.addTarget=function(e){if(Array.isArray(e[n.PROTOTYPE_HANDLERS]))for(var t=0,o=e[n.PROTOTYPE_HANDLERS];t<o.length;t++){var r=o[t];this.addEvent(r.event,e,r.func,r.condition,r.props)}},e.prototype.removeEvent=function(e,t,o){if(this._events[e]){var r=this._events[e].filter(function(e){return o?e.target!==t||e.func===o:e.target!==t});this._events[e]=r}},e.prototype.removeTarget=function(e){for(var t=0,o=Object.keys(this._events);t<o.length;t++){var r=o[t];this.removeEvent(r,e)}},e.prototype.emit=function(e,t,o){for(var n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a];if(this._events[e])for(var c=0,l=this._events[e];c<l.length;c++){var s=l[c],p=s.target,u=s.func,d=s.condition,h=s.props,f=r(n);h&&(f=r(h.map(function(e){return i.repository.getValue(e)}),f)),d&&!d.apply(void 0,r([t?t.value:o],f))||("string"==typeof u?p[String(u)].apply(p,r([t,t?t.value:o],f)):u.call.apply(u,r([p,t,t?t.value:o],f)))}},e.prototype.emitModel=function(e){e[n.PROTOTYPE_PROPS].forEach(function(t){var o=t.name;e[o]&&e[o].initEmit&&e[o].initEmit()})},e}();o.Reactive=new a,cc._RF.pop()},{"../Model/Repository":"Repository","../const":"const"}],ReactiveScale:[function(e,t,o){"use strict";cc._RF.push(t,"779a5DAWv1Om5+Ri6ehrbvp","ReactiveScale");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.content||(this.content=this.node)},t.prototype.reload=function(e){null!==e&&this.content&&this.content.setScale(e)},t.prototype.onChangeValue=function(e,t){this.content&&this.content.setScale(t)},i([s(cc.Node)],t.prototype,"content",void 0),i([l,p("Reactive/ReactiveScale")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveSize:[function(e,t,o){"use strict";cc._RF.push(t,"21227elEQtPYr/r+apj4kcy","ReactiveSize");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.content||(this.content=this.node)},t.prototype.reload=function(e){null!==e&&this.content&&this.updateSize(e)},t.prototype.onChangeValue=function(e,t){this.content&&this.updateSize(t)},t.prototype.updateSize=function(e){var t=this.content.getContentSize();"number"==typeof e?t.width=e:t=e,this.content.setContentSize(t)},i([s(cc.Node)],t.prototype,"content",void 0),i([l,p("Reactive/ReactiveSize")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveSlider:[function(e,t,o){"use strict";cc._RF.push(t,"d5f3bTLXIdLx5maV9m/us7i","ReactiveSlider");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveBindingData"),c=e("./ReactBindingData"),l=cc._decorator,s=l.ccclass,p=l.property,u=l.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slider=null,t}return n(t,e),t.prototype.onLoad=function(){if(e.prototype.onLoad.call(this),!this.slider){this.slider=this.getComponent(cc.Slider);var t=new cc.Component.EventHandler;t.component="ReactiveSlider",t.target=this.node,t.handler="sliderEvent",this.slider.slideEvents.push(t)}this.dataBinding&&this.bindings.push(c.ReactBindingData.create(this.event))},t.prototype.reload=function(e){null!==e&&this.slider&&(this.slider.progress=Number(e))},t.prototype.sliderEvent=function(e){void 0!==this.previousValue&&e.progress!==this.previousValue&&this.updateData(e.progress)},t.prototype.onChangeValue=function(e,t){this.slider&&(this.slider.progress=Number(t))},i([p(cc.Slider)],t.prototype,"slider",void 0),i([s,u("Reactive/ReactiveSlider")],t)}(a.default);o.default=d,cc._RF.pop()},{"./ReactBindingData":"ReactBindingData","./ReactiveBindingData":"ReactiveBindingData"}],ReactiveSpriteFrame:[function(e,t,o){"use strict";cc._RF.push(t,"0fd56isakxNZbtURzO3WkeZ","ReactiveSpriteFrame");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveComponent"),c=cc._decorator,l=c.ccclass,s=c.property,p=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.sprite||(this.sprite=this.getComponent(cc.Sprite))},t.prototype.reload=function(e){null!==e&&this.sprite&&this.loadSprite(e)},t.prototype.onChangeValue=function(e,t){this.loadSprite(t)},t.prototype.loadSprite=function(e){var t=this;if(this.sprite)if("string"==typeof e){if(0===e.indexOf("http"))return void cc.loader.load({url:e,type:"png"},function(e,o){e?cc.error(e):o instanceof cc.Texture2D&&(t.sprite.spriteFrame=new cc.SpriteFrame(o))});var o=cc.loader.getRes(e,cc.SpriteFrame);if(o)return void(this.sprite.spriteFrame=o);cc.loader.loadRes(e,cc.SpriteFrame,function(e,o){e?cc.error(e):t.sprite.spriteFrame=o})}else e instanceof cc.SpriteFrame&&(this.sprite.spriteFrame=e)},i([s(cc.Sprite)],t.prototype,"sprite",void 0),i([l,p("Reactive/ReactiveSpriteFrame")],t)}(a.default);o.default=u,cc._RF.pop()},{"./ReactiveComponent":"ReactiveComponent"}],ReactiveToggle:[function(e,t,o){"use strict";cc._RF.push(t,"d349eTeufdCmp9wdAvJ18GG","ReactiveToggle");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ReactiveBindingData"),c=e("../Model/Repository"),l=e("../const"),s=e("./ReactBindingData"),p=cc._decorator,u=p.ccclass,d=p.property,h=p.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggle=null,t.soundEvent=l.SOUND_BUTTON_EVENT,t.playSound=!1,t}return n(t,e),t.prototype.onLoad=function(){if(e.prototype.onLoad.call(this),!this.toggle){this.toggle=this.getComponent(cc.Toggle);var t=new cc.Component.EventHandler;t.component="ReactiveToggle",t.target=this.node,t.handler="checkEvent",this.toggle.checkEvents.push(t)}this.dataBinding&&this.bindings.push(s.ReactBindingData.create(this.event))},t.prototype.reload=function(e){null!==e&&this.toggle&&(this.toggle.isChecked=!!e)},t.prototype.onEnable=function(){this.playSound=!1,e.prototype.onEnable.call(this),this.playSound=!0},t.prototype.checkEvent=function(e){void 0!==this.previousValue&&e.isChecked!==this.previousValue&&(this.playSound&&this.soundEvent&&c.repository.setValue(this.soundEvent,null),isNaN(this.previousValue)?this.updateData(e.isChecked):this.updateData(e.isChecked?1:0))},t.prototype.onChangeValue=function(e,t){this.toggle&&(this.toggle.isChecked=!!t)},i([d(cc.Toggle)],t.prototype,"toggle",void 0),i([d(cc.String)],t.prototype,"soundEvent",void 0),i([u,h("Reactive/ReactiveToggle")],t)}(a.default);o.default=f,cc._RF.pop()},{"../Model/Repository":"Repository","../const":"const","./ReactBindingData":"ReactBindingData","./ReactiveBindingData":"ReactiveBindingData"}],RemoteConfigManager:[function(e,t,o){"use strict";cc._RF.push(t,"e7495G0YT9BmYMMiIJVnoyx","RemoteConfigManager"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Plugin/Native/Firebase/RemoteConfig/FirebaseRemoteConfig"),n=new(function(){function e(){}return e.prototype.init=function(){r.default.init()},e.prototype.getRequestIDFA=function(){return"1"===r.default.getConfigByKey("remote_idfa")},e}());o.default=n,cc._RF.pop()},{"../../Plugin/Native/Firebase/RemoteConfig/FirebaseRemoteConfig":"FirebaseRemoteConfig"}],Repository:[function(e,t,o){"use strict";cc._RF.push(t,"0bf52OlhIpL5K7BSV30wirF","Repository");var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,n++)r[n]=i[a];return r};Object.defineProperty(o,"__esModule",{value:!0}),o.repository=void 0;var n=e("../encrypt/encrypt"),i=e("../const"),a=e("../Property/ReactiveProperty"),c=function(){function e(){this._models={}}return e.prototype.register=function(e,t,o){if(void 0===t&&(t=!1),!this._models[e.name])return this._models[e.name]=e,this.setupProperties(e),t&&this.load(e.name,o),a.Reactive.emitModel(e),e;cc.error("model "+e.name+" already exists")},e.prototype.unregister=function(e){if(this._models[e]){var t=this._models[e];t[i.PROTOTYPE_PROPS].forEach(function(e){var o=e.name;t[o]&&t[o].type===i.PROTOTYPE_TYPE&&t[o].destroy&&t[o].destroy()}),t&&t.onDestroy(),delete this._models[e]}},e.prototype.unregisterReg=function(e){var t=this;Object.keys(this._models).forEach(function(o){e.test(o)&&t.unregister(o)})},e.prototype.setupProperties=function(e){e[i.PROTOTYPE_PROPS].forEach(function(t){var o=t.name,r=t.options;e[o]&&e[o].type===i.PROTOTYPE_TYPE&&!e[o].name&&(r&&Object.keys(r).forEach(function(t){return e[o][t]=r[t]}),e[o].initialize(e.name+"."+o))})},e.prototype.getModel=function(e){return this._models[e]},e.prototype.getValue=function(e){for(var t,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var n=e.split("."),i=n[0],a=n[1];return this._models[i]&&this._models[i][a]?"function"==typeof this._models[i][a]?(t=this._models[i])[a].apply(t,o):this._models[i][a].value:null},e.prototype.setValue=function(e,t){for(var o,n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var a=e.split("."),c=a[0],l=a[1];this._models[c]&&this._models[c][l]&&("function"==typeof this._models[c][l]?(o=this._models[c])[l].apply(o,r([t],n)):this._models[c][l].value=t)},e.prototype.callFunc=function(e){for(var t,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var n=e.split("."),i=n[0],a=n[1];return this._models[i]&&this._models[i][a]?(t=this._models[i])[a].apply(t,o):null},e.prototype.clearSave=function(e){cc.sys.localStorage.removeItem(e+".model")},e.prototype.loadAll=function(){for(var e=0,t=Object.keys(this._models);e<t.length;e++){var o=t[e];this.load(o)}},e.prototype.load=function(e,t){if(this._models[e].serializable){var o=cc.sys.localStorage.getItem((t||e)+".model");if(o){var r=n.Aes.Ctr.decrypt(o,i.ENCRYPT_KEY,256);this._models[e].deserialize(JSON.parse(r))}}},e.prototype.saveAll=function(){for(var e=0,t=Object.keys(this._models);e<t.length;e++){var o=t[e];this.save(o,this._models[o].saveFile)}},e.prototype.save=function(e,t){if(this._models[e].serializable){var o=JSON.stringify(this._models[e].serialize());if(o){var r=n.Aes.Ctr.encrypt(o,i.ENCRYPT_KEY,256);cc.sys.localStorage.setItem((t||e)+".model",r)}}},e}();o.repository=new c,cc._RF.pop()},{"../Property/ReactiveProperty":"ReactiveProperty","../const":"const","../encrypt/encrypt":"encrypt"}],RestAPIManager:[function(e,t,o){"use strict";cc._RF.push(t,"7ed11mo69JLqqcpvl0KSRUx","RestAPIManager");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i,a=e("../../Plugin/KDPlugin/Core/Helper"),c=cc._decorator,l=(c.ccclass,c.property,n(function(){return null!==i&&i.apply(this,arguments)||this},i=function(){}),function(){function e(){this.REQUEST_METHOD_POST="POST",this.REQUEST_METHOD_GET="GET"}return Object.defineProperty(e,"Instance",{get:function(){return e.instance||(e.instance=new e),e.instance},enumerable:!1,configurable:!0}),e.prototype.request=function(e,t,o,r,n,i){void 0===o&&(o=null),void 0===r&&(r="\x1dapplication/x-www-form-urlencoded"),void 0===n&&(n=null),void 0===i&&(i=null);var c="";a.KDCore.isNotNullObject(o)&&(e==this.REQUEST_METHOD_GET||e==this.REQUEST_METHOD_POST&&"\x1dapplication/x-www-form-urlencoded"==r?Object.keys(o).forEach(function(e){a.KDCore.isNullObject(o[e])||(c.length>0&&(c+="&"),c+=e+"="+o[e])}):e==this.REQUEST_METHOD_POST&&"application/json;charset=UTF-8"==r&&(c=JSON.stringify(o))),e==this.REQUEST_METHOD_GET&&""!=c&&(t+="?"+c);var l=this,s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&(s.status>=200&&s.status<=400?a.KDCore.isNotNullObject(n)&&n(s):(l.handleRequestError(s),a.KDCore.isNotNullObject(i)&&i(s.response)))},s.open(e,t,!0),e==this.REQUEST_METHOD_GET?s.send():e==this.REQUEST_METHOD_POST&&(s.setRequestHeader("Content-Type",r),s.send(c))},e.prototype.requestWithHandled=function(e,t,o,r,n,i){var l=this;void 0===o&&(o=null),void 0===r&&(r="\x1dapplication/x-www-form-urlencoded"),void 0===n&&(n=null),void 0===i&&(i=null),this.request(e,t,o,r,function(e){var t=null,o=null,r=200==e.status;if(!r){l.handleRequestFailed(e);try{var i=JSON.parse(e.responseText);t=i.core_result_code,o=i.extra_info}catch(c){}}a.KDCore.isNotNullObject(n)&&n(r&&0==t,e.responseText,t,o,e)},i)},e.prototype.onHandledErrUnauthorized=function(){},e.prototype.onHandledErrOtherReason=function(){},e.prototype.onHandledErrInternetServer=function(){},e.prototype.handleRequestError=function(e){switch(e.status){case 401:this.onHandledErrUnauthorized();break;case 0:case 500:this.onHandledErrInternetServer();break;default:this.onHandledErrOtherReason(e)}},e.prototype.onHandledFailedWrongToken=function(){},e.prototype.onHandledFailedOtherReason=function(){},e.prototype.handleRequestFailed=function(){},e.prototype.sendFeedback=function(e,t,o,r,n,i,a,c,l,s,p,u,d,h,f,y){void 0===h&&(h=""),void 0===f&&(f=""),void 0===y&&(y=0);var v={email:e,fbEmail:h,fbid:f,rating:t,tracking:o,feedback:r,os:n,osVersion:i,device:a,version:c,timestamp:l,country:s,projectName:p,type:y,packageName:u};this.request(this.REQUEST_METHOD_POST,"https://apibi.athena.studio/api/feedback",v,"application/json;charset=UTF-8",function(){d&&d(!0)})},e.instance=null,e}());o.default=l,cc._RF.pop()},{"../../Plugin/KDPlugin/Core/Helper":"Helper"}],Setting:[function(e,t,o){"use strict";cc._RF.push(t,"61c91vd4IZObZE5xE2Z3hqi","Setting");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./../../Plugin/Reactive/Property/ReactiveProperty"),c=e("./../ConstantNative"),l=e("../../Plugin/Native/IAP/IAPHelper"),s=e("../../Plugin/Reactive/lib"),p=e("../Player/player.model"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.removeAdsNode=null,t}return n(t,e),t.prototype.onLoad=function(){a.Reactive.addTarget(this)},t.prototype.onDestroy=function(){a.Reactive.removeTarget(this)},t.prototype.onShow=function(){this.onRemoveAdsChanged()},t.prototype.onRemoveAdsChanged=function(){this.removeAdsNode&&(this.removeAdsNode.active=!p.Player.removedAds.value)},t.prototype.onRemoveAdsClicked=function(){l.default.purchase(c.IAPProductIds.RemoveAds,null)},t.prototype.onRestoreClicked=function(){l.default.restore(null)},t.prototype.onPremium1Clicked=function(){l.default.purchase(c.IAPProductIds.Coin1,null)},t.prototype.onPremium2Clicked=function(){l.default.purchase(c.IAPProductIds.Premium2,null)},i([h(cc.Node)],t.prototype,"removeAdsNode",void 0),i([s.react({event:p.PlayerProps.removedAds})],t.prototype,"onRemoveAdsChanged",null),i([d],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../Plugin/Native/IAP/IAPHelper":"IAPHelper","../../Plugin/Reactive/lib":"lib","../Player/player.model":"player.model","./../../Plugin/Reactive/Property/ReactiveProperty":"ReactiveProperty","./../ConstantNative":"ConstantNative"}],SetupScriptController:[function(e,t,o){"use strict";cc._RF.push(t,"adc69LWwWVBnb8bsB3fdc69","SetupScriptController");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./CustomBoardBlock/PopupCustomBlocks"),c=e("./CustomBoardBlock/BoardCustom"),l=e("../ManagerSetupScripts"),s=e("../../../Plugin/KDPlugin/MatrixGame/TableMatrix"),p=e("../../../Script/CoreGameplayEx/BoardGame"),u=e("../../../Script/CoreGameplayEx/ConstantGameplay"),d=e("../../../Plugin/KDPlugin/Core/TextureUtil/KDTextureUtil"),h=cc._decorator,f=h.ccclass,y=h.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.popupCustomBlocks=null,t.board=null,t.loading=null,t.labelNameImgBoardBg=null,t.labelNameImgCurBlock=null,t.labelNameImgNextBlock=null,t.labelNameImgHoldBlock=null,t}return n(t,e),t.prototype.onLoad=function(){l.default.bgCustomeBase64&&(this.labelNameImgBoardBg.string=l.default.bgCustomeBase64),l.default.bgCurBlockBase64&&(this.labelNameImgCurBlock.string=l.default.bgCurBlockBase64),l.default.bgNextBlockBase64&&(this.labelNameImgNextBlock.string=l.default.bgNextBlockBase64),l.default.bgHoldBlockBase64&&(this.labelNameImgHoldBlock.string=l.default.bgHoldBlockBase64)},t.prototype.start=function(){var e=this;this.scheduleOnce(function(){l.default.boardMatrix&&(e.board.setTableMatrix(l.default.boardMatrix),e.board.setStarList(l.default.starsList)),l.default.blocksQueueMatrix&&e.popupCustomBlocks.addBlocksSelected(l.default.blocksQueueMatrix)},.05)},t.prototype.loadFromData=function(e){this.board.setTableMatrix(e.boardMatrix),this.board.setStarList(e.starList),this.popupCustomBlocks.clearCurrentQueue(),this.popupCustomBlocks.addBlocksSelected(e.blocksQueueMatrix)},t.prototype.getCurrentData=function(){return new l.ScriptData("",new s.default(this.board.tableMatrix.matrixCopy),this.popupCustomBlocks.getBlocksSelected().map(function(e){return new s.default(e.tableMatrix.matrixCopy)}),this.board.getStarList())},t.prototype.onSelectTheme=function(e,t){l.default.boardMatrix=new s.default(this.board.tableMatrix.matrixCopy),l.default.blocksQueueMatrix=[],this.popupCustomBlocks.getBlocksSelected().forEach(function(e){l.default.blocksQueueMatrix.push(new s.default(e.tableMatrix.matrixCopy))}),l.default.starsList=this.board.getStarList(),cc.director.loadScene(t),this.loading.active=!0},t.prototype.onResetClicked=function(){this.board.setTableMatrix(p.default.createTableMatrixDefaultForBoard(u.default.BOARD_ROW_TOP,u.default.BOARD_ROW_BOT,u.default.BOARD_COL_LEFT,u.default.BOARD_COL_RIGHT)),this.board.setStarList([]),this.popupCustomBlocks.clearCurrentQueue()},t.prototype.onSelectImgBoardBg=function(){var e=this;this.labelNameImgBoardBg.string="Choose File",l.default.bgCustomeBase64=null,d.default.seclectImgInBrowser(function(t){t&&(l.default.bgCustomeBase64=t,e.labelNameImgBoardBg.string=t)})},t.prototype.onSelectImgNextBlock=function(){var e=this;this.labelNameImgNextBlock.string="Choose File",l.default.bgNextBlockBase64=null,d.default.seclectImgInBrowser(function(t){t&&(l.default.bgNextBlockBase64=t,e.labelNameImgNextBlock.string=t)})},t.prototype.onSelectImgCurlock=function(){var e=this;this.labelNameImgCurBlock.string="Choose File",l.default.bgCurBlockBase64=null,d.default.seclectImgInBrowser(function(t){t&&(l.default.bgCurBlockBase64=t,e.labelNameImgCurBlock.string=t)})},t.prototype.onSelectImgHoldBlock=function(){var e=this;this.labelNameImgHoldBlock.string="Choose File",l.default.bgHoldBlockBase64=null,d.default.seclectImgInBrowser(function(t){t&&(l.default.bgHoldBlockBase64=t,e.labelNameImgHoldBlock.string=t)})},i([y(a.default)],t.prototype,"popupCustomBlocks",void 0),i([y(c.default)],t.prototype,"board",void 0),i([y(cc.Node)],t.prototype,"loading",void 0),i([y(cc.Label)],t.prototype,"labelNameImgBoardBg",void 0),i([y(cc.Label)],t.prototype,"labelNameImgCurBlock",void 0),i([y(cc.Label)],t.prototype,"labelNameImgNextBlock",void 0),i([y(cc.Label)],t.prototype,"labelNameImgHoldBlock",void 0),i([f],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../Plugin/KDPlugin/Core/TextureUtil/KDTextureUtil":"KDTextureUtil","../../../Plugin/KDPlugin/MatrixGame/TableMatrix":"TableMatrix","../../../Script/CoreGameplayEx/BoardGame":"BoardGame","../../../Script/CoreGameplayEx/ConstantGameplay":"ConstantGameplay","../ManagerSetupScripts":"ManagerSetupScripts","./CustomBoardBlock/BoardCustom":"BoardCustom","./CustomBoardBlock/PopupCustomBlocks":"PopupCustomBlocks"}],Share:[function(e,t,o){"use strict";cc._RF.push(t,"1ad44QudmtLbojPTvVCNjKP","Share"),Object.defineProperty(o,"__esModule",{value:!0}),o.share=void 0,o.share=function(e,t,o){void 0===o&&(o=""),cc.sys.isNative&&jsb&&(cc.sys.os===cc.sys.OS_IOS?jsb.reflection.callStaticMethod("Share","share:content:url:",e,t,o):cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/natives/share/Share","share","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,t,o))},cc._RF.pop()},{}],StatisticView:[function(e,t,o){"use strict";cc._RF.push(t,"0b50eJ9FTxIjqAl2/XGPHpv","StatisticView");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Chart"),c=e("../statistic.model"),l=e("../../../Plugin/Reactive/lib"),s=e("../../SceneManager/scene.model"),p=e("../../SceneManager/scene.const"),u=e("../../Utils/number"),d=cc._decorator,h=d.ccclass,f=d.property,y=["Week","Month","Year"],v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chart=null,t.tabName=null,t.todayText=null,t.averageText=null,t}return n(t,e),t.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyBack,this)},t.prototype.onKeyBack=function(e){e.keyCode!==cc.macro.KEY.back&&e.keyCode!==cc.macro.KEY.escape||l.repository.setValue(s.SceneProps.scene,p.SceneNames.MENU)},t.prototype.start=function(){var e=this;this.scheduleOnce(function(){return e.onChangeTab(a.ChartType.Week)},1)},t.prototype.onChangeTab=function(e){var t=c.Statistic.getRecords(e);this.tabName.string=y[e],this.chart.setup(e,t);var o=c.Statistic.getTodayRecord();this.todayText.string="Today: "+(o?u.format(o.quantity):0),this.averageText.string="Average: "+u.format(c.Statistic.getAverage(t))},i([f(a.default)],t.prototype,"chart",void 0),i([f(cc.Label)],t.prototype,"tabName",void 0),i([f(cc.Label)],t.prototype,"todayText",void 0),i([f(cc.Label)],t.prototype,"averageText",void 0),i([h],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../Plugin/Reactive/lib":"lib","../../SceneManager/scene.const":"scene.const","../../SceneManager/scene.model":"scene.model","../../Utils/number":"number","../statistic.model":"statistic.model","./Chart":"Chart"}],TableConfig:[function(e,t,o){"use strict";cc._RF.push(t,"6a6527lsmVO5pUkqQZW8MXV","TableConfig");var r=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TableConfig=void 0;var n=e("./ConstantGameplay"),i=cc._decorator,a=i.ccclass,c=i.property,l=function(){function e(){this.cellSize=cc.size(76,76),this.scaleCellWhenTouch=.9,this.scaleCellInBtm=1,this.totalCellColor=1,this.distanceYTouchBlock=150}return e.prototype.applyConfig=function(){n.ConfigGameplay.reset(),n.ConfigGameplay._CELL_SIZE=this.cellSize,n.ConfigGameplay.SCALE_CELL_SPRITE_OF_BLOCK_WHEN_TOUCH=this.scaleCellWhenTouch,n.ConfigGameplay.SCALE_CELL_SPRITE_OF_BLOCK_AT_BOT=this.scaleCellInBtm,n.ConfigGameplay.TOTAL_CELL_COLOR=this.totalCellColor,n.ConfigGameplay.DISTANCE_Y_TOUCH_BLOCK=this.distanceYTouchBlock},r([c(cc.Size)],e.prototype,"cellSize",void 0),r([c(cc.Float)],e.prototype,"scaleCellWhenTouch",void 0),r([c(cc.Float)],e.prototype,"scaleCellInBtm",void 0),r([c(cc.Integer)],e.prototype,"totalCellColor",void 0),r([c(cc.Float)],e.prototype,"distanceYTouchBlock",void 0),r([a("TableConfig")],e)}();o.TableConfig=l,cc._RF.pop()},{"./ConstantGameplay":"ConstantGameplay"}],TableEffectPlus:[function(e,t,o){"use strict";cc._RF.push(t,"5c72aSH7nFKZbaIxtudAhwO","TableEffectPlus");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Script/CoreGameplayEx/TableEffect"),c=e("../../Script/CoreGameplayEx/CellGame"),l=e("../../Script/CoreGameplayEx/ConstantGameplay"),s=e("../../Script/Sound/sound.model"),p=e("../../Script/Sound/sound.const"),u=cc._decorator,d=u.ccclass,h=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprFramesStreak=[],t.sprFramesCombo=[],t}return n(t,e),t.prototype.runEffectReplayGame=function(){return new Promise(function(e){e()})},t.prototype.runTxtScoreEffect=function(){},t.prototype.runAnimationClaimCells=function(e,t,o,r){return void 0===t&&(t=1),void 0===o&&(o=[]),void 0===r&&(r=1),0},t.prototype.runEffectClearVertical=function(e){var t=this.getCellNode();t.parent=this.willClearContainer,t.position=e;var o=t.getComponent(c.default);o.cellTileType=c.CellTileType.Main,o.changeRendererAndCellIdByCellId(l.default.CELL_ID_CLEAR_VERTICAL),o.runActionExploreVertical(),s.Sound.sound.value={name:p.SoundNames.SPECIAL_TILE_ACTIVE,delay:.5}},t.prototype.runEffectClearHorizontal=function(e){var t=this.getCellNode();t.parent=this.willClearContainer,t.position=e;var o=t.getComponent(c.default);o.cellTileType=c.CellTileType.Main,o.changeRendererAndCellIdByCellId(l.default.CELL_ID_CLEAR_HORIZONTAL),o.runActionExploreHorizontal(),s.Sound.sound.value={name:p.SoundNames.SPECIAL_TILE_ACTIVE,delay:.5}},t.prototype.runEffectClearSquare=function(e){var t=this.getCellNode();t.parent=this.willClearContainer,t.position=e;var o=t.getComponent(c.default);o.cellTileType=c.CellTileType.Main,o.changeRendererAndCellIdByCellId(l.default.CELL_ID_CLEAR_BOM),o.runActionExploreSquare(),s.Sound.sound.value={name:p.SoundNames.SPECIAL_TILE_ACTIVE,delay:0}},t.prototype.runEffectDropCell=function(e,t,o,r,n,i,a){var l=this;void 0===t&&(t=1),void 0===o&&(o=c.CellTileType.MainHighlight),void 0===r&&(r=!1),void 0===n&&(n=null),void 0===i&&(i=1),void 0===a&&(a=0);var s=this.getCellNode();s.parent=n||this.willClearContainer,s.position=e;var p=s.getComponent(c.default);p.reset(),p.changeRendererAndCellIdByCellId(1),r?p.grayRenderer():p.unGrayRenderer(),p.cellTileType=o;var u=i,d=0==_.random(0,1),h=d?_.random(-320,-80):_.random(80,320);a>0&&cc.tween(s).set({opacity:0}).delay(a).set({opacity:255}).start(),cc.tween(s).delay(a).parallel(cc.tween().by(1.3,{angle:d?-250:250}),cc.jumpBy(1.3*t,cc.v2(h,150-cc.winSize.height),350,1),cc.tween().to(.4,{scale:1.2*u}).delay(.4).to(.5,{scale:.7*u})).call(function(){s.isValid&&l.poolCells.put(s)}).start()},t.prototype.spawnSprite=function(e,t,o,r,n,i,a){if(e){e.position=t;var c=e.scale;e.setScale(0);var l=0==_.random(0,1)?n:-n;e.runAction(cc.sequence(cc.moveBy(i,cc.v2(0,r)).easing(cc.easeSineOut()),cc.delayTime(.25),cc.moveTo(a,cc.v2(t.x,o.y)).easing(cc.easeSineIn()))),e.runAction(cc.scaleTo(1.5*i,1*c).easing(cc.easeBackOut())),e.runAction(cc.sequence(cc.rotateTo(i/2,l).easing(cc.easeSineOut()),cc.delayTime(.25),cc.delayTime(i/2),cc.rotateBy(a/2,l/2)))}},i([h([cc.SpriteFrame])],t.prototype,"sprFramesStreak",void 0),i([h([cc.SpriteFrame])],t.prototype,"sprFramesCombo",void 0),i([d],t)}(a.default);o.default=f,cc._RF.pop()},{"../../Script/CoreGameplayEx/CellGame":"CellGame","../../Script/CoreGameplayEx/ConstantGameplay":"ConstantGameplay","../../Script/CoreGameplayEx/TableEffect":"TableEffect","../../Script/Sound/sound.const":"sound.const","../../Script/Sound/sound.model":"sound.model"}],TableEffect:[function(e,t,o){"use strict";cc._RF.push(t,"ba50duqjcVJ1KLNHvabIBCY","TableEffect");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Plugin/KDPlugin/Core/Helper"),c=e("./CellGame"),l=cc._decorator,s=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.willClearContainer=null,t.notEnoughSpaceGroup=null,t.tempCellPrefab=null,t.tempGroupScore=null,t.tempGroupComboFeeling=null,t.tempGroupStreak=null,t.poolCells=null,t.poolGroupScore=null,t.poolGroupComboFeeling=null,t.poolGroupStreak=null,t}return n(t,e),t.prototype.onLoad=function(){this.poolCells=new cc.NodePool("poolCells"),this.poolGroupScore=new cc.NodePool("poolGroupScore"),this.poolGroupComboFeeling=new cc.NodePool("poolGroupComboFeeling"),this.poolGroupStreak=new cc.NodePool("poolGroupStreak")},t.prototype.onDestroy=function(){this.poolCells.clear(),this.poolGroupScore.clear(),this.poolGroupComboFeeling.clear(),this.poolGroupStreak.clear()},t.prototype.clearAllEffect=function(){this.willClearContainer.destroyAllChildren()},t.prototype.runEffectReplayGame=function(){return new Promise(function(e){return e()})},t.prototype.runTxtScoreEffect=function(e,t,o,r,n){var i=this,c=(r=r>5?5:r)>=2,l=n>=2,s=new cc.Node;s.position=cc.v3(e),s.parent=this.willClearContainer;var p=this.getScoreNode().getComponent(cc.Label);p.string=a.KDCore.StringHelper.format("+{0}",[o.toString()]),p.node.parent=s,p.node.position=cc.v3(0,c||l?-30:0);var u=null,d=null;l?((d=this.getStreakNode()).getComponentInChildren(cc.Label).string=n<=6?"Streak x"+n:7==n?"Great!":8==n?"Impressive!":"Incredible!",d.parent=s,d.position=cc.v3(0,40)):c&&((u=this.getComboNode().getComponent(cc.Label)).string=["","NICE","GOOD","WELL DONE","PERFECT"][r-1],u.node.parent=s,u.node.position=cc.v3(0,40));s.scale=.4,s.opacity=0,cc.tween(s).to(.4,{scale:1,opacity:255}).delay(.7).to(.4,{opacity:0}).call(function(){i.poolGroupScore.put(p.node),u&&i.poolGroupComboFeeling.put(u.node),d&&i.poolGroupStreak.put(d)}).removeSelf().start()},t.prototype.runAnimationClaimCells=function(e,t,o,r){return void 0===t&&(t=1),void 0===o&&(o=[]),void 0===r&&(r=1),0},t.prototype.showEffectNotEnoughSpace=function(){if(this.notEnoughSpaceGroup){a.KDCore.stopTweenActionByTag(this.notEnoughSpaceGroup,342654),this.notEnoughSpaceGroup.active=!0;var e=cc.tween(this.notEnoughSpaceGroup).to(.15,{opacity:255,position:cc.v3(0,cc.winSize.height/2-90)}).start();a.KDCore.setTagTweenAction(e,342654)}},t.prototype.hideEffectNotEnoughSpace=function(){var e=this;if(this.notEnoughSpaceGroup){a.KDCore.stopTweenActionByTag(this.notEnoughSpaceGroup,342654);var t=cc.tween(this.notEnoughSpaceGroup).delay(.5).to(.15,{opacity:255,position:cc.v3(0,cc.winSize.height/2+90)}).call(function(){e.notEnoughSpaceGroup.active=!1}).start();a.KDCore.setTagTweenAction(t,342654)}},t.prototype.getCellNode=function(e){var t=this.getNodeFromPool(this.poolCells,this.tempCellPrefab,e?function(t){return t.getComponent(c.default).cellId===e}:null);return t.getComponent(c.default).reset(),t},t.prototype.getScoreNode=function(){return this.getNodeFromPool(this.poolGroupScore,this.tempGroupScore)},t.prototype.getStreakNode=function(){return this.getNodeFromPool(this.poolGroupStreak,this.tempGroupStreak)},t.prototype.getComboNode=function(){return this.getNodeFromPool(this.poolGroupComboFeeling,this.tempGroupComboFeeling)},t.prototype.getNodeFromPool=function(e,t,o){var r=null;if(e.size()>0){if(o){for(var n=[];e.size()>0&&!o(r=e.get());)n.push(r),r=null;n.forEach(function(t){return e.put(t)})}else r=e.get();r&&r.isValid||(r=cc.instantiate(t))}else r=cc.instantiate(t);return r},i([p(cc.Node)],t.prototype,"willClearContainer",void 0),i([p(cc.Node)],t.prototype,"notEnoughSpaceGroup",void 0),i([p(cc.Prefab)],t.prototype,"tempCellPrefab",void 0),i([p(cc.Node)],t.prototype,"tempGroupScore",void 0),i([p(cc.Node)],t.prototype,"tempGroupComboFeeling",void 0),i([p(cc.Node)],t.prototype,"tempGroupStreak",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Plugin/KDPlugin/Core/Helper":"Helper","./CellGame":"CellGame"}],TableGame:[function(e,t,o){"use strict";cc._RF.push(t,"c377cSwpwZPV6hWQSKWkYjI","TableGame");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BLOCK_ID_CURRENT_3=o.BLOCK_ID_CURRENT_2=o.BLOCK_ID_CURRENT_1=void 0;var a=e("./ConstantGameplay"),c=e("./BlockGame"),l=e("./BoardGame"),s=e("./TableEffect"),p=e("../../Plugin/KDPlugin/MatrixGame/Table"),u=e("../../Plugin/KDPlugin/MatrixGame/TableMatrix"),d=e("../../Plugin/KDPlugin/Core/Helper"),h=e("../../Plugin/KDPlugin/MatrixGame/GridConfig"),f=e("../../Plugin/KDPlugin/MatrixGame/Block"),y=e("./CellGame"),v=cc._decorator,g=v.ccclass,b=v.property;o.BLOCK_ID_CURRENT_1=1,o.BLOCK_ID_CURRENT_2=2,o.BLOCK_ID_CURRENT_3=3;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.acTouchBlock=null,t.acPlaceBlock=null,t.acReturnBlock=null,t.acClaimCells=[],t.tableEffectNode=null,t.nodePositionBlocks=[],t._listener=null,t._nextBlocksMatrix=[],t._enableHolder=!0,t._enableEffectMovingBlock=!1,t}return n(t,e),Object.defineProperty(t.prototype,"tableEffect",{get:function(){return this.tableEffectNode.getComponent(s.default)},enumerable:!1,configurable:!0}),t.prototype.worldPosByBlockId=function(e){return this.nodePositionBlocks[e-1].parent.convertToWorldSpaceAR(this.nodePositionBlocks[e-1].getPosition())},Object.defineProperty(t.prototype,"listener",{set:function(e){this._listener=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOutOfMove",{get:function(){return this._isOutOfMove},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handIdWhenMoveBlock",{get:function(){return this._handIdWhenMoveBlock},set:function(e){this._handIdWhenMoveBlock=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextBlocksMatrix",{get:function(){return this._nextBlocksMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableHolder",{get:function(){return this._enableHolder},set:function(e){this._enableHolder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableEffectMovingBlock",{get:function(){return this._enableEffectMovingBlock},set:function(e){this._enableEffectMovingBlock=e},enumerable:!1,configurable:!0}),t.prototype.pushNextBlocksMatrix=function(e){this._nextBlocksMatrix=d.KDCore.ArrayHelper.pushAll(this._nextBlocksMatrix,e)},t.prototype.change3NewBlocksToGame=function(e){for(var t=[],o=0;o<3;o++)this._nextBlocksMatrix.length>0?t.push(this._nextBlocksMatrix.shift()):t.push(c.default.createTableMatrixBlock());this.change3BlocksToGame(t,e)},t.prototype.changeCurrentBlockToSpecialBlock=function(e){var t=this.getBlockByBlockId(o.BLOCK_ID_CURRENT_1);if(t){var r=c.default.createTableMatrixBlock(a.BlockDefaulType.One_BlockType,0,e);t.setTableMatrix(r),t.setCustomeWorldPos(this.worldPosByBlockId(o.BLOCK_ID_CURRENT_1)),this.saveTableGameToFile()}},t.prototype.pushSingleBlockFromNextQueue=function(e){var t;t=this._nextBlocksMatrix.length>0?this._nextBlocksMatrix.shift():c.default.createTableMatrixBlock(),this.pushSingleBlockByMaxtrix(t,!0,e)},t.prototype.onLoad=function(){this.initConfig()},t.prototype.replayNewGame=function(e){void 0===e&&(e=!0);var t=l.default.createTableMatrixDefaultForBoard(a.default.BOARD_ROW_TOP,a.default.BOARD_ROW_BOT,a.default.BOARD_COL_LEFT,a.default.BOARD_COL_RIGHT),o=[c.default.createTableMatrixBlock(),c.default.createTableMatrixBlock(),c.default.createTableMatrixBlock()];this._listener&&this._listener.getBlockTypesForNewTurn().forEach(function(e,t){o[t]=c.default.createTableMatrixBlock(e)}),this.replayGameWithCustomBoardBlock(t,o,[],e)},t.prototype.replayGameFromSave=function(e,t,o){void 0===o&&(o=!0),""!=e&&""!=t?this.loadTableGameFromFile(e,t,o):this.replayNewGame(o)},t.prototype.replayGameWithCustomBoardBlock=function(e,t,o,r){var n=this;void 0===r&&(r=!0),this.initConfig(),this._isOutOfMove=!1,this.tableEffect.clearAllEffect(),this._nextBlocksMatrix=[],this.setupBoard(e),r&&this.board.runAnmShowBoardBackground(),this.change3BlocksToGame(t,this.checkOutOfMoveOrAddNewBlocks.bind(this)),r&&this.runAnmShowBoardAndBlocks(null),o.forEach(function(e){var t=n.board.getCellComAtRowCol(e.y,e.x);t&&t.showMaskStar()}),this.checkOutOfMoveOrAddNewBlocks()},t.prototype.runEffectReplayGame=function(){return this.tableEffect.runEffectReplayGame(this._isOutOfMove,this.board,this.blocks)},t.prototype.runEffectGreyBoard=function(){return this.board.runEffectGreyBoardCells(1.5)},t.prototype.playOnGame=function(){this._isOutOfMove=!1;var e=[c.default.createTableMatrixBlock(),c.default.createTableMatrixBlock(a.BlockDefaulType.One_BlockType),c.default.createTableMatrixBlock()];this.change3BlocksToGame(e,this.checkOutOfMoveOrAddNewBlocks.bind(this))},t.prototype.runAnmShowBoardAndBlocks=function(e){var t;this.board.node&&(this.board.node.stopActionByTag(6465677),this.board.node.scale=.4,this.board.node.opacity=0,(t=cc.sequence(cc.spawn(cc.scaleTo(.4,1),cc.fadeIn(.3)),cc.callFunc(e))).setTag(6465677),this.board.node.runAction(t)),this.blockContainer&&(this.blockContainer.stopActionByTag(6465677),this.blockContainer.setPosition(cc.v2(0,-350)),(t=cc.moveTo(.3,cc.Vec2.ZERO)).setTag(6465677),this.blockContainer.runAction(t))},t.prototype.runAnmHideBoardAndBlocks=function(e){var t;this.board.node&&(this.board.node.stopActionByTag(6465677),this.board.node.setScale(1),this.board.node.opacity=255,(t=cc.sequence(cc.spawn(cc.scaleTo(.4,.4),cc.fadeOut(.4)),cc.callFunc(e))).setTag(6465677),this.board.node.runAction(t)),this.blockContainer&&(this.blockContainer.stopActionByTag(6465677),this.blockContainer.setPosition(cc.Vec2.ZERO),(t=cc.moveTo(.3,cc.v2(0,-350))).setTag(6465677),this.blockContainer.runAction(t))},t.prototype.converBoardBlockMatrixToSaveStr=function(e,t){var o={boardStr:"",blocksStr:""};o.boardStr=u.default.convertMatrixToString(e.matrix,a.default.BIT_USING_SAVE_TABLE_MATRIX,a.default.TOTAL_BIT_PER_NUM());for(var r="",n=0,i=t;n<i.length;n++){var c=i[n];c&&(r+=u.default.convertMatrixToString(c.matrix,a.default.BIT_USING_SAVE_TABLE_MATRIX,a.default.TOTAL_BIT_PER_NUM())),r+="|"}return r=r.slice(0,-1),o.blocksStr=r,o},t.prototype.initConfig=function(){this.config||(this._config=new h.default(a.ConfigGameplay.getCellSize(),h.eGridGameType.Square,cc.v2(0,a.ConfigGameplay.DISTANCE_Y_TOUCH_BLOCK),{drag:!0,click:!0,distanceToFlagDragBlock:a.default.DETAL_DISTANCE_TO_ACCEPT_MOVE}))},t.prototype.saveTableGameToFile=function(){for(var e=[this.getBlockByBlockId(o.BLOCK_ID_CURRENT_1),this.getBlockByBlockId(o.BLOCK_ID_CURRENT_2),this.getBlockByBlockId(o.BLOCK_ID_CURRENT_3)],t=new u.default(this.board.tableMatrix.matrixCopy),r=this.board.botAvailable;r<=this.board.topAvailable;r++)for(var n=this.board.leftAvailable;n<=this.board.rightAvailable;n++){var i=this.board.getCellComAtRowCol(r,n);i&&i.getComponent(y.default).haveStar&&t.setValueAt(r,n,t.at(r,n)+a.default.CELL_ID_ADDED_MASK)}var c=this.converBoardBlockMatrixToSaveStr(t,e.map(function(e){return e?e.tableMatrix:null}));return this._listener&&this._listener.onSaveTable(c.boardStr,c.blocksStr),!0},t.prototype.loadTableGameFromFile=function(e,t,o){if(""==e||""==t)return this.replayNewGame(o),!1;for(var r=new u.default(u.default.convertStringToMatrix(e,a.default.MAX_ROWS,a.default.MAX_COLS,a.default.BIT_USING_SAVE_TABLE_MATRIX,a.default.TOTAL_BIT_PER_NUM())),n=[],i=0;i<r.rowSize;i++)for(var c=0;c<r.colSize;c++){var l=r.at(i,c);l>a.default.CELL_ID_ADDED_MASK&&(r.setValueAt(i,c,l-a.default.CELL_ID_ADDED_MASK),n.push(cc.v2(c,i)))}for(var s=[],p=0,d=_.split(t,"|");p<d.length;p++){var h=d[p];""!=h?s.push(new u.default(u.default.convertStringToMatrix(h,a.default.MAX_ROWS,a.default.MAX_COLS,a.default.BIT_USING_SAVE_TABLE_MATRIX,a.default.TOTAL_BIT_PER_NUM()))):s.push(null)}return this.replayGameWithCustomBoardBlock(r,s,n,o),!0},t.prototype.checkCanTouchBlock=function(e){return!this.isOutOfMove&&!this._currentTouchedBlockRenderer&&!!this.getBlockComFromOwnerRenderer(e)},t.prototype.onTouchedBlockMoved=function(t,o,r){var n=this.getBlockComFromOwnerRenderer(t);t.position.y-n.validCellsSize.height/2<a.default.MIN_Y_MOVE_BLOCK&&(t.y=a.default.MIN_Y_MOVE_BLOCK+n.validCellsSize.height/2),e.prototype.onTouchedBlockMoved.call(this,t,o,r)},t.prototype.onTouchedBlockEndedOrCancel=function(t,o){return this._listener&&this._listener.onTouchBlockEnd(),e.prototype.onTouchedBlockEndedOrCancel.call(this,t,o)},t.prototype.processBlockClicked=function(e){this._listener&&this._listener.onClickedBlock(this.checkBlockCanPlaceInBoard(e,!1))},t.prototype.processBlockDragBegan=function(t,o,r){var n=this.checkBlockCanPlaceInBoard(t);this._listener&&(this._listener.onPlaySound(this.acTouchBlock),this._listener.onTouchBlockBegin(n)),t.stopActionMoveBackBlock(),t.stopActionMoveBlockQueue(),t.stopActionMoveSwapBlock(),t.runAnmScaleRendererToValue(f.eBlockRendererType.BlockRenderer,a.ConfigGameplay.SCALE_BLOCK_NORMAL),t.node.setSiblingIndex(t.node.parent.childrenCount),e.prototype.processBlockDragBegan.call(this,t,o,r);for(var i=0,c=t.getRendererByType(f.eBlockRendererType.BlockRenderer).children;i<c.length;i++)c[i].setScale(a.ConfigGameplay.SCALE_CELL_SPRITE_OF_BLOCK_WHEN_TOUCH);t.showEffTouchBlock(),n||this.tableEffect.showEffectNotEnoughSpace()},t.prototype.processBlockDragMoved=function(e,t){if(this.board.removeEffCanClaim(),e){var o=this._currentAddPosWhenTouchBlock;this.enableEffectMovingBlock&&(t.showRenderer(f.eBlockRendererType.ShadowRenderer),t.setAddPosForRenderer(f.eBlockRendererType.ShadowRenderer,o.y,o.x));var r=this.checkForClaimRowsColsAndSquares(t,this._currentAddPosWhenTouchBlock).cellsClaim;if(r.length>0&&this.enableEffectMovingBlock){var n=t.getFirstValidCellIdFromBotLeft();this.board.showEffCanClaim(r,n)}}else t.hideRenderer(f.eBlockRendererType.ShadowRenderer)},t.prototype.processBlockDragEnded=function(e,t){for(var o=this,r=0,n=t.getRendererByType(f.eBlockRendererType.BlockRenderer).children;r<n.length;r++)n[r].scale=a.ConfigGameplay.SCALE_CELL_SPRITE_OF_BLOCK_AT_BOT;if(e){this._listener&&this._listener.onPlaySound(this.acPlaceBlock);var i=t,c=i.getScoreOfBlock();this.addBlockCellsToBoard(i);var l=this.checkForClaimRowsColsAndSquares(i,this._currentAddPosWhenTouchBlock),s=l.cellsClaim,p=l.quantityRowClaim,u=l.quantityColClaim,d=l.quantitySquareClaim,h=l.centerSquaresWillClaim,v=u+p+d,_=cc.v2(this.board.leftAvailable+(this.board.rightAvailable-this.board.leftAvailable)/2,this.board.botAvailable+(this.board.topAvailable-this.board.botAvailable)/2);1==u&&1==v?_=cc.v2(s[0].x,_.y):1==p&&1==v?_=cc.v2(_.x,s[0].y):1==d&&1==v&&(_=cc.v2(h[0].x,h[0].y));var g=0;if(s.length>0){var b=s.map(function(e){return o.board.posFromRowAndCol(e.y,e.x)}),m=[];s.forEach(function(e){t.getCellComAtRowCol(e.y-o._currentAddPosWhenTouchBlock.y,e.x-o._currentAddPosWhenTouchBlock.x,f.eBlockRendererType.BlockRenderer)&&m.push(o.board.posFromRowAndCol(e.y,e.x))}),g=this.tableEffect.runAnimationClaimCells(b,i.getFirstValidCellIdFromBotLeft(),m,i.getFirstValidCellIdFromBotLeft())}this._listener&&this._listener.onPlacedBlockToBoard(p,u,d,c,function(e,r){if(v>0){var n=a.ConfigGameplay.getCellSize();o.scheduleOnce(function(){if(o.tableEffect.runTxtScoreEffect(cc.v2(o.board.posFromRowAndCol(_.y,_.x)),t.centerPosValidCells.add(cc.v2(o._currentAddPosWhenTouchBlock.x*n.width,o._currentAddPosWhenTouchBlock.y*n.height)),e,v,r),o._listener){var i=Math.min(o.acClaimCells.length-1,r-1);o._listener.onPlaySound(o.acClaimCells[Math.max(0,i)])}},g)}}),v>0&&this._listener&&this._listener.onClear(p,u,d,c),this.scheduleOnce(function(){o._listener&&s.forEach(function(e){var t=o.board.getCellComAtRowCol(e.y,e.x).node;t.getComponent(y.default).haveStar&&o._listener.onCollectStar(t.parent.convertToWorldSpaceAR(t.position))}),o.board.claimCells(s,null,_),o.blocks.length?o.checkOutOfMoveOrAddNewBlocks():o.generateValidAndPush3Blocks()},g)}else this._listener&&this._listener.onPlaySound(this.acReturnBlock),t.hideEffTouchBlock(),t.runActionMoveBackBlock(null);t.hideRenderer(f.eBlockRendererType.ShadowRenderer),this._listener&&this._listener.onMovedBlock(e),this.tableEffect.hideEffectNotEnoughSpace()},t.prototype.checkAndGenerateStars=function(){var e=this;this._listener&&this._listener.getGenerateMaskStarList().forEach(function(t){var o=e.board.botAvailable+t.y,r=e.board.leftAvailable+t.x,n=e.board.getCellComAtRowCol(o,r);n&&n.showMaskStar()})},t.prototype.change3BlocksToGame=function(e,t){this.unuseAllBlocks();for(var o=0;o<3;o++){var r=e[o];r&&this.pushSingleBlockByMaxtrix(r,!1,2==o?t:null)}},t.prototype.generateValidAndPush3Blocks=function(){if(this._listener){var e=[];this._listener.getBlockTypesForNewTurn().forEach(function(t){e.push(c.default.createTableMatrixBlock(t))}),this.pushNextBlocksMatrix(e)}for(var t=0;t<3;t++)this.pushSingleBlockFromNextQueue(2==t?this.checkOutOfMoveOrAddNewBlocks.bind(this):null)},t.prototype.pushSingleBlockByMaxtrix=function(e,t,r){if(e){var n=[o.BLOCK_ID_CURRENT_1,o.BLOCK_ID_CURRENT_2,o.BLOCK_ID_CURRENT_3],i=this.blocks,c=n.find(function(e){return!i.find(function(t){return t.blockId==e})}),l=this.addBlock(e);l.blockId=c,l.blurBlockRenderer(!1,f.eBlockRendererType.BlockRenderer),l.setEnableCannotPlaceBlockEff(!1),l.setCustomeWorldPos(this.worldPosByBlockId(c)),t?l.runActionMoveBlockQueue(!0,l.node.convertToWorldSpaceAR(l.customePos.add(cc.v2(cc.winSize.width,0))),r):l.getRendererByType(f.eBlockRendererType.BlockRenderer).scale=a.ConfigGameplay.SCALE_BLOCK_IN_BOT,l.justAllowChangeMatrixAtAddPos=cc.Vec2.ZERO,l.setTouchSize(a.default.TOUCH_SIZE),l.setEnableTouchBlock(!0)}},t.prototype.addBlockCellsToBoard=function(e){this.board.copyBlockCellsToBoard(e,this._currentAddPosWhenTouchBlock),this.unuseBlock(e)},t.prototype.checkForClaimRowsColsAndSquares=function(e,t){var o=[],r=[],n=[],i=[],c=[],l=0,s=0,p=0,u=[],h=e.leftAvailable+t.x,f=e.rightAvailable+t.x,y=e.topAvailable+t.y,v=e.botAvailable+t.y;if(e.getFirstValidCellIdFromBotLeft()===a.default.CELL_ID_CLEAR_HORIZONTAL){for(var _=this.board.leftAvailable;_<=this.board.rightAvailable;_++){var g=cc.v2(_,e.botAvailable+t.y);this.board.getCellComAtRowCol(g.y,g.x)&&c.push(g)}return{cellsClaim:c,quantityRowClaim:l=1,quantityColClaim:s,quantitySquareClaim:p,centerSquaresWillClaim:u}}if(e.getFirstValidCellIdFromBotLeft()===a.default.CELL_ID_CLEAR_VERTICAL){for(var b=this.board.botAvailable;b<=this.board.topAvailable;b++)g=cc.v2(e.leftAvailable+t.x,b),this.board.getCellComAtRowCol(g.y,g.x)&&c.push(g);return{cellsClaim:c,quantityRowClaim:l,quantityColClaim:s=1,quantitySquareClaim:p,centerSquaresWillClaim:u}}if(e.getFirstValidCellIdFromBotLeft()===a.default.CELL_ID_CLEAR_BOM){for(b=v-1;b<=y+1;b++)for(_=h-1;_<=f+1;_++)this.board.tableMatrix.isInBox(b,_)&&this.board.getCellComAtRowCol(b,_)&&c.push(cc.v2(_,b));return p=1,u.push(cc.v2(h,v)),{cellsClaim:c,quantityRowClaim:l,quantityColClaim:s,quantitySquareClaim:p,centerSquaresWillClaim:u}}for(b=v;b<=y;b++)for(_=h;_<=f;_++)if(e.tableMatrix.at(b-t.y,_-t.x)){if(d.KDCore.isNullObject(r[_])){var m=!1,C=!0,S=cc.v2(_,this.board.botAvailable),P=0;for(P=this.board.botAvailable;P<=this.board.topAvailable;P++)if(this.board.tableMatrix.at(P,_)&&(m=!0),!this.board.tableMatrix.at(P,_)||this.board.existCellAt(P,_)||e.tableMatrix.isInBox(P-t.y,_-t.x)&&e.tableMatrix.at(P-t.y,_-t.x)||(C=!1),!this.board.tableMatrix.at(P,_)||P==this.board.topAvailable){if(this.board.tableMatrix.isInBox(P-1,_)&&(this.board.tableMatrix.at(P-1,_)||S.equals(cc.v2(_,P)))&&C&&this.board.tableMatrix.at(S.y,S.x)){s++,i.push(_);for(var T=S.y;T<=P;T++)c.push(cc.v2(_,T))}this.board.tableMatrix.isInBox(P+1,_)&&(S=cc.v2(_,P+1),C=!0)}m&&(r[_]=1)}if(d.KDCore.isNullObject(o[b])){var R=!1,O=(C=!0,S=cc.v2(this.board.leftAvailable,b),0);for(O=this.board.leftAvailable;O<=this.board.rightAvailable;O++)if(this.board.tableMatrix.at(b,O)&&(R=!0),!this.board.tableMatrix.at(b,O)||this.board.existCellAt(b,O)||e.tableMatrix.isInBox(b-t.y,O-t.x)&&e.tableMatrix.at(b-t.y,O-t.x)||(C=!1),!this.board.tableMatrix.at(b,O)||O==this.board.rightAvailable){if(this.board.tableMatrix.isInBox(b,O-1)&&(this.board.tableMatrix.at(b,O-1)||S.equals(cc.v2(O,b)))&&C&&this.board.tableMatrix.at(S.y,S.x)){l++,n.push(b);for(var A=S.x;A<=O;A++)c.push(cc.v2(A,b))}this.board.tableMatrix.isInBox(b,O+1)&&(S=cc.v2(O+1,b),C=!0)}R&&(o[b]=1)}}return{cellsClaim:c,quantityRowClaim:l,quantityColClaim:s,quantitySquareClaim:p,centerSquaresWillClaim:u}},t.prototype.checkOutOfMoveOrAddNewBlocks=function(){for(var e,t=this.blocks,o=[],r=0,n=t.map(function(e){return e});r<n.length;r++){var i=n[r];this.checkBlockCanPlaceInBoard(i)?(o.push(i),i.setEnableCannotPlaceBlockEff(!1)):i.setEnableCannotPlaceBlockEff(!0)}if(e=o.length<=0,t.length>0)e?(this._isOutOfMove=!0,this._listener&&this._listener.onOutOfMove()):this.saveTableGameToFile();else{if(this._listener){var a=[];this._listener.getBlockTypesForNewTurn().forEach(function(e){a.push(c.default.createTableMatrixBlock(e))}),this.pushNextBlocksMatrix(a)}this.change3NewBlocksToGame(this.checkOutOfMoveOrAddNewBlocks.bind(this))}},i([b({type:cc.AudioClip})],t.prototype,"acTouchBlock",void 0),i([b({type:cc.AudioClip})],t.prototype,"acPlaceBlock",void 0),i([b({type:cc.AudioClip})],t.prototype,"acReturnBlock",void 0),i([b({type:[cc.AudioClip]})],t.prototype,"acClaimCells",void 0),i([b(cc.Node)],t.prototype,"tableEffectNode",void 0),i([b([cc.Node])],t.prototype,"nodePositionBlocks",void 0),i([g],t)}(p.default);o.default=m,cc._RF.pop()},{"../../Plugin/KDPlugin/Core/Helper":"Helper","../../Plugin/KDPlugin/MatrixGame/Block":"Block","../../Plugin/KDPlugin/MatrixGame/GridConfig":"GridConfig","../../Plugin/KDPlugin/MatrixGame/Table":"Table","../../Plugin/KDPlugin/MatrixGame/TableMatrix":"TableMatrix","./BlockGame":"BlockGame","./BoardGame":"BoardGame","./CellGame":"CellGame","./ConstantGameplay":"ConstantGameplay","./TableEffect":"TableEffect"}],TableInfo:[function(e,t,o){"use strict";cc._RF.push(t,"8a9167n6MFIHbh53grnuLEI","TableInfo"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,n=(r.ccclass,r.property,function(){function e(){this._table=null,this._board=null}return e.prototype.init=function(e,t){this._table=e,this._board=t},e.prototype.getBoardSize=function(){return this.checkCanGetInfo()?cc.size((this._board.topAvailable-this._board.botAvailable+1)*this._board.config.cellSize.width,(this._board.rightAvailable-this._board.leftAvailable+1)*this._board.config.cellSize.height):cc.Size.ZERO},e.prototype.getBoardWithMatrixSize=function(){return this.checkCanGetInfo()?cc.size(this._board.maxCol*this._board.config.cellSize.width,this._board.maxRow*this._board.config.cellSize.height):cc.Size.ZERO},e.prototype.getBoardBoundSize=function(){return this.checkCanGetInfo()?cc.size(this._board.maxRow*this._board.config.cellSize.width,this._board.maxCol*this._board.config.cellSize.height):cc.Size.ZERO},e.prototype.getBoardNodePosition=function(){return this.checkCanGetInfo()?this._board.node.getPosition():cc.Vec2.ZERO},e.prototype.checkCanGetInfo=function(){return this._table&&this._board?!(!this._table.config||!this._board.config)||(cc.error("please call function after init configs (after onLoad)"),!1):(cc.error("call init function first"),!1)},e}());o.default=n,cc._RF.pop()},{}],TableMatrix:[function(e,t,o){"use strict";cc._RF.push(t,"3e280ckwAhK0oQ9IDzXH0dM","TableMatrix"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,n=(r.ccclass,r.property,function(){function e(e){this._matrix=[],this._matrix=e}return Object.defineProperty(e.prototype,"matrix",{get:function(){return this._matrix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matrixCopy",{get:function(){return e.copyArray2d(this._matrix)},enumerable:!1,configurable:!0}),e.copyArray2d=function(e){for(var t=[],o=0;o<e.length;o++){t[o]=Array();for(var r=0;r<e[o].length;r++)t[o][r]=e[o][r]}return t},e.createDefaultTableMatrix=function(t,o,r){return void 0===r&&(r=0),new e(Array.apply(null,Array(t)).map(function(){return Array.apply(null,Array(o)).map(function(){return r})}))},e.convertStringToMatrix=function(e,t,o,r,n){void 0===r&&(r=8),void 0===n&&(n=64);var i=Array.apply(null,Array(t)).map(function(){return Array.apply(null,Array(o)).map(function(){return 0})});if(!e||""===e)return i;var a=n;if(n>=64){var c=BigInt(0),l=(BigInt(0),BigInt(0)),s=0,p=0,u=BigInt(0),d=BigInt(0);e.split(",").forEach(function(e){u=BigInt(e);for(var n=0;n<a;n+=r){if(p>=o&&(s++,p=0),s>=t)return i;c=BigInt(Math.pow(2,r)-1)<<BigInt(n),(l=(u&c)>>BigInt(n))>0&&(d=l),l<0&&(l=d),i[s][p]=Number(l),p++}})}else{var h=0,f=0,y=0,v=0,_=0,g=0;e.split(",").forEach(function(e){_=parseInt(e);for(var n=0;n<a;n+=r){if(v>=o&&(y++,v=0),y>=t)return i;h=Math.pow(2,r)-1<<n,(f=(_&h)>>n)>0&&(g=f),f<0&&(f=g),i[y][v]=Number(f),v++}})}return i},e.convertMatrixToString=function(e,t,o){void 0===t&&(t=8),void 0===o&&(o=64);var r="",n=o;if(n>=64)for(var i=BigInt(0),a=BigInt(0),c=(BigInt(0),BigInt(t)),l=BigInt(0),s=0;s<e.length;s++)for(var p=0;p<e[s].length;p++)i|=BigInt(e[s][p])<<a,((a+=c)>=n||s===e.length-1&&p===e[s].length-1)&&(""!==r&&(r+=","),r+=i,a=i=l);else for(i=0,a=0,c=t,l=0,s=0;s<e.length;s++)for(p=0;p<e[s].length;p++)i|=e[s][p]<<a,((a+=c)>=n||s===e.length-1&&p===e[s].length-1)&&(""!==r&&(r+=","),r+=i,a=i=l);return r},e.rotateMatrix90=function(t,o,r,n,i){for(var a=[],c=0;c<r;c++){a.push([]);for(var l=0;l<o;l++)a[c].push(t.at(c,l))}for(var s=function(){for(var e=a.length,t=a[0].length,o=[],r=0;r<t;r++){for(var n=[],i=0;i<e;i++){var c=i,l=t-1-r;n.push(a[c][l])}o.push(n)}a=[],a=o},p=0;p<n;p++)s();var u=e.createDefaultTableMatrix(t.rowSize,t.colSize);for(c=0;c<a.length;c++)for(l=0;l<a[0].length;l++)a[c][l]&&u.setValueAt(c,l,i);return u},Object.defineProperty(e.prototype,"rowSize",{get:function(){return this._matrix.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colSize",{get:function(){return this.rowSize>0?this._matrix[0].length:0},enumerable:!1,configurable:!0}),e.prototype.at=function(e,t){return this._matrix[e][t]},e.prototype.setValueAt=function(e,t,o){this.isInBox(e,t)&&(this._matrix[e][t]=o)},e.prototype.isInBox=function(e,t){return!(e<0||e>=this._matrix.length||t<0||t>=this._matrix[0].length)},e.prototype.totalPosValid=function(){for(var e=0,t=0;t<this.matrix.length;t++)for(var o=0;o<this.matrix[t].length;o++)this.matrix[t][o]>0&&e++;return e},e}());o.default=n,cc._RF.pop()},{}],Table:[function(e,t,o){"use strict";cc._RF.push(t,"9816dvk8g5Hb66gxuBk/6P7","Table");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GridCom"),c=e("./Board"),l=e("./Block"),s=e("./GridConfig"),p=e("./TableMatrix"),u=e("./TableInfo"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blockPrefab=null,t.boardNode=null,t.blockContainer=null,t.enableTouchTable=!1,t._tableInfo=null,t._currentTouchedBlockRenderer=null,t._rootPosOfCurrentTouchedBlockRenderer=null,t._currentAddPosWhenTouchBlock=cc.Vec2.ZERO,t._isDraggingBlock=!1,t}return n(t,e),Object.defineProperty(t.prototype,"board",{get:function(){return this.boardNode.getComponent(c.default)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tableInfo",{get:function(){return this._tableInfo||(this._tableInfo=new u.default,this._tableInfo.init(this,this.board)),this._tableInfo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blocks",{get:function(){return this.blockContainer.children.map(function(e){return e.getComponent(l.default)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unuseBlocks",{get:function(){return this.getUnuseBlockContainer().children.map(function(e){return e.getComponent(l.default)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTouchBlockGame",{get:function(){return this.config&&(this.config.blockInteractInfo.click||this.config.blockInteractInfo.drag)},enumerable:!1,configurable:!0}),t.prototype.getBlockByIndex=function(e){return this.blocks[e]},t.prototype.getBlockByBlockId=function(e){for(var t=0,o=this.blocks;t<o.length;t++){var r=o[t];if(r&&r.blockId==e)return r}return null},t.prototype.addBlock=function(e){var t=null,o=this.getUnuseBlockContainer();return o.childrenCount>0&&((t=o.children[0].getComponent(l.default)).node.parent=this.blockContainer),t?(t.reset(),t.setTableMatrix(e),t.setEnableTouchBlock(this.isTouchBlockGame)):((t=cc.instantiate(this.blockPrefab).getComponent(l.default)).config=this.config,t.setTableMatrix(e),this.isTouchBlockGame&&t.setupTouch(this.checkCanTouchBlock.bind(this),this.onTouchedBlockBegan.bind(this),this.onTouchedBlockMoved.bind(this),this.onTouchedBlockEndedOrCancel.bind(this),this.onTouchedBlockEndedOrCancel.bind(this),this.getDeltaValidPosTouchBlock.bind(this)),t.node.parent=this.blockContainer),t},t.prototype.setTableMatrix=function(t){e.prototype.setTableMatrix.call(this,t),this.enableTouchTable&&(this.node.setContentSize(cc.size(this.config.cellSize.width*this.maxCol,this.config.cellSize.height*this.maxRow)),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBeganTable,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoveTable,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEndTable,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelTable,this))},t.prototype.setupBoard=function(e){this.board.config=this.config,this.board.setTableMatrix(e)},t.prototype.getUnuseBlockContainer=function(){var e="unuseBlockContainer",t=this.node.getChildByName(e);return t||((t=new cc.Node).name=e,t.active=!1,t.parent=this.node),t},t.prototype.unuseBlock=function(e){if(null!=e)for(var t=0,o=this.blocks;t<o.length;t++)if(o[t]==e){e.node.stopAllActions(),e.node.parent=this.getUnuseBlockContainer(),e.setEnableTouchBlock(!1);break}},t.prototype.unuseAllBlocks=function(){for(var e=0,t=this.blocks;e<t.length;e++){var o=t[e];this.unuseBlock(o)}},t.prototype.cancelDragBlock=function(){this._currentTouchedBlockRenderer&&this.getBlockComFromOwnerRenderer(this._currentTouchedBlockRenderer).cancelIfDragging()},t.prototype.setEnableTouchBlocks=function(e){for(var t=0,o=this.blocks;t<o.length;t++)o[t].setEnableTouchBlock(e);for(var r=0,n=this.unuseBlocks;r<n.length;r++)n[r].setEnableTouchBlock(e)},t.prototype.calculateAddPosWhenTouchedBlock=function(e,t){var o=t,r=Math.round(1*(o.x-e.x)/this.config.cellSize.width),n=0;switch(this.config.gameType){case s.eGridGameType.Square:n=Math.round(1*(o.y-e.y)/this.config.cellSize.height);break;case s.eGridGameType.Hexa:n=r%2!=0?Math.round(1*(o.y-e.y-.5*this.config.cellSize.height)/this.config.cellSize.height):Math.round(1*(o.y-e.y)/this.config.cellSize.height);break;case s.eGridGameType.Triangle:n=Math.round(1*(o.y-e.y)/this.config.cellSize.height)}return cc.v2(r,n)},t.prototype.checkCanTouchBlock=function(e){return!this._currentTouchedBlockRenderer&&!!this.getBlockComFromOwnerRenderer(e)},t.prototype.getDeltaValidPosTouchBlock=function(e,t){return this.config.blockInteractInfo.drag&&this._isDraggingBlock?cc.Vec2.ZERO:e.getPosition().sub(t)},t.prototype.onTouchedBlockBegan=function(e,t){var o=this.getBlockComFromOwnerRenderer(e);this._currentTouchedBlockRenderer=e,this._rootPosOfCurrentTouchedBlockRenderer=t,this._isDraggingBlock=!1,!this.config.blockInteractInfo.click&&this.config.blockInteractInfo.drag&&this.processBlockDragBegan(o,t,t)},t.prototype.onTouchedBlockMoved=function(e,t,o){var r=this.getBlockComFromOwnerRenderer(e);if(this.config.blockInteractInfo.drag&&this.config.blockInteractInfo.click&&!this._isDraggingBlock&&this.config.blockInteractInfo.distanceToFlagDragBlock<=cc.Vec2.distance(this._rootPosOfCurrentTouchedBlockRenderer,o)&&this.processBlockDragBegan(r,t,o),this._isDraggingBlock){var n=this.calculateAddPosWhenTouchedBlock(r.centerPosValidCells,t);n.equals(this._currentAddPosWhenTouchBlock)||(this._currentAddPosWhenTouchBlock=n,this.processBlockDragMoved(this.checkCanPlaceTouchedBlockToBoard(r,n),r,t))}else e.setPosition(r.customePos)},t.prototype.onTouchedBlockEndedOrCancel=function(e,t){var o=this.getBlockComFromOwnerRenderer(e);if(this._isDraggingBlock){var r=this.calculateAddPosWhenTouchedBlock(o.centerPosValidCells,t);this._currentAddPosWhenTouchBlock=r,this.processBlockDragEnded(this.checkCanPlaceTouchedBlockToBoard(o,r),o,t)}else this.config.blockInteractInfo.click&&this.processBlockClicked(o,t);return this._currentTouchedBlockRenderer=null,!0},t.prototype.checkCanPlaceTouchedBlockToBoard=function(e,t){var o=e.checkCanChangeMatrixWithAddPos(t.y,t.x);if(o){o=!1;for(var r=e.leftAvailable,n=e.rightAvailable,i=e.botAvailable,a=e.topAvailable,c=!0,l=i;l<=a&&c;l++)for(var p=r;p<=n;p++)if(e.tableMatrix.at(l,p)>0){var u=Math.floor(t.y),d=Math.floor(t.x);switch(this.config.gameType){case s.eGridGameType.Square:break;case s.eGridGameType.Hexa:d%2!=0&&(p+d)%2==0&&u++;break;case s.eGridGameType.Triangle:}if(this.board.tableMatrix.at(l+u,p+d)!=this.board.boardValueCanPlaceCell){c=!1;break}}c&&(o=!0)}return o},t.prototype.checkBlockCanPlaceInBoard=function(e,t){void 0===t&&(t=!1);var o=!1;if(!e)return o;var r=e.topAvailable-e.botAvailable+1,n=e.rightAvailable-e.leftAvailable+1;t&&(r=1,n=1);for(var i=this.board.botAvailable;i<=this.board.topAvailable-r+1&&!o;i++)for(var a=this.board.leftAvailable;a<=this.board.rightAvailable-n+1&&!o;a++)for(var c=t?4:0,l=0;l<=c;l++){if(l>0){var s=e.rightAvailable-e.leftAvailable+1,u=e.topAvailable-e.botAvailable+1,d=0==l?e.tableMatrix:p.default.rotateMatrix90(e.tableMatrix,s,u,1,e.getFirstValidCellIdFromBotLeft());e.setTableMatrix(d,!0)}!o&&l<4&&this.checkCanPlaceTouchedBlockToBoard(e,cc.v2(a,i))&&(o=!0)}return o},t.prototype.getBlockComFromOwnerRenderer=function(e){return e.parent.getComponent(l.default)},t.prototype.processBlockDragBegan=function(e,t,o){this._isDraggingBlock=!0,e.stopAnmMoveRendererToPos(l.eBlockRendererType.BlockRenderer),e.getRendererByType(l.eBlockRendererType.BlockRenderer).setPosition(o.add(this.config.distanceFromTouchBlock).add(cc.v2(0,e.validCellsSize.height/2))),this._currentAddPosWhenTouchBlock=this.calculateAddPosWhenTouchedBlock(e.centerPosValidCells,t)},t.prototype.processBlockDragMoved=function(e,t){if(e){var o=this._currentAddPosWhenTouchBlock;t.showRenderer(l.eBlockRendererType.ShadowRenderer),t.setAddPosForRenderer(l.eBlockRendererType.ShadowRenderer,o.y,o.x)}else t.hideRenderer(l.eBlockRendererType.ShadowRenderer)},t.prototype.processBlockDragEnded=function(e,t){var o=this._currentAddPosWhenTouchBlock;e?t.changeMatrixWithAddPos(o.y,o.x):t.resetPosOfRenderer(l.eBlockRendererType.BlockRenderer),t.hideRenderer(l.eBlockRendererType.ShadowRenderer)},t.prototype.processBlockClicked=function(){},t.prototype.onTouchBeganTable=function(){},t.prototype.onTouchMoveTable=function(){},t.prototype.onTouchEndTable=function(){},t.prototype.onTouchCancelTable=function(){},i([f(cc.Prefab)],t.prototype,"blockPrefab",void 0),i([f(cc.Node)],t.prototype,"boardNode",void 0),i([f(cc.Node)],t.prototype,"blockContainer",void 0),i([f(cc.Boolean)],t.prototype,"enableTouchTable",void 0),i([h],t)}(a.default);o.default=y,cc._RF.pop()},{"./Block":"Block","./Board":"Board","./GridCom":"GridCom","./GridConfig":"GridConfig","./TableInfo":"TableInfo","./TableMatrix":"TableMatrix"}],TutorialAward:[function(e,t,o){"use strict";cc._RF.push(t,"93ce87ZZptMDpblKyLWPjG9","TutorialAward");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../SceneManager/scene.model"),c=cc._decorator,l=c.ccclass,s=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animationCup=null,t.btnTabToClose=null,t.hand=null,t.cupNode=null,t.worldPosOfCup=cc.Vec3.ZERO,t}return n(t,e),t.prototype.show=function(e){this.node.active=!0,this.worldPosOfCup=e,this.animationCup.play(this.animationCup.getClips()[0].name)},t.prototype.runAnimationCupScaleToWoodSelf=function(){var e=cc.instantiate(this.cupNode);e.parent=this.node,e.setSiblingIndex(0),e.getChildByName("effect").opacity=0,cc.tween(e).delay(.3).to(.5,{scale:1,position:this.node.convertToNodeSpaceAR(this.worldPosOfCup)}).start()},t.prototype.onTabToCloseClicked=function(){var e=this;this.animationCup.getAnimationState(this.animationCup.getClips()[0].name).isPlaying||(this.btnTabToClose.interactable=!1,this.btnTabToClose.node.active=!1,cc.tween(this.node).call(function(){return e.runAnimationCupScaleToWoodSelf()}).call(function(){return e.animationCup.play(e.animationCup.getClips()[1].name)}).delay(1.5).call(function(){return e.hand.active=!0}).start())},t.prototype.onAwardClicked=function(){this.animationCup.getAnimationState(this.animationCup.getClips()[1].name).isPlaying||this.btnTabToClose.interactable||(a.Scene.scene.value="award")},i([s(cc.Animation)],t.prototype,"animationCup",void 0),i([s(cc.Button)],t.prototype,"btnTabToClose",void 0),i([s(cc.Node)],t.prototype,"hand",void 0),i([s(cc.Node)],t.prototype,"cupNode",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../SceneManager/scene.model":"scene.model"}],TutorialConstant:[function(e,t,o){"use strict";cc._RF.push(t,"b21e7gVTi9JAI/GKjJoi4TY","TutorialConstant"),Object.defineProperty(o,"__esModule",{value:!0}),o.getTutorialInGameStepLength=o.getTutorialStepLength=o.getTutorialInGameByStep=o.getTutorialByStep=void 0,o.getTutorialByStep=function(e){return _.cloneDeep(r[e])},o.getTutorialInGameByStep=function(e){return _.cloneDeep(n[e])},o.getTutorialStepLength=function(){return r.length},o.getTutorialInGameStepLength=function(){return n.length};var r=[{descript:"Clear as many as blocks to get your high score",board:[[0,1],[0,1],[0,1],[0,1],[0,1],[0,0,0,0,0],[0,1],[0,1],[0,1],[0,1]],blocks:[[[1]],[],[]],actionBlockId:1,moveAction:{moveToCenterBoard:[4,1]}},{descript:"Try to complete HORIZONTAL line to clear blocks",board:[[],[],[],[],[],[1,1,1,1,0,1,1,1,1,1],[],[],[],[]],blocks:[[[1]],[],[]],actionBlockId:1,moveAction:{moveToCenterBoard:[4,4]}},{descript:"Great! Complete Horizontal and Vertical lines to get your COMBO",board:[[0,0,0,0,1,1],[0,0,0,0,1,1],[0,0,0,0,1,1],[0,0,0,0,1,1],[1,1,1,1,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1],[0,0,0,0,1,1],[0,0,0,0,1,1],[0,0,0,0,1,1],[0,0,0,0,1,1]],blocks:[[[1,1,1],[0,0,1],[0,0,1]],[[1,1],[1,1]],[[1,1,1],[1,0,0],[1,0,0]]],actionBlockId:2,moveAction:{moveToCenterBoard:[4,4]}}],n=[{descript:"",board:[[0,0,1,1,0,1,1,1],[0,0,1,1,0,1,1,1],[0,0,1,1,0,1,1,1],[0,0,1,1,0,0,0,0],[1,0,0,0,1,1,1,1,1],[0,0,1,0,0,0,0,1],[0,0,1,0,0,1,1,1],[0,0,1,1,0,1,1,1],[0,0,1,1,0,1,1,1]],blocks:[[[1,1,1],[0,0,1],[0,0,1]],[[1,1],[1,0]],[[1,1,1],[1,0,0],[1,0,0]]],actionBlockId:1,moveAction:{moveToCenterBoard:[2,1]}},{descript:"You can put the block in the holder or take it out any time you want",board:null,blocks:null,actionBlockId:1,swapBlockAction:{toBlockId:4}},{descript:"",board:null,blocks:null,actionBlockId:4,moveAction:{moveToCenterBoard:[3,6],willNotAnim:!0}},{descript:"",board:null,blocks:null,actionBlockId:1,moveAction:{moveToCenterBoard:[3,5]}}];cc._RF.pop()},{}],TutorialController:[function(e,t,o){"use strict";cc._RF.push(t,"084e0rLfXZL7qfzXNQ6uvmT","TutorialController");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../CoreGameplayEx/TableGame"),c=e("../CoreGameplayEx/BoardGame"),l=e("../CoreGameplayEx/ConstantGameplay"),s=e("../../Plugin/KDPlugin/MatrixGame/TableMatrix"),p=e("../CoreGameplayEx/BlockGame"),u=e("../Sound/sound.model"),d=e("../Player/player.model"),h=e("../SceneManager/scene.model"),f=e("./TutorialConstant"),y=e("../../Plugin/KDPlugin/MatrixGame/Block"),v=e("../Popups/Base/components/BasePopup"),_=e("../../Plugin/Reactive/lib"),g=e("../CoreGameplayEx/TableConfig"),b=cc._decorator,m=b.ccclass,C=b.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelDescription=null,t.skipNode=null,t.hand=null,t.blockAllTouch=null,t.popupCompletedTutorial=null,t.maskComp=null,t.tableConfig=null,t.tableGame=null,t.streak=0,t}return n(t,e),Object.defineProperty(t.prototype,"currentStep",{get:function(){return this._currentStep},set:function(e){this._currentStep=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.tableGame=this.getComponentInChildren(a.default),this.tableGame.listener=this,this.tableConfig.applyConfig(),_.Reactive.addTarget(this)},t.prototype.start=function(){this.skipNode.active=1==d.Player.playedTutorial.value,this.labelDescription.node.width=this.skipNode.active?460:560,this.gotoStep(0)},t.prototype.onDestroy=function(){_.Reactive.removeTarget(this)},t.prototype.onHoldRightHandUpdated=function(){var e=this.getTutorialDataByStep(this._currentStep);this.hand.active=!0,this.setupHand(e),this.setupMask(e)},t.prototype.onFinishedTutorial=function(){var e=this;this.scheduleOnce(function(){e.popupCompletedTutorial.show()},1.2)},t.prototype.onPlayNowCompletedTutorial=function(){d.Player.playedTutorial.value=!0,cc.tween(this.node).delay(.3).call(function(){h.Scene.scene.value="block-plus"}).start()},t.prototype.getTutorialDataByStep=function(e){return f.getTutorialByStep(e)},t.prototype.getTutorialDataByStepLength=function(){return f.getTutorialStepLength()},t.prototype.gotoStep=function(e){this._currentStep=e;var t=this.getTutorialDataByStep(this._currentStep);this.setupBoard(t),this.setupBlocks(t),this.setupDescriptions(t),this.setupHand(t),this.setupMask(t),this.blockAllTouch.active=!1},t.prototype.nextStep=function(){var e=this;if(this._currentStep>=this.getTutorialDataByStepLength()-1)this.onFinishedTutorial();else{this.blockAllTouch.active=!0;var t,o=this.getTutorialDataByStep(this._currentStep+1),r=this.getTutorialDataByStep(this._currentStep);t=r.moveAction?.3+(r.moveAction&&r.moveAction.willNotAnim?0:.9):.3,o.board?cc.tween(this.tableGame.node).delay(t).to(.3,{opacity:0}).call(function(){return e.gotoStep(e._currentStep+1)}).to(.3,{opacity:255}).start():cc.tween(this.tableGame.node).delay(t).call(function(){return e.gotoStep(e._currentStep+1)}).start()}},t.prototype.setupBoard=function(e){if(e.board){var t=c.default.createTableMatrixDefaultForBoard(l.default.BOARD_ROW_TOP,l.default.BOARD_ROW_BOT,l.default.BOARD_COL_LEFT,l.default.BOARD_COL_RIGHT),o=e.board.reverse();if(o)for(var r in o)for(var n in o[r])o[r][n]>0&&t.setValueAt(l.default.BOARD_ROW_BOT+parseInt(r),l.default.BOARD_COL_LEFT+parseInt(n),2);this.tableGame.setupBoard(t)}},t.prototype.setupBlocks=function(e){if(e.blocks){var t=e.blocks,o=[];t.forEach(function(e){if((e=e.reverse()).length){for(var t=s.default.createDefaultTableMatrix(l.default.MAX_ROWS,l.default.MAX_COLS),r=0;r<e.length;r++)for(var n=0;n<e[0].length;n++)e[r][n]&&t.setValueAt(r,n,2);o.push(t)}else o.push(p.default.createTableMatrixBlock())}),this.tableGame.pushNextBlocksMatrix(o),this.tableGame.change3NewBlocksToGame(null)}this.tableGame.enableHolder=!1,this.tableGame.blocks.forEach(function(e){e.setEnableTouchBlock(!1),e.lockRotate=!0,e.setEnableCannotPlaceBlockEff(!1)});var r=this.tableGame.getBlockByBlockId(e.actionBlockId);e.moveAction?(r.setEnableTouchBlock(!0),r.lockRotate=!0,r.justAllowChangeMatrixAtAddPos=cc.v2(l.default.BOARD_COL_LEFT+e.moveAction.moveToCenterBoard[1],l.default.BOARD_ROW_BOT+e.moveAction.moveToCenterBoard[0])):e.rotateAction?(r.setEnableTouchBlock(!0),r.lockRotate=!1,r.justAllowChangeMatrixAtAddPos=cc.v2(-100,-100)):e.swapBlockAction&&(this.tableGame.enableHolder=!0,r.setEnableTouchBlock(!0),r.lockRotate=!0,r.justAllowChangeMatrixAtAddPos=cc.v2(-1,-1))},t.prototype.setupDescriptions=function(e){var t=this;if(e.descript.length){var o=e.descript;o!=this.labelDescription.string&&cc.tween(this.labelDescription.node.parent).set({opacity:0}).call(function(){return t.labelDescription.string=o}).to(.3,{opacity:255}).start()}else this.labelDescription.node.parent.opacity=0},t.prototype.setupHand=function(e){var t=this;this.hand.stopAllActions(),this.hand.getChildByName("shadow")&&this.hand.getChildByName("shadow").destroy(),this.hand.active=!1;var o=e.actionBlockId,r=this.tableGame.getBlockByBlockId(o),n=this.node.convertToNodeSpaceAR(this.tableGame.node.convertToWorldSpaceAR(cc.v3(r.customePos)));if(e.moveAction||e.swapBlockAction){var i=cc.instantiate(r.getRendererByType(y.eBlockRendererType.BlockRenderer));i.name="shadow",i.position=cc.Vec3.ZERO,i.parent=this.hand,i.opacity=120,i.scale=1,i.setSiblingIndex(0);var a=cc.Vec3.ZERO;if(e.moveAction){var c=r.justAllowChangeMatrixAtAddPos.add(cc.v2((r.rightAvailable-r.leftAvailable+1)/2-.5,(r.topAvailable-r.botAvailable+1)/2-.5));a=this.tableGame.node.position.add(r.posFromRowAndCol(c.y,c.x))}else a=this.node.convertToNodeSpaceAR(cc.v3(this.tableGame.worldPosByBlockId(e.swapBlockAction.toBlockId)));cc.tween(this.hand).repeatForever(cc.tween(this.hand).call(function(){return i.active=!1}).set({position:n.sub(cc.v3(0,150)),scale:1,opacity:0}).call(function(){return t.hand.active=!0}).parallel(cc.tween().to(.3,{opacity:255}),cc.tween().to(.6,{position:n})).call(function(){return i.active=!0}).delay(.8).to(.8,{position:a}).to(.8,{opacity:0}).start()).start()}else e.rotateAction&&cc.tween(this.hand).repeatForever(cc.tween(this.hand).set({position:n.sub(cc.v3(0,150)),scale:1,opacity:0}).call(function(){return t.hand.active=!0}).parallel(cc.tween().to(.1,{opacity:255}),cc.tween().to(.3,{position:n})).delay(.3).to(.15,{scale:.9}).to(.15,{scale:1}).delay(.3).to(.3,{opacity:0}).start()).start()},t.prototype.setupMask=function(e){if(this.maskComp)if(e.swapBlockAction){this.clearDrawRect(),this.maskComp.node.active=!0;var t=cc.size(250,250);this.drawRectAtPosition(this.maskComp.node.convertToNodeSpaceAR(this.tableGame.worldPosByBlockId(a.BLOCK_ID_CURRENT_1)).sub(cc.v2(t.width/2,t.height/2)),t),t=cc.size(200,200),this.drawRectAtPosition(this.maskComp.node.convertToNodeSpaceAR(this.tableGame.worldPosByBlockId(a.BLOCK_ID_HOLD)).sub(cc.v2(t.width/2,t.height/2)),t,!0)}else this.maskComp.node.active=!1},t.prototype.clearDrawRect=function(){this.maskComp._graphics.clear()},t.prototype.drawRectAtPosition=function(e,t,o,r){void 0===o&&(o=!1),void 0===r&&(r=15);var n=this.maskComp._graphics;o||n.clear(),n.fillColor=cc.Color.BLACK,n.strokeColor=cc.Color.BLACK,n.roundRect(e.x,e.y,t.width,t.height,r),n.fill(),n.stroke(),n.close()},t.prototype.onPlaySound=function(e){e&&(u.Sound.sound.value=e.name)},t.prototype.onTouchBlockBegin=function(){this.hand.active=!1,this.hand.stopAllActions()},t.prototype.onTouchBlockEnd=function(){},t.prototype.onClickedBlock=function(){this.getTutorialDataByStep(this._currentStep).rotateAction&&this.nextStep()},t.prototype.onMovedBlock=function(e){var t=this.getTutorialDataByStep(this._currentStep);e||(this.hand.active=!0,this.setupHand(t))},t.prototype.onSwapedBlock=function(){this.getTutorialDataByStep(this._currentStep).swapBlockAction&&this.nextStep()},t.prototype.onHoldEmptyNoSpaceLeftButNextBlockValid=function(){},t.prototype.onNoSpaceLeftButBlockCanRotate=function(){},t.prototype.onPlacedBlockToBoard=function(e,t,o,r,n){var i=e+t+o,a=i*l.default.SCORE_CLAIM_PER_LINE;i>=3&&(a=l.default.SCORE_CLAIM_PER_LINE*Math.pow(i,2)/2);var c=0;i>0?(this.streak++,c=Math.max(0,(this.streak-1)*l.default.SCORE_PER_STRIKE)):this.streak=0,n(r+a+c,this.streak),this.nextStep()},t.prototype.onCollectStar=function(){},t.prototype.getBlockTypesForNewTurn=function(){return[]},t.prototype.getGenerateMaskStarList=function(){return[]},t.prototype.onSaveTable=function(){},t.prototype.onClear=function(){},t.prototype.onOutOfMove=function(){},i([C(cc.Label)],t.prototype,"labelDescription",void 0),i([C(cc.Node)],t.prototype,"skipNode",void 0),i([C(cc.Node)],t.prototype,"hand",void 0),i([C(cc.Node)],t.prototype,"blockAllTouch",void 0),i([C(v.default)],t.prototype,"popupCompletedTutorial",void 0),i([C(cc.Mask)],t.prototype,"maskComp",void 0),i([C(g.TableConfig)],t.prototype,"tableConfig",void 0),i([_.react({event:d.PlayerProps.holdRighHand})],t.prototype,"onHoldRightHandUpdated",null),i([m],t)}(cc.Component);o.default=S,cc._RF.pop()},{"../../Plugin/KDPlugin/MatrixGame/Block":"Block","../../Plugin/KDPlugin/MatrixGame/TableMatrix":"TableMatrix","../../Plugin/Reactive/lib":"lib","../CoreGameplayEx/BlockGame":"BlockGame","../CoreGameplayEx/BoardGame":"BoardGame","../CoreGameplayEx/ConstantGameplay":"ConstantGameplay","../CoreGameplayEx/TableConfig":"TableConfig","../CoreGameplayEx/TableGame":"TableGame","../Player/player.model":"player.model","../Popups/Base/components/BasePopup":"BasePopup","../SceneManager/scene.model":"scene.model","../Sound/sound.model":"sound.model","./TutorialConstant":"TutorialConstant"}],TutorialInGameController:[function(e,t,o){"use strict";cc._RF.push(t,"b0ea4NvY59KTZoScv+jlSou","TutorialInGameController");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../CoreGameplayEx/TableGame"),c=e("../Player/player.model"),l=e("./TutorialController"),s=e("./TutorialConstant"),p=e("../Gameplay/table.model"),u=e("../../Plugin/Reactive/lib"),d=cc._decorator,h=d.ccclass,f=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){this.tableGame=this.node.parent.getComponentInChildren(a.default),u.Reactive.addTarget(this)},t.prototype.start=function(){var e=this;c.Player.playedTutorialInGame.value?this.node.destroy():this.scheduleOnce(function(){e.startTutorialInGame()},.5)},t.prototype.startTutorialInGame=function(){p.default.resetForNewGame(),this.gotoStep(0)},t.prototype.onFinishedTutorial=function(){c.Player.playedTutorialInGame.value=!0,this.tableGame.enableHolder=!0,this.tableGame.blocks.concat(this.tableGame.unuseBlocks).forEach(function(e){e.setEnableTouchBlock(!0),e.lockRotate=!1,e.setEnableCannotPlaceBlockEff(!1)}),this.node.destroy()},t.prototype.getTutorialDataByStep=function(e){return s.getTutorialInGameByStep(e)},t.prototype.getTutorialDataByStepLength=function(){return s.getTutorialInGameStepLength()},t.prototype.onPlacedBlockToBoard=function(){this.nextStep()},i([h],t)}(l.default));o.default=f,cc._RF.pop()},{"../../Plugin/Reactive/lib":"lib","../CoreGameplayEx/TableGame":"TableGame","../Gameplay/table.model":"table.model","../Player/player.model":"player.model","./TutorialConstant":"TutorialConstant","./TutorialController":"TutorialController"}],UIScale:[function(e,t,o){"use strict";cc._RF.push(t,"0e53aiLs65GH6Es/k4ypAt7","UIScale");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=0,t}return n(t,e),t.prototype.onLoad=function(){this.node.getContentSize().width+this.padding>=cc.winSize.width&&this.node.setScale(cc.winSize.width/(this.node.getContentSize().width+this.padding))},i([l(cc.Integer)],t.prototype,"padding",void 0),i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],UXAnalyticTrigger:[function(e,t,o){"use strict";cc._RF.push(t,"9b7b15dOFBNt63FeXY4/akf","UXAnalyticTrigger");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.UxViews=void 0;var a,c=e("../Manager4Native/AnalyticManager"),l=cc._decorator,s=l.ccclass,p=l.property;(function(e){e[e.MainMenu=0]="MainMenu",e[e.Gameplay=1]="Gameplay",e[e.Award=2]="Award",e[e.Statistic=3]="Statistic",e[e.PopupSetting=4]="PopupSetting",e[e.PopupCollection=5]="PopupCollection",e[e.PopupCollectionDetail=6]="PopupCollectionDetail",e[e.PopupCompletedLevel=7]="PopupCompletedLevel",e[e.PopupDaily=8]="PopupDaily",e[e.PopupFeedback=9]="PopupFeedback",e[e.PopupLose=10]="PopupLose",e[e.PopupMoreHint=11]="PopupMoreHint",e[e.PopupNotify=12]="PopupNotify",e[e.PopupOpenGift=13]="PopupOpenGift",e[e.PopupPause=14]="PopupPause",e[e.PopupRate=15]="PopupRate",e[e.PopupChooseAward=16]="PopupChooseAward",e[e.PopupGiftAward=17]="PopupGiftAward"})(a=o.UxViews||(o.UxViews={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uxView=a.MainMenu,t.action="",t}return n(t,e),t.prototype.onLoad=function(){this.node.on("click",this.onTargetClicked.bind(this))},t.prototype.onTargetClicked=function(){var e=this.action;this.node.getComponent(cc.Toggle)&&(e=this.action+"_"+(this.node.getComponent(cc.Toggle).isChecked?"Off":"On")),c.default.logEventUX(a[this.uxView],e)},i([p({type:cc.Enum(a)})],t.prototype,"uxView",void 0),i([p(cc.String)],t.prototype,"action",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Manager4Native/AnalyticManager":"AnalyticManager"}],Vibration:[function(e,t,o){"use strict";cc._RF.push(t,"91ec0Pphj5JFYVxBtt+Aly8","Vibration"),Object.defineProperty(o,"__esModule",{value:!0}),o.vibrate=void 0,o.vibrate=function(e){void 0===e&&(e=30),"undefined"!=typeof jsb&&(cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/util/vibration/Vibration","vibrate","(I)V",e),cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("Vibration","vibrate"))},cc._RF.pop()},{}],ViewModel:[function(e,t,o){"use strict";cc._RF.push(t,"b411aD185ZJd58wWKWpO6bf","ViewModel");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ViewModel=void 0;var i=function(e){function t(t){var o=e.call(this,t,!1)||this;return o.name=t,o}return n(t,e),t}(e("./Model").Model);o.ViewModel=i,cc._RF.pop()},{"./Model":"Model"}],WebView:[function(e,t,o){"use strict";cc._RF.push(t,"227aegbJOpN97XtWda6U6YW","WebView");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Base/models/popupsview.model"),c=cc._decorator,l=c.ccclass,s=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.webview=null,t}return n(t,e),t.prototype.onShow=function(){this.webview.node.active=!0,this.webview.url=a.PopupView.webView.value},t.prototype.onHide=function(){this.webview.node.active=!1},i([s(cc.WebView)],t.prototype,"webview",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Base/models/popupsview.model":"popupsview.model"}],"award.model":[function(e,t,o){"use strict";cc._RF.push(t,"c65fe0OcshJxKqzjAKfeGpG","award.model");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.AwardModelInstance=o.AwardProps=void 0;var a=e("../../Plugin/Reactive/lib"),c=e("../Utils/date"),l=e("./AwardData"),s=e("../Player/player.model"),p=e("../Manager4Native/AnalyticManager");o.AwardProps={awardUnlocked:"Award_Model.awardUnlocked",awardChoosen:"Award_Model.awardChoosen"};var u=function(e){function t(){var t=e.call(this,"Award_Model")||this;t.awardUnlocked=new a.PropertyArray([]),t.awardChoosen=new a.PropertyValue(null),t.streaks=new a.PropertyArray([]),t.streaksInDay=new a.PropertyArray([]),t.accumulatedScore=new a.PropertyValue(0),t.accumulatedScoreInDay=new a.PropertyValue(0),t.lastTimePlayed=new a.PropertyValue("");var o=new Date;return t.lastTimePlayed.value!=c.getStringFromDate(o)&&(t.streaksInDay.value.forEach(function(e,o){return t.streaksInDay.value[o]=0}),t.accumulatedScoreInDay.value=0),t.lastTimePlayed.value=c.getStringFromDate(o),t}return n(t,e),t.prototype.init=function(){var e=this;l.AwardDatas.forEach(function(t,o){e.getAwardPercentage(o)<100&&e.awardUnlocked.value.findIndex(function(e){return e==o})>=0&&(_.remove(e.awardUnlocked.value,function(e){return e==o}),e.awardChoosen.value==o&&(e.awardChoosen.value=0))})},t.prototype.addStreak=function(e){var t=e-2;t<0||(this.streaks.value[t]?this.streaks.value[t]++:this.streaks.value[t]=1,this.streaksInDay.value[t]?this.streaksInDay.value[t]++:this.streaksInDay.value[t]=1)},t.prototype.addScore=function(e){this.accumulatedScore.value+=e,this.accumulatedScoreInDay.value+=e},t.prototype.getAwardPercentage=function(e){var t=this;if(e<0||e>=l.AwardDatas.length)return 0;var o=0,r=0,n=l.AwardDatas[e];if(n.requireAccumulateScore>0){o+=100;var i=100*this.accumulatedScore.value/n.requireAccumulateScore;r+=i=i>100?100:i}return n.requireTodayScore>0&&(o+=100,i=100*this.accumulatedScoreInDay.value/n.requireTodayScore,r+=i=i>100?100:i),n.requireHighestScore>0&&(o+=100,i=100*s.Player.highScore.value/n.requireHighestScore,r+=i=i>100?100:i),n.requireAccumulateStreaks.forEach(function(e,n){if(e>0){o+=100;var i=t.streaks.value.length>n?100*t.streaks.value[n]/e:0;r+=i=i>100?100:i}}),n.requireTodayStreak.forEach(function(e,n){if(e>0){o+=100;var i=t.streaksInDay.value.length>n?100*t.streaksInDay.value[n]/e:0;r+=i=i>100?100:i}}),0==o?100:100*r/o},t.prototype.isAwardUnlocked=function(e){return this.awardUnlocked.value.findIndex(function(t){return t==e})>=0},t.prototype.isAwardChoosen=function(e){return e==this.awardChoosen.value},t.prototype.unlockAward=function(e){return this.awardUnlocked.value.findIndex(function(t){return t==e})<0&&(this.awardUnlocked.push(e),1==this.awardUnlocked.length&&this.chooseAward(e),p.default.logEventAward(p.EventAwardsType.awards_unlocked,l.AwardDatas[e].name),!0)},t.prototype.chooseAward=function(e){return!(this.awardUnlocked.value.findIndex(function(t){return t==e})<0||(this.awardChoosen.value=e,0))},i([a.prop()],t.prototype,"awardUnlocked",void 0),i([a.prop()],t.prototype,"awardChoosen",void 0),i([a.prop()],t.prototype,"streaks",void 0),i([a.prop()],t.prototype,"streaksInDay",void 0),i([a.prop()],t.prototype,"accumulatedScore",void 0),i([a.prop()],t.prototype,"accumulatedScoreInDay",void 0),i([a.prop()],t.prototype,"lastTimePlayed",void 0),t}(a.Model);o.AwardModelInstance=a.repository.register(new u,!0),cc._RF.pop()},{"../../Plugin/Reactive/lib":"lib","../Manager4Native/AnalyticManager":"AnalyticManager","../Player/player.model":"player.model","../Utils/date":"date","./AwardData":"AwardData"}],const:[function(e,t,o){"use strict";cc._RF.push(t,"390bagnjiVBs4FRzAHgGHIN","const"),Object.defineProperty(o,"__esModule",{value:!0}),o.ENCRYPT_KEY=o.SOUND_BUTTON_EVENT=o.PROTOTYPE_TYPE=o.PROTOTYPE_PROPS=o.PROTOTYPE_HANDLERS=void 0,o.PROTOTYPE_HANDLERS="reactive_handlers",o.PROTOTYPE_PROPS="reactive_props",o.PROTOTYPE_TYPE="Property",o.SOUND_BUTTON_EVENT="Sound.button",o.ENCRYPT_KEY="SecretKeyHere",cc._RF.pop()},{}],date:[function(e,t,o){"use strict";cc._RF.push(t,"71e261kLJBIu5079M9FL9PA","date"),Object.defineProperty(o,"__esModule",{value:!0}),o.monthDiff=o.SHORT_DAY_NAMES=o.SHORT_MONTH_NAMES=o.getDateFromString=o.getStringFromDate=void 0,o.getStringFromDate=function(e){return e.getDate()+"-"+e.getMonth()+"-"+e.getFullYear()},o.getDateFromString=function(e){var t=e.split("-");return new Date(Number(t[2]),Number(t[1]),Number(t[0]))},o.SHORT_MONTH_NAMES=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o.SHORT_DAY_NAMES=["Su","Mo","Tu","We","Th","Fr","Sa"],o.monthDiff=function(e,t){var o;return o=12*(t.getFullYear()-e.getFullYear()),o-=e.getMonth(),(o+=t.getMonth())<=0?0:o},cc._RF.pop()},{}],encrypt:[function(e,t,o){"use strict";function r(e){this.message=e}function n(e){for(var t,o,n=String(e),i=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="";n.charAt(0|i)||(a="=",i%1);c+=a.charAt(63&t>>8-i%1*8)){if((o=n.charCodeAt(i+=.75))>255)throw new r("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|o}return c}function i(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,n,i=0,a=0,c="";n=t.charAt(a++);~n&&(o=i%4?64*o+n:n,i++%4)?c+=String.fromCharCode(255&o>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return c}function a(e){return unescape(encodeURIComponent(e))}function c(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}cc._RF.push(t,"521abg0KTFP1JwzakBYm41p","encrypt"),Object.defineProperty(o,"__esModule",{value:!0}),o.Sha256=o.Aes=void 0,r.prototype=new Error,r.prototype.name="InvalidCharacterError",o.Aes={cipher:function(e,t){for(var r=t.length/4-1,n=[[],[],[],[]],i=0;i<16;i++)n[i%4][Math.floor(i/4)]=e[i];n=o.Aes.addRoundKey(n,t,0,4);for(var a=1;a<r;a++)n=o.Aes.subBytes(n,4),n=o.Aes.shiftRows(n,4),n=o.Aes.mixColumns(n,4),n=o.Aes.addRoundKey(n,t,a,4);n=o.Aes.subBytes(n,4),n=o.Aes.shiftRows(n,4),n=o.Aes.addRoundKey(n,t,r,4);var c=new Array(16);for(i=0;i<16;i++)c[i]=n[i%4][Math.floor(i/4)];return c},keyExpansion:function(e){for(var t=e.length/4,r=t+6,n=new Array(4*(r+1)),i=new Array(4),a=0;a<t;a++){var c=[e[4*a],e[4*a+1],e[4*a+2],e[4*a+3]];n[a]=c}for(a=t;a<4*(r+1);a++){n[a]=new Array(4);for(var l=0;l<4;l++)i[l]=n[a-1][l];if(a%t==0)for(i=o.Aes.subWord(o.Aes.rotWord(i)),l=0;l<4;l++)i[l]^=o.Aes.rCon[a/t][l];else t>6&&a%t==4&&(i=o.Aes.subWord(i));for(l=0;l<4;l++)n[a][l]=n[a-t][l]^i[l]}return n},subBytes:function(e,t){for(var r=0;r<4;r++)for(var n=0;n<t;n++)e[r][n]=o.Aes.sBox[e[r][n]];return e},shiftRows:function(e,t){for(var o=new Array(4),r=1;r<4;r++){for(var n=0;n<4;n++)o[n]=e[r][(n+r)%t];for(n=0;n<4;n++)e[r][n]=o[n]}return e},mixColumns:function(e){for(var t=0;t<4;t++){for(var o=new Array(4),r=new Array(4),n=0;n<4;n++)o[n]=e[n][t],r[n]=128&e[n][t]?e[n][t]<<1^283:e[n][t]<<1;e[0][t]=r[0]^o[1]^r[1]^o[2]^o[3],e[1][t]=o[0]^r[1]^o[2]^r[2]^o[3],e[2][t]=o[0]^o[1]^r[2]^o[3]^r[3],e[3][t]=o[0]^r[0]^o[1]^o[2]^r[3]}return e},addRoundKey:function(e,t,o,r){for(var n=0;n<4;n++)for(var i=0;i<r;i++)e[n][i]^=t[4*o+i][n];return e},subWord:function(e){for(var t=0;t<4;t++)e[t]=o.Aes.sBox[e[t]];return e},rotWord:function(e){for(var t=e[0],o=0;o<3;o++)e[o]=e[o+1];return e[3]=t,e},sBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],rCon:[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Ctr:{encrypt:function(e,t,r){if(128!=r&&192!=r&&256!=r)throw new Error("Key size is not 128 / 192 / 256");e=a(e),t=a(t);for(var i=r/8,c=new Array(i),l=0;l<i;l++)c[l]=l<t.length?t.charCodeAt(l):0;var s=o.Aes.cipher(c,o.Aes.keyExpansion(c));s=s.concat(s.slice(0,i-16));var p=new Array(16),u=(new Date).getTime(),d=u%1e3,h=Math.floor(u/1e3),f=Math.floor(65535*Math.random());for(l=0;l<2;l++)p[l]=d>>>8*l&255;for(l=0;l<2;l++)p[l+2]=f>>>8*l&255;for(l=0;l<4;l++)p[l+4]=h>>>8*l&255;var y="";for(l=0;l<8;l++)y+=String.fromCharCode(p[l]);for(var v=o.Aes.keyExpansion(s),_=Math.ceil(e.length/16),g="",b=0;b<_;b++){for(var m=0;m<4;m++)p[15-m]=b>>>8*m&255;for(m=0;m<4;m++)p[15-m-4]=b/4294967296>>>8*m;var C=o.Aes.cipher(p,v),S=b<_-1?16:(e.length-1)%16+1,P=new Array(S);for(l=0;l<S;l++)P[l]=C[l]^e.charCodeAt(16*b+l),P[l]=String.fromCharCode(P[l]);g+=P.join("")}return n(y+g)},decrypt:function(e,t,r){if(128!=r&&192!=r&&256!=r)throw new Error("Key size is not 128 / 192 / 256");e=i(e),t=a(t);for(var n=r/8,l=new Array(n),s=0;s<n;s++)l[s]=s<t.length?t.charCodeAt(s):0;var p=o.Aes.cipher(l,o.Aes.keyExpansion(l));p=p.concat(p.slice(0,n-16));var u=new Array(8),d=e.slice(0,8);for(s=0;s<8;s++)u[s]=d.charCodeAt(s);for(var h=o.Aes.keyExpansion(p),f=Math.ceil((e.length-8)/16),y=new Array(f),v=0;v<f;v++)y[v]=e.slice(8+16*v,24+16*v);e=y;var _="";for(v=0;v<f;v++){for(var g=0;g<4;g++)u[15-g]=v>>>8*g&255;for(g=0;g<4;g++)u[15-g-4]=(v+1)/4294967296-1>>>8*g&255;var b=o.Aes.cipher(u,h),m=new Array(e[v].length);for(s=0;s<e[v].length;s++)m[s]=b[s]^e[v].charCodeAt(s),m[s]=String.fromCharCode(m[s]);_+=m.join("")}return c(_)}}},o.Sha256={hash:function(e){e=e.utf8Encode();for(var t=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],n=(e+=String.fromCharCode(128)).length/4+2,i=Math.ceil(n/16),a=new Array(i),c=0;c<i;c++){a[c]=new Array(16);for(var l=0;l<16;l++)a[c][l]=e.charCodeAt(64*c+4*l)<<24|e.charCodeAt(64*c+4*l+1)<<16|e.charCodeAt(64*c+4*l+2)<<8|e.charCodeAt(64*c+4*l+3)}a[i-1][14]=8*(e.length-1)/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=8*(e.length-1)&4294967295;var s,p,u,d,h,f,y,v,_=new Array(64);for(c=0;c<i;c++){for(var g=0;g<16;g++)_[g]=a[c][g];for(g=16;g<64;g++)_[g]=o.Sha256.\u03c31(_[g-2])+_[g-7]+o.Sha256.\u03c30(_[g-15])+_[g-16]&4294967295;for(s=r[0],p=r[1],u=r[2],d=r[3],h=r[4],f=r[5],y=r[6],v=r[7],g=0;g<64;g++){var b=v+o.Sha256.\u03a31(h)+o.Sha256.Ch(h,f,y)+t[g]+_[g],m=o.Sha256.\u03a30(s)+o.Sha256.Maj(s,p,u);v=y,y=f,f=h,h=d+b&4294967295,d=u,u=p,p=s,s=b+m&4294967295}r[0]=r[0]+s&4294967295,r[1]=r[1]+p&4294967295,r[2]=r[2]+u&4294967295,r[3]=r[3]+d&4294967295,r[4]=r[4]+h&4294967295,r[5]=r[5]+f&4294967295,r[6]=r[6]+y&4294967295,r[7]=r[7]+v&4294967295}return o.Sha256.toHexStr(r[0])+o.Sha256.toHexStr(r[1])+o.Sha256.toHexStr(r[2])+o.Sha256.toHexStr(r[3])+o.Sha256.toHexStr(r[4])+o.Sha256.toHexStr(r[5])+o.Sha256.toHexStr(r[6])+o.Sha256.toHexStr(r[7])},ROTR:function(e,t){return t>>>e|t<<32-e},"\u03a30":function(e){return o.Sha256.ROTR(2,e)^o.Sha256.ROTR(13,e)^o.Sha256.ROTR(22,e)},"\u03a31":function(e){return o.Sha256.ROTR(6,e)^o.Sha256.ROTR(11,e)^o.Sha256.ROTR(25,e)},"\u03c30":function(e){return o.Sha256.ROTR(7,e)^o.Sha256.ROTR(18,e)^e>>>3},"\u03c31":function(e){return o.Sha256.ROTR(17,e)^o.Sha256.ROTR(19,e)^e>>>10},Ch:function(e,t,o){return e&t^~e&o},Maj:function(e,t,o){return e&t^e&o^t&o},toHexStr:function(e){for(var t="",o=7;o>=0;o--)t+=(e>>>4*o&15).toString(16);return t}},cc._RF.pop()},{}],lib:[function(e,t,o){"use strict";cc._RF.push(t,"059beJJIW1AdK5Rcjjlg2WW","lib");var r=this&&this.__createBinding||(Object.create?function(e,t,o,r){void 0===r&&(r=o),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,r){void 0===r&&(r=o),e[r]=t[o]}),n=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||r(t,e,o)};Object.defineProperty(o,"__esModule",{value:!0}),o.ReactiveComponent=void 0,n(e("./const"),o),n(e("./Property/PropertyHightValue"),o),n(e("./Property/ReactiveProperty"),o),n(e("./Property/PropertyValue"),o),n(e("./Property/PropertyArray"),o),n(e("./Property/PropertyMap"),o),n(e("./Property/PropertyMapMulti"),o),n(e("./Property/PropertyRunner"),o),n(e("./Property/PropertyNumberRunner"),o),n(e("./Property/PropertyNonSerialize"),o),n(e("./Property/PropertyFilter"),o),n(e("./Property/PropertyTrigger"),o),n(e("./Model/Model"),o),n(e("./Model/ViewModel"),o),n(e("./Model/Repository"),o),n(e("./Decorator/React.decorator"),o),n(e("./Decorator/Prop.decorator"),o);var i=e("./Components/ReactiveComponent");Object.defineProperty(o,"ReactiveComponent",{enumerable:!0,get:function(){return i.default}}),cc._RF.pop()},{"./Components/ReactiveComponent":"ReactiveComponent","./Decorator/Prop.decorator":"Prop.decorator","./Decorator/React.decorator":"React.decorator","./Model/Model":"Model","./Model/Repository":"Repository","./Model/ViewModel":"ViewModel","./Property/PropertyArray":"PropertyArray","./Property/PropertyFilter":"PropertyFilter","./Property/PropertyHightValue":"PropertyHightValue","./Property/PropertyMap":"PropertyMap","./Property/PropertyMapMulti":"PropertyMapMulti","./Property/PropertyNonSerialize":"PropertyNonSerialize","./Property/PropertyNumberRunner":"PropertyNumberRunner","./Property/PropertyRunner":"PropertyRunner","./Property/PropertyTrigger":"PropertyTrigger","./Property/PropertyValue":"PropertyValue","./Property/ReactiveProperty":"ReactiveProperty","./const":"const"}],"noti.const":[function(e,t,o){"use strict";cc._RF.push(t,"8909f6yJSxJIoOHQhWKDOvw","noti.const"),Object.defineProperty(o,"__esModule",{value:!0}),o.NotificationInit=void 0,o.NotificationInit={daily:[{id:"daily_1",id_android:0,title:"Square 99",body:"",hour:10,minute:30}]},cc._RF.pop()},{}],"noti.model":[function(e,t,o){"use strict";cc._RF.push(t,"e03e7+crCNCequLfV7sIhiJ","noti.model");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NotificationProps=void 0;var a=e("../Player/player.model"),c=e("../../Plugin/Reactive/lib"),l=e("../Popups/Base/models/popupsview.model"),s=e("../Utils/date");o.NotificationProps={enable:"Notification.enable",allowed:"Notification.allowed",funcShow:"Notification.show",funcCanShow:"Notification.canShowPopup"};var p=function(e){function t(o,r,n){void 0===r&&(r=!0),void 0===n&&(n=null);var i=e.call(this,o,r,n)||this;return i.name=o,i.serializable=r,i.saveFile=n,i.enable=new c.PropertyValue(!1),i.allowed=new c.PropertyValue(!1),i.lastTimeShowed=new c.PropertyValue(""),t.totalGamePlayedFromLaunchGame=a.Player.playedGames.value,i}return n(t,e),t.prototype.canShowPopup=function(){var e=s.getStringFromDate(new Date);return!this.allowed.value&&Math.abs(a.Player.playedGames.value-t.totalGamePlayedFromLaunchGame)>=5&&e!==this.lastTimeShowed.value},t.prototype.show=function(){this.lastTimeShowed.value=s.getStringFromDate(new Date),c.repository.setValue(l.PopupsViewProps.notification,!0)},t.prototype.allow=function(){this.allowed.value=!0,this.enable.value=!0},t.totalGamePlayedFromLaunchGame=null,i([c.prop()],t.prototype,"enable",void 0),i([c.prop()],t.prototype,"allowed",void 0),i([c.prop()],t.prototype,"lastTimeShowed",void 0),t}(c.Model);c.repository.register(new p("Notification"),!0),cc._RF.pop()},{"../../Plugin/Reactive/lib":"lib","../Player/player.model":"player.model","../Popups/Base/models/popupsview.model":"popupsview.model","../Utils/date":"date"}],number:[function(e,t,o){"use strict";cc._RF.push(t,"34ab9uXdWlPKJW2TF7mi5UC","number"),Object.defineProperty(o,"__esModule",{value:!0}),o.format=void 0,o.format=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},cc._RF.pop()},{}],"player.model":[function(e,t,o){"use strict";cc._RF.push(t,"1ce51656CJAx7ZUPsK3qZml","player.model");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Player=o.PlayerProps=void 0;var a=e("../../Plugin/Reactive/lib"),c=e("../../Plugin/Native/Vibration");o.PlayerProps={highScore:"Player.highScore",rating:"Player.rating",saveData:"Player.saveData",playedGames:"Player.playedGames",holdRighHand:"Player.holdRighHand",lang:"Player.lang",funcIncreasePlayedGames:"Player.increasePlayedGames",hintCount:"Player.hintCount",playedTutorial:"Player.playedTutorial",removedAds:"Player.removedAds",effects:"Player.effects"};var l=function(e){function t(){var t=e.call(this,"Player")||this;return t.highScore=new a.PropertyHightValue(0),t.rating=new a.PropertyValue(0),t.playedGames=new a.PropertyValue(0),t.vibrate=new a.PropertyValue(!0),t.holdRighHand=new a.PropertyValue(!0),t.playedTutorial=new a.PropertyValue(!1),t.playedTutorialInGame=new a.PropertyValue(!0),t.mergedFrom2dx=new a.PropertyValue(!1),t.removedAds=new a.PropertyValue(!1),t.effects=new a.PropertyValue(!1),t.subscritionProductId=new a.PropertyValue(""),cc.game.on(cc.game.EVENT_HIDE,function(){cc.log("save game"),a.repository.saveAll()}),t}return n(t,e),t.prototype.clearSave=function(){},t.prototype.save=function(){a.repository.save(this.name)},t.prototype.increasePlayedGames=function(){this.playedGames.value+=1},t.prototype.vibration=function(){this.vibrate.value&&c.vibrate()},t.prototype.vibrateLong=function(){this.vibrate.value&&c.vibrate(120)},i([a.prop()],t.prototype,"highScore",void 0),i([a.prop()],t.prototype,"rating",void 0),i([a.prop()],t.prototype,"playedGames",void 0),i([a.prop()],t.prototype,"vibrate",void 0),i([a.prop()],t.prototype,"holdRighHand",void 0),i([a.prop()],t.prototype,"playedTutorial",void 0),i([a.prop()],t.prototype,"playedTutorialInGame",void 0),i([a.prop()],t.prototype,"mergedFrom2dx",void 0),i([a.prop()],t.prototype,"removedAds",void 0),i([a.prop()],t.prototype,"effects",void 0),i([a.prop()],t.prototype,"subscritionProductId",void 0),t}(a.Model);o.Player=a.repository.register(new l,!0),cc._RF.pop()},{"../../Plugin/Native/Vibration":"Vibration","../../Plugin/Reactive/lib":"lib"}],"popupsview.model":[function(e,t,o){"use strict";cc._RF.push(t,"d2979ORRYNCe5Zt3NkWQeJo","popupsview.model");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.PopupView=o.PopupsViewProps=void 0;var a=e("../../../../Plugin/Reactive/lib");o.PopupsViewProps={setting:"PopupsView.setting",pause:"PopupsView.pause",notification:"PopupsView.notification",rate:"PopupsView.rate",feedback:"PopupsView.feedback",lose:"PopupsView.lose",chooseAward:"PopupsView.chooseAward"};var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setting=new a.PropertyTrigger,t.pause=new a.PropertyTrigger,t.notification=new a.PropertyTrigger,t.rate=new a.PropertyTrigger,t.feedback=new a.PropertyTrigger,t.lose=new a.PropertyTrigger,t.chooseAward=new a.PropertyTrigger,t.webView=new a.PropertyTrigger,t.giftReward=new a.PropertyTrigger,t}return n(t,e),i([a.prop()],t.prototype,"setting",void 0),i([a.prop()],t.prototype,"pause",void 0),i([a.prop()],t.prototype,"notification",void 0),i([a.prop()],t.prototype,"rate",void 0),i([a.prop()],t.prototype,"feedback",void 0),i([a.prop()],t.prototype,"lose",void 0),i([a.prop()],t.prototype,"chooseAward",void 0),i([a.prop()],t.prototype,"webView",void 0),i([a.prop()],t.prototype,"giftReward",void 0),t}(a.ViewModel);o.PopupView=a.repository.register(new c("PopupsView")),cc._RF.pop()},{"../../../../Plugin/Reactive/lib":"lib"}],"scene.const":[function(e,t,o){"use strict";cc._RF.push(t,"021c2mgb8FLWbsHlTrbzGGc","scene.const"),Object.defineProperty(o,"__esModule",{value:!0}),o.SceneNames=void 0,o.SceneNames={LOADING:"game-loading",MENU:"main-menu",GAME:"block-plus"},cc._RF.pop()},{}],"scene.model":[function(e,t,o){"use strict";cc._RF.push(t,"38b46oLW+JIIIw/0LqmZmGd","scene.model");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Scene=o.SceneProps=void 0;var a=e("../../Plugin/Reactive/lib");o.SceneProps={scene:"Scene.scene"};var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scene=new a.PropertyTrigger,t}return n(t,e),i([a.prop()],t.prototype,"scene",void 0),t}(a.ViewModel);o.Scene=a.repository.register(new c("Scene")),cc._RF.pop()},{"../../Plugin/Reactive/lib":"lib"}],"sound.const":[function(e,t,o){"use strict";cc._RF.push(t,"ee3046mXBxKIKlK3rhK/mQp","sound.const"),Object.defineProperty(o,"__esModule",{value:!0}),o.SoundNames=void 0,o.SoundNames=Object.freeze({BG_MUSIC:"bgm_title",BNT_CLICK:"buttonclick",NEW_HIGHEST_SCORE:"highscore",TOUCH_BLOCK_NOT_ENOUGHT_SPACE:"",INFO_AWARD:"",GAME_OVER:"gameover",REPLAY_NEW_GAME:"",SCORE_COUNT:"",GIFT_OPEN:"",SPECIAL_TILE_ACTIVE:""}),cc._RF.pop()},{}],"sound.controller":[function(e,t,o){"use strict";cc._RF.push(t,"b25fblU6KBB7aGv8z0cFRCd","sound.controller");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SoundController=void 0;var a=e("./sound.model"),c=e("../../Plugin/Reactive/lib"),l=cc._decorator,s=l.ccclass,p=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resFolder="Sound",t.directClips=[],t.backgrounds=[],t.buttonAudio="",t.persist=!0,t.stopOnPlay=!0,t.preloadAudios=[],t.playIds={},t}return n(t,e),t.prototype.onLoad=function(){c.Reactive.addTarget(this),this.soundModel=c.repository.getModel(a.SoundProps.model),this.backgroundEnable(null,this.soundModel.background_volume.value),this.soundEnable(null,this.soundModel.sound_volume.value),this.preload()},t.prototype.preload=function(){var e,t=this;(e=this.preloadAudios).push.apply(e,this.directClips),cc.resources.loadDir(this.resFolder,function(e,o){var r;e?cc.log(e):(o.forEach(function(e){return e.addRef()}),(r=t.preloadAudios).push.apply(r,o),t.backgrounds&&t.backgrounds.length>0&&t.backgroundPlay(null,t.backgrounds[0]))})},t.prototype.start=function(){this.persist&&cc.game.addPersistRootNode(this.node)},t.prototype.onDestroy=function(){c.Reactive.removeTarget(this),cc.audioEngine.stopAll()},t.prototype.button=function(){this.buttonAudio&&cc.audioEngine.playEffect(this.getAudio(this.buttonAudio),!1)},t.prototype.backgroundEnable=function(e,t){cc.audioEngine.setMusicVolume(t||0),0===t?cc.audioEngine.pauseMusic():cc.audioEngine.resumeMusic()},t.prototype.backgroundPlay=function(e,t,o){if("string"==typeof t){if(this.isPlaying(t))return;var r=this.getAudio(t);r&&(o=!(void 0!==o&&o instanceof Boolean)||o,this.playIds[t]=cc.audioEngine.playMusic(r,o))}},t.prototype.soundEnable=function(e,t){cc.audioEngine.setEffectsVolume(t||0),0===t?cc.audioEngine.pauseAllEffects():cc.audioEngine.resumeAllEffects()},t.prototype.soundPlay=function(e,t,o){var r=this,n="string"==typeof t?t:t.name,i="string"==typeof t?this.stopOnPlay:t.replace,a="string"==typeof t?0:t.delay;o="string"==typeof t?o:t.loop,a>0?this.scheduleOnce(function(){return r.play(n,i,o)},a):this.play(n,i,o)},t.prototype.stop=function(e,t){"string"==typeof t&&this.playIds[t]&&cc.audioEngine.stop(this.playIds[t])},t.prototype.play=function(e,t,o){this.isPlaying(e)&&t&&this.stop(null,e);var r=this.getAudio(e);r&&(this.playIds[e]=cc.audioEngine.playEffect(r,o))},t.prototype.getAudio=function(e){for(var t=0,o=this.preloadAudios;t<o.length;t++){var r=o[t];if(r.name===e)return r}return null},t.prototype.isPlaying=function(e){if(this.playIds[e]){var t=cc.audioEngine.getState(this.playIds[e]);return t===cc.audioEngine.AudioState.PLAYING||t===cc.audioEngine.AudioState.INITIALZING}return!1},i([p(cc.String)],t.prototype,"resFolder",void 0),i([p([cc.AudioClip])],t.prototype,"directClips",void 0),i([p({type:cc.String})],t.prototype,"backgrounds",void 0),i([p(cc.String)],t.prototype,"buttonAudio",void 0),i([p(cc.Boolean)],t.prototype,"persist",void 0),i([p(cc.Boolean)],t.prototype,"stopOnPlay",void 0),i([c.react({event:a.SoundProps.button})],t.prototype,"button",null),i([c.react({event:a.SoundProps.background_volume})],t.prototype,"backgroundEnable",null),i([c.react({event:a.SoundProps.background})],t.prototype,"backgroundPlay",null),i([c.react({event:a.SoundProps.sound_volume})],t.prototype,"soundEnable",null),i([c.react({event:a.SoundProps.sound})],t.prototype,"soundPlay",null),i([c.react({event:a.SoundProps.background_stop}),c.react({event:a.SoundProps.sound_stop})],t.prototype,"stop",null),i([s],t)}(cc.Component);o.SoundController=u,cc._RF.pop()},{"../../Plugin/Reactive/lib":"lib","./sound.model":"sound.model"}],"sound.model":[function(e,t,o){"use strict";cc._RF.push(t,"70765kh+lRFJa+XTFt9QL9w","sound.model");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Sound=o.SoundModel=o.SoundProps=void 0;var a=e("../../Plugin/Reactive/lib");o.SoundProps={model:"Sound",sound:"Sound.sound",sound_stop:"Sound.sound_stop",sound_volume:"Sound.sound_volume",background:"Sound.background",background_stop:"Sound.background_stop",background_volume:"Sound.background_volume",button:"Sound.button"};var c=function(e){function t(){var t=e.call(this,o.SoundProps.model)||this;return t.sound=new a.PropertyTrigger,t.sound_stop=new a.PropertyTrigger,t.sound_volume=new a.PropertyValue(1),t.background=new a.PropertyTrigger,t.background_stop=new a.PropertyTrigger,t.background_volume=new a.PropertyValue(1),t.button=new a.PropertyTrigger,t.initialized=new a.PropertyValue(!1),t}return n(t,e),i([a.prop()],t.prototype,"sound",void 0),i([a.prop()],t.prototype,"sound_stop",void 0),i([a.prop()],t.prototype,"sound_volume",void 0),i([a.prop()],t.prototype,"background",void 0),i([a.prop()],t.prototype,"background_stop",void 0),i([a.prop()],t.prototype,"background_volume",void 0),i([a.prop()],t.prototype,"button",void 0),i([a.prop()],t.prototype,"initialized",void 0),t}(a.Model);o.SoundModel=c,o.Sound=a.repository.register(new c,!0),cc._RF.pop()},{"../../Plugin/Reactive/lib":"lib"}],"statistic.model":[function(e,t,o){"use strict";cc._RF.push(t,"7a303/iBpZDmY3tThey5Ydi","statistic.model");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Statistic=o.StatisticProps=void 0;var a=e("../../Plugin/Reactive/lib"),c=e("./components/Chart"),l=e("../Utils/date");o.StatisticProps={};var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.records=new a.PropertyArray([]),t}return n(t,e),t.prototype.length=function(){return this.records.length},t.prototype.getRecords=function(e){if(e===c.ChartType.Year)return this.getYearRecords();for(var t,o=[],r=new Date,n=c.ChartDataLength[e],i="",a=0;a<n;a++)i=l.getStringFromDate(r),(t=_.find(this.records.value,function(e){return e.date===i}))?o.unshift(t):o.unshift({date:i,quantity:0}),r.setDate(r.getDate()-1);return o},t.prototype.getYearRecords=function(){for(var e,t=[],o=new Date,r=c.ChartDataLength[c.ChartType.Year],n="",i=0;i<r;i++)n=o.getMonth()+"-"+o.getFullYear(),e=_.filter(this.records.value,function(e){return e.date.lastIndexOf(n)>0}).reduce(function(e,t){return e.quantity+=t.quantity,e},{date:l.getStringFromDate(o),quantity:0}),t.unshift(e),o.setMonth(o.getMonth()-1);return t},t.prototype.getTodayRecord=function(){var e=l.getStringFromDate(new Date);return _.find(this.records.value,function(t){return t.date===e})},t.prototype.getAverage=function(e){var t=e.reduce(function(e,t){return e+t.quantity},0);return Math.round(t/e.length)},t.prototype.addRecord=function(e){e<=0||this.addRecordWithCustomDate(e,new Date)},t.prototype.addRecordWithCustomDate=function(e,t){if(!(e<=0)){var o=l.getStringFromDate(t),r=_.find(this.records.value,function(e){return e.date===o});r?r.quantity+=e:(this.records.push({date:o,quantity:e}),this.records.length>=365&&this.records.shift())}},i([a.prop()],t.prototype,"records",void 0),t}(a.Model);o.Statistic=a.repository.register(new s("Statistic"),!0),cc._RF.pop()},{"../../Plugin/Reactive/lib":"lib","../Utils/date":"date","./components/Chart":"Chart"}],"table.model":[function(e,t,o){"use strict";cc._RF.push(t,"6c7e9tH2PRBWaVElrtiNvt4","table.model");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,o,a):n(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TableModel=o.TableModelProp=void 0;var a=e("../../Plugin/Reactive/Model/Model"),c=e("../../Plugin/Reactive/lib");o.TableModelProp={boardStr:"Table_Model.boardStr",blocksStr:"Table_Model.blocksStr",score:"Table_Model.score",streak:"Table_Model.streak",totalStarCollected:"Table_Model.totalStarCollected",tempTotalStarCollected:"Table_Model.tempTotalStarCollected"};var l=function(e){function t(){var t=e.call(this,"Table_Model")||this;return t.boardStr=new c.PropertyValue(""),t.blocksStr=new c.PropertyValue(""),t.score=new c.PropertyValue(0),t.totalStarCollected=new c.PropertyValue(0),t.moves=new c.PropertyValue(0),t.playingDuration=new c.PropertyValue(0),t.totalStreak=new c.PropertyValue(0),t.totalCombo=new c.PropertyValue(0),t.maxStreak=new c.PropertyValue(0),t.maxCombo=new c.PropertyValue(0),t.tempTotalStarCollected=new c.PropertyValue(0),t}return n(t,e),t.prototype.resetForNewGame=function(){this.boardStr.value="",this.blocksStr.value="",this.score.value=0,this.totalStarCollected.value=0,this.playingDuration.value=0,this.totalStreak.value=0,this.totalCombo.value=0,this.maxStreak.value=0,this.maxCombo.value=0,this.tempTotalStarCollected.value=0},i([c.prop()],t.prototype,"boardStr",void 0),i([c.prop()],t.prototype,"blocksStr",void 0),i([c.prop()],t.prototype,"score",void 0),i([c.prop()],t.prototype,"totalStarCollected",void 0),i([c.prop()],t.prototype,"moves",void 0),i([c.prop()],t.prototype,"playingDuration",void 0),i([c.prop()],t.prototype,"totalStreak",void 0),i([c.prop()],t.prototype,"totalCombo",void 0),i([c.prop()],t.prototype,"maxStreak",void 0),i([c.prop()],t.prototype,"maxCombo",void 0),i([c.prop()],t.prototype,"tempTotalStarCollected",void 0),t}(a.Model);o.TableModel=l;var s=c.repository.register(new l,!0);o.default=s,cc._RF.pop()},{"../../Plugin/Reactive/Model/Model":"Model","../../Plugin/Reactive/lib":"lib"}]},{},["CustomAssembler","CustomRenderComponent","BlockGamePlus","BlockPlus","BoardGamePlus","CellGamePlus","TableEffectPlus","GameEditor","GameUIControllerEditor","ManagerSetupScripts","ItemScriptLoad","ItemSelectHand","PopupBlockMaker","PopupLoad","PopupSave","PopupSelectHand","PopupSelectTheme","BlockCustom","BoardCustom","PopupCustomBlocks","SetupScriptController","KD3DButton","KDOnLoadAnimation","KDDevicePropertiesHelper","KDDragCom","KDDropDownItem","KDDropDownListView","KDEditboxGroupKeyboardHandle","KDBaseTabContent","KDTabView","KDToggle","KDTrimSpriteWithMaxSize","FixedQueue","Helper","KDScreenShotUtil","KDTextureUtil","PngEndcoder","Block","Board","Cell","DragCom","GridCom","GridConfig","Table","TableInfo","TableMatrix","KDBasePopup","KDBasePopupScale","KDBasePopupScaleFullScreen","AdmobHelper","AppsflyerAnalytic","FirebaseAnalytic","FirebaseAuthentication","FirebaseCrashlytic","FirebaseRemoteConfig","GameServices","IAPHelper","IIAPItem","LocalNotification","NativeGeneralInfo","Rate","Share","Vibration","ReactBindingData","ReactiveAnimation","ReactiveAudio","ReactiveBindingData","ReactiveButton","ReactiveColor","ReactiveComponent","ReactiveCustomHandlers","ReactiveEnable","ReactiveLabel","ReactiveNode","ReactiveOpacity","ReactivePosition","ReactiveProgressBar","ReactiveScale","ReactiveSize","ReactiveSlider","ReactiveSpriteFrame","ReactiveToggle","Class.decorator","Prop.decorator","React.decorator","Model","Repository","ViewModel","Property","PropertyArray","PropertyFilter","PropertyHightValue","PropertyMap","PropertyMapFunc","PropertyMapMulti","PropertyNonSerialize","PropertyNumberRunner","PropertyRunner","PropertyTrigger","PropertyValue","ReactiveProperty","const","encrypt","lib","AwardComp","AwardCupItem","AwardData","award.model","ConstantNative","BlockGame","BoardGame","CellGame","CellMaskStar","ConstantGameplay","ITableGame","TableConfig","TableEffect","TableGame","EffectNewHighestScore","GameLoading","ConstantGame","GameUIController","GameplayControllerBase","HandPoint","table.model","UXAnalyticTrigger","MainMenu","TutorialAward","AdManager","AnalyticManager","GameServiceManager","NativeInitManager","PaymentProcessManager","RemoteConfigManager","Merge2dxData","Notification","noti.const","noti.model","CupFrames","player.model","BasePopup","popupsview.model","ChooseAward","GiftReward","Lose","NewHighestScoreLayer","Pause","PopupFeedback","RatePopup","Setting","WebView","LoadingScene","scene.const","scene.model","sound.const","sound.controller","sound.model","ButtonGroup","Chart","StatisticView","IStatisticData","statistic.model","TutorialConstant","TutorialController","TutorialInGameController","RestAPIManager","UIScale","date","number"]);